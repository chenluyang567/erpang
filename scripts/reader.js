(self.webpackChunkdesigner=self.webpackChunkdesigner||[]).push([[207],{87223:function(t,e,i){"use strict";const n=()=>{};function o(t,e){return t===e}function r(t){return"function"==typeof t}function s(t){return null==t}function a(t){return null===t||s(t)}function l(t){return!a(t)}function u(t){return"[object String]"===Object.prototype.toString.call(t)}function d(t){return u(t)?0==t.length:s(t)||null==t}function c(){const t=window.crypto;return t&&r(t.randomUUID)?t.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}function h(t){return t&&t.length>0?t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}class p{constructor(){this.promise=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}resolve(t){return this._resolve(t),this.promise}reject(t){return this._reject(t),this.promise}}class g{constructor(t,e){this.defer=new p,this.task=window.setTimeout((()=>{this.defer.resolve(t())}),e)}get(){return this.defer.promise}cancal(){0!=this.task&&window.clearTimeout(this.task),this.task=0,this.defer.resolve(null)}}const f=(t,e=1)=>new g(t,e);const y=new class{constructor(){this.queue=new Array,this.doing=!1}push(t){this.queue.push(t),this.start()}start(){!this.doing&&this.queue.length>0&&(this.doing=!0,f((()=>{let t;for(;t=this.queue.shift();)t();this.doing=!1})))}},m=t=>{y.push(t)};class v{constructor(t,e,i){this.supplier=t,this.life=e,this.onDie=i}isAlive(){return void 0!==this.value}get(){var t;return null===(t=this.task)||void 0===t||t.cancal(),void 0===this.value&&(this.value=this.supplier()),void 0!==this.value&&(this.task=f((()=>{this.toDie()}),this.life)),this.value}toDie(){const t=this.value;this.value=void 0,t&&this.onDie&&this.onDie(t)}dispose(){var t;null===(t=this.task)||void 0===t||t.cancal(),this.toDie()}}var $;const b=(t,e,i)=>{const n=t[e];return null==n&&(t[e]=i),t[e]},w={name:"SWOFD",version:"2.0",namespace:"sw"},x=b(i.g,"suwell",{});x.info=Object.assign(w,x.info);const C=()=>{var t,e;return null!==(e=null===(t=x.info)||void 0===t?void 0:t.name)&&void 0!==e?e:w.name},D=()=>{var t,e;return null!==(e=null===(t=x.info)||void 0===t?void 0:t.version)&&void 0!==e?e:w.version};function O(t,e){for(let o of Object.getOwnPropertyNames(e)){if("constructor"==o)continue;const r=Object.getOwnPropertyDescriptor(e,o),s=Object.getOwnPropertyDescriptor(t,o);if(r&&((i=r)!==(n=s)&&(i.enumerable!==(null==n?void 0:n.enumerable)||i.configurable!==(null==n?void 0:n.configurable)||i.writable!==(null==n?void 0:n.writable)||i.set!==(null==n?void 0:n.set)||i.get!==(null==n?void 0:n.get)||i.value!==(null==n?void 0:n.value))))return!1}var i,n;return!0}const P=(t,e,i=!1)=>{if(i)return P(t,e,!1)||(()=>{switch(typeof t){case"object":return O(Object.getPrototypeOf(t),e.prototype);case"function":return O(t.prototype,e.prototype)}return!0})();switch(typeof t){case"function":return t.prototype instanceof e;case"object":return t instanceof e}return!1};var S,I;!function(t){t.create=function(t){const e=t.INSTANCE;return P(e,t)?e:new t}}(S||(S={})),function(t){function e(t){return t&&"object"==typeof t&&r(t.close)}t.is=e,t.free=function(t){e(t)&&m(t.close.bind(t))}}(I||(I={}));class T{constructor(){this._closed=!1}isClosed(){return this._closed}close(){if(!this.isClosed()&&(this._closed=!0,this.doClose(),this._onClosed))for(const t of this._onClosed)t.call(this)}onClosed(t){this._onClosed||(this._onClosed=new Set),this._onClosed.add(t)}}class R extends T{constructor(){super(),this.observers=new Set,this.paused=!1}addObserver(t){this.observers.add(t)}deleteObserver(t){this.observers.delete(t)}deleteObservers(){this.observers.clear()}notifyObservers(t,e,i=!0,n){if(this.paused||0==this.observers.size)return;const o=Object.assign({},n,{observable:this});if(i)m((()=>{for(const i of this.observers)i.update(t,e,o)}));else for(const i of this.observers)i.update(t,e,o)}pause(){this.paused=!0}resume(){this.paused=!1}doClose(){this.deleteObservers()}}class j extends T{constructor(){super()}doClose(){}}class A extends T{constructor(){super(),this.listeners=new Set}doClose(){this.listeners.clear()}addListener(t){return this.listeners.add(t),this}deleteListener(t){return this.listeners.delete(t),this}deleteListeners(){return this.listeners.clear(),this}notifyListener(t,e=!1){if(e)f((()=>{for(const e of this.listeners)e.apply(this,t)}));else for(const e of this.listeners)e.apply(this,t)}}class F{lazyGet(t,e){const i="_"+t;let n=this[i];return n||(n=e(),Object.defineProperty(this,i,{configurable:!1,enumerable:!1,writable:!1,value:n}),n)}}const M={devicePixelRatio:null!==($=i.g.devicePixelRatio)&&void 0!==$?$:1,httpRangeRequest:!0,resourceUnique:!0,webwork:!0,zipLevel:5};var B;!function(t){t.prefix=w.namespace,t.container=`${t.prefix}Container`,t.application=`${t.prefix}Application`,t.document=`${t.prefix}Document`,t.page=`${t.prefix}Page`,t.event=`${t.prefix}Event`}(B||(B={}));const k=[210,297];i(1738);class L{has(t){return void 0!==this.get(t)}dels(...t){for(let e of t)this.del(e);return this}sets(t,e=(t=>t)){if(Array.isArray(t))for(const[e,i]of t)this.set(e,i);else for(const i in t)this.set(e(i),t[i]);return this}}class N{clear(){this.each((t=>this.del(t)))}adds(t){if(Array.isArray(t))for(const e of t)this.add(e);return this}}var E=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const _="object"==typeof window;l(i.g.document)&&r(i.g.importScripts);class V{}const q=_?window:{document:new V,URL:new V,localStorage:new V,webkitURL:new V},G=q.document,z="object"==typeof navigator&&navigator.userAgent.includes("Firefox");var U,W,H;!function(t){let e,i,n,o,c;!function(e){const i="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xhtml";function o(t,e){return t&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.getComputedStyle(t).getPropertyValue(e)||t&&t.style&&t.style.getPropertyValue(e)||""}function s(t,e){return G.createElement(t,e)}e.clear=function(t){if(t)for(;t.firstChild;)t.removeChild(t.firstChild);return t},e.remove=function(t){var e;null===(e=null==t?void 0:t.parentNode)||void 0===e||e.removeChild(t)},e.save=function(t,e){const i=s("a");G.body.appendChild(i),i.style.display="none";const n=W.url.create(t);i.href=n,i.download=e,i.click(),W.url.revoke(n)},e.absolute=function(t,e,i){const n=null==t?void 0:t.style;return n&&(n.position="absolute",n.left=e+"px",n.top=i+"px"),t},e.isParent=function(t,e){return t!==e&&t.contains(e)},e.getCSSValue=o,e.overlay=function(t){const e=G.createElement(t.tagName);for(const i of["width","height"]){const n=t.getAttribute(i);n&&e.setAttribute(i,n)}const i=e.style;i.position="absolute";for(const e of["left","top","width","height"]){let n=o(t,e);d(n)&&(n="0"),i.setProperty(e,n)}return e},e.create=s,e.comment=function(t=""){return G.createComment(t)},e.createNS=function(t){return G.createElementNS(function(t){switch(t){case"svg":case"g":case"text":case"rect":case"path":return i;default:return n}}(t),t)},e.parseHTML=function(t){const e=s("div");return e.innerHTML=t.trim(),e.firstChild},e.loadImage=function(t){return new Promise(((e,i)=>{const n=new Image;n.onerror=t=>{i(t)},n.onload=t=>{e(t.target)},n.src=t}))},e.attach=function(t,e,i){if(t&&e)if(!1===i)delete t[e];else{if(!i)return t[e];t[e]=i}},e.insertBefore=function(t,e){var i;t&&e&&(null===(i=e.parentNode)||void 0===i||i.insertBefore(t,e))},e.insertAfter=function(t,e){var i;t&&e&&(null===(i=e.parentNode)||void 0===i||i.insertBefore(t,e.nextSibling))},e.parentUtil=function(t,e){let i=t;const n=Element.prototype;if("function"==typeof n.closest)return i.closest(e);const o=n,r=o.matches||o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector||function(){return!1};for(;i;){if(r.call(i,e))return i;i=i.parentElement}return null},e.inDOM=function(t){var e;return null!==(e=t.isConnected)&&void 0!==e?e:G.contains(t)},e.clone=function(t,e=!0){var i;const n=t.cloneNode(e),o=n.querySelectorAll("canvas");if(o&&o.length){const e=t.querySelectorAll("canvas");for(let t=0;t<o.length;t++)null===(i=o[t].getContext("2d"))||void 0===i||i.drawImage(e[t],0,0)}return n},e.openFile=function(e){return E(this,void 0,void 0,(function*(){if(r(window.showOpenFilePicker))try{const[t]=yield window.showOpenFilePicker({multiple:!1});return t.getFile()}catch(t){}const i=t.util.create("input");i.type="file",e&&e.length&&(i.accept=e.filter((t=>t&&t.length)).map((t=>"."===t.charAt(0)?t:"."+t)).join(",")),i.multiple=!1,i.webkitdirectory=!1,i.click();const n=new p;return i.onchange=()=>{i.files&&i.files[0]?n.resolve(i.files[0]):n.resolve(null)},n.promise}))}}(e=t.util||(t.util={}));class h extends T{constructor(t){super(),this.raw=new MutationObserver(this.onMutation.bind(this)),this.raw.observe(t,this.config())}config(){return{childList:!0,subtree:!0}}onMutation(t,e){for(const e of t)switch(e.type){case"childList":const t=Array.from(e.addedNodes);t.length>0&&this.onNodesAdded(t);const i=Array.from(e.removedNodes);i.length>0&&this.onNodesRemoved(i);break;case"attributes":const n=e.attributeName;n&&this.onAttributeChanged(e.target,n,e.oldValue);break;case"characterData":this.onTextChanged(e.target,e.oldValue)}}doClose(){this.raw.disconnect()}onNodesAdded(t){}onNodesRemoved(t){}onAttributeChanged(t,e,i){}onTextChanged(t,e){}}t.Observer=h,function(t){class e extends h{constructor(){super(G.body),this.inserts=new Map,this.removes=new Map}onNodesAdded(t){for(const e of this.inserts.values())e(t)}onNodesRemoved(t){for(const e of this.removes.values())e(t)}doClose(){super.doClose(),this.inserts.clear(),this.removes.clear()}}let i,n=1;function o(){i||_&&(i=new e)}function r(t){o();const e=n++;return null==i||i.removes.set(e,t),e}function s(t){i&&(i.inserts.delete(t)||i.removes.delete(t))&&0==i.inserts.size&&0==i.removes.size&&(i.close(),i=void 0)}t.onRemove=r,t.onceRemove=function(t,e){const i=r((n=>{n.includes(t)&&(s(i),e())}));return i},t.onInsert=function(t){o();const e=n++;return null==i||i.inserts.set(e,t),e},t.off=s}(i=t.watcher||(t.watcher={})),function(t){t.make=(t,e,i)=>{const n=G.createElement("canvas");return n.width=t,n.height=e,i&&i(n),n};const e=1,i=1;function n(n,o){var r;const s=null!==(r=t.make(e,i).getContext("2d"))&&void 0!==r?r:new CanvasRenderingContext2D,a=t.make(n,o,(t=>{const e=t.getContext("2d");if(e)try{e.fillRect.apply(e,[n-1,o-1,1,1])}catch(t){}}));s.clearRect(0,0,e,i),s.drawImage(a,n-1,o-1,1,1,0,0,1,1);return 0!==s.getImageData(0,0,e,i).data[3]}const o="_canvas_max_area";let r=0,s=0;t.maxArea=function(){return new Promise((t=>{if(r>0&&s>0)t([r,s]);else{const e=W.store.get(o);if(e&&Math.abs(Date.now()-e.time)<6048e5)t([r,s]=[e.width,e.height]);else{let e=0;if(z)e=8e3;else for(let t=8192;t<16384;t+=1024){if(!n(t,t)){for(let i=e+16;i<t&&n(i,i);i+=16)e=i;break}e=t}r=s=e,W.store.set(o,{width:r,height:s,time:Date.now()}),t([e,e])}}}))},t.metrics=function(){var n;if(!_)return{actualAscent:!1,actualDescent:!1};const o=(null!==(n=t.make(e,i).getContext("2d"))&&void 0!==n?n:new CanvasRenderingContext2D).measureText("Sphinx");return{actualAscent:"actualBoundingBoxAscent"in o,actualDescent:"actualBoundingBoxDescent"in o}}(),t.toBlob=function(e){return new Promise(((i,n)=>{(e instanceof HTMLImageElement?t.make(e.width,e.height,(t=>{const i=t.getContext("2d");i&&(i.imageSmoothingEnabled=!0,i.drawImage(e,0,0))})):e).toBlob((t=>{t?i(t):n("Canvas#toBlob failed")}),"image/jpeg",.6)}))},t.canOffscreen=function(n){const o=t.make(e,i),r="function"==typeof o.transferControlToOffscreen;if(r&&n){return!!o.transferControlToOffscreen().getContext(n)}return r}}(n=t.canvas||(t.canvas={})),function(t){var e;const i=!!(null===(e=G.body)||void 0===e?void 0:e.dataset),n="data-";function o(t,e,o){t&&(i?a(o)?delete t.dataset[e]:t.dataset[e]="string"==typeof o?o:W.json.stringify(o):a(o)?t.removeAttribute(n+e):t.setAttribute(n+e,"string"==typeof o?o:W.json.stringify(o)))}t.set=o,t.sets=function(t,e){for(let[i,n]of e)o(t,i,n)},t.get=function(t,e){const o=i?null==t?void 0:t.dataset[e]:t.getAttribute(n+e);if(l(o))try{return W.json.parse(o)}catch(t){return o}},t.has=function(t,e){return i?l(null==t?void 0:t.dataset[e]):t.hasAttribute(n+e)}}(o=t.data||(t.data={})),function(e){function i(t){const e=t.getBoundingClientRect();let i=t.offsetLeft,n=t.offsetTop;if(s(n)){n=e.top;let i=t.parentElement;for(;i;)n+=i.scrollTop,i=i.parentElement}if(s(i)){i=e.left;let n=t.parentElement;for(;n;)i+=n.scrollLeft,n=n.parentElement}return{left:i,top:n}}e.getRect=function(t){const e=t.getBoundingClientRect();let n=0,o=0,r=t;for(;r;)o+=i(r).top,n+=i(r).left,r=r.offsetParent;return s=n,a=o,l=e.width,u=e.height,{x:s,y:a,left:s,top:a,width:l,height:u}||e;var s,a,l,u},e.append=function(e,i,n){if(i){const t=document.styleSheets;if(t&&t.length)for(const e of t)if(e.title==i)return e}const o=new t.Base(t.util.create("style"));return i&&o.attr.set("title",i),o.html=e,o.appendTo(null!=n?n:document.head),o.original.sheet}}(c=t.style||(t.style={}));class g extends N{constructor(t){super(),this.token=t}adds(t){const e=t.map((t=>t.trim()));return e.length>0&&this.token.add(...e),this}add(t){const e=t.split(/[\s,]+/g).map((t=>t.trim()));return e.length>0&&this.token.add(...e),this}toggle(t){return this.token.toggle(t.trim())}has(t){return this.token.contains(t)}del(t){const e=t.split(/[\s,]+/g).map((t=>t.trim()));return e.length>0&&this.token.remove(...e),!0}each(t){this.token.forEach((e=>t.call(this,e)))}clear(){this.token.remove(...this.token.values())}}class f extends L{constructor(t,e){super(),this.css=t,this.units=new Set(e)}get(t){const e=this.css.getPropertyValue(t);if(0!=e.length)return e}set(t,e){return"number"==typeof e&&this.units.has(t)?this.css.setProperty(t,`${e}px`):this.css.setProperty(t,`${e}`),this}del(t){return this.css.removeProperty(t),!0}}t.StyleMap=f;class y extends F{constructor(t){super(),this.element=t}toString(){return this.element.outerHTML}get original(){return this.element}get parent(){return this.element.parentElement}get id(){return this.element.id}set id(t){this.element.id=t}get html(){return this.element.innerHTML}set html(t){this.element.innerHTML=t}get attr(){const t=this.element;return this.lazyGet("attr",(()=>new class extends L{has(e){return t.hasAttribute(e)}get(e){const i=t.getAttribute(e);if(null!=i)try{return W.json.parse(i)}catch(t){return i}}set(e,i){return u(i)?t.setAttribute(e,i):t.setAttribute(e,W.json.stringify(i)),this}del(e){return t.removeAttribute(e),!0}}))}get data(){const t=this.element;return this.lazyGet("data",(()=>new class extends L{has(e){return o.has(t,e)}get(e){return o.get(t,e)}set(e,i){return o.set(t,e,i),this}del(t){return this.set(t,void 0),!0}}))}get style(){const t=this.element.style;return this.lazyGet("style",(()=>new f(t,["x","y","left","top","width","height"])))}get class(){return this.lazyGet("class",(()=>new g(this.element.classList)))}absolute(t,i){return this.element instanceof HTMLElement?e.absolute(this.element,t,i):this.element instanceof SVGElement&&this.attr.sets({x:t,y:i}),this}put(t,e){return void 0===e?delete this.element[t]:this.element[t]=e,this}get(t){return this.element[t]}empty(){return e.clear(this.element),this}show(){return this.element instanceof SVGElement?this.attr.set("display",""):this.style.set("display",""),this}hide(){return this.element instanceof SVGElement?this.attr.set("display","none"):this.style.set("display","none"),this}remove(){var t;return null===(t=this.element.parentNode)||void 0===t||t.removeChild(this.element),this}has(t){return!!t&&(t instanceof y?this.element.contains(t.original):this.element.contains(t))}append(t){return u(t)?this.element.insertAdjacentHTML("beforeend",t):t instanceof y?this.element.appendChild(t.original):this.element.appendChild(t),this}appendTo(t){return t instanceof y?t.append(this):t.appendChild(this.element),this}clone(t=!0){return this.element.cloneNode(t)}query(t){return this.element.querySelector(t)}queryAll(t){return[...Array.from(this.element.querySelectorAll(t))].map((t=>t))}listeners(){return this.lazyGet("listeners",(()=>new Array))}on(t,e,i){this.listeners().push([t,e,i]),this.element.addEventListener(t,e,i)}off(t,e,i){this.element.removeEventListener(t,e,i)}offAll(){this.listeners().forEach((t=>{this.off(t[0],t[1],t[2])}))}}t.Base=y}(U||(U={})),function(t){let e,n,o,r,s;!function(t){const e=q.URL||q.webkitURL;t.create=function(t){return e.createObjectURL(t)},t.revoke=function(t){e.revokeObjectURL(t)}}(e=t.url||(t.url={})),function(t){t.parse=function(t){if(!a(t))return JSON.parse(t)},t.stringify=function(t){return JSON.stringify(t)}}(n=t.json||(t.json={})),function(t){t.parse=function(t){if(t){return(new DOMParser).parseFromString(t.trim(),"text/xml")}},t.stringify=function(t){return(new XMLSerializer).serializeToString(t)}}(o=t.xml||(t.xml={})),t.copy=t=>{if(void 0!==t)return null===t?null:t instanceof Date?new Date(t.getTime()):n.parse(n.stringify(t))},function(t){let e;const o=()=>e||(e=i.g.localStorage);function r(t){var e,i;const r=null!==(i=null===(e=o())||void 0===e?void 0:e.getItem(t))&&void 0!==i?i:null;return null==r?r:n.parse(r)}t.set=function(t,e){var i;null===(i=o())||void 0===i||i.setItem(t,n.stringify(e))},t.get=r,t.has=function(t){var e,i;return null!=(null!==(i=null===(e=o())||void 0===e?void 0:e.getItem(t))&&void 0!==i?i:null)},t.del=function(t){var e;const i=r(t);return null===(e=o())||void 0===e||e.removeItem(t),i},t.clear=function(){var t;null===(t=o())||void 0===t||t.clear()},t.keys=function(){var t;const e=o().length,i=new Array;for(let n=0;n<e;n++){const e=null===(t=o())||void 0===t?void 0:t.key(n);e&&i.push(e)}return i}}(r=t.store||(t.store={})),function(t){t.enable=!!i.g.Worker;class e extends T{constructor(e,i){super(),this.name=e,this.ports=new Set,t.enable&&(this.worker=i),this.initStore()}initStore(){if(this.worker){const t=new MessageChannel,e=t.port1;e.onmessage=t=>{const i=t.data;switch(i.type){case"get":{const t=r.get(i.data.key);e.postMessage({type:i.type,flag:i.flag,data:t});break}case"set":r.set(i.data.key,i.data.val),e.postMessage({type:i.type,flag:i.flag})}},this.ports.add(e),this.send({type:"storage"},[t.port2])}}send(t,e=[]){var i;null===(i=this.worker)||void 0===i||i.postMessage(t,e)}listen(t,e){var i,n,o;"message"===t?null===(i=this.worker)||void 0===i||i.addEventListener("message",(t=>e.call(this.worker,t))):(null===(n=this.worker)||void 0===n||n.addEventListener("messageerror",(t=>e.call(this.worker,t))),null===(o=this.worker)||void 0===o||o.addEventListener("error",(t=>e.call(this.worker,t))))}doClose(){var t;for(const t of this.ports)t.close();this.ports.clear(),null===(t=this.worker)||void 0===t||t.terminate()}}t.proxy=function(i,n){if(t.enable)try{const t=n();return new e(i,t)}catch(t){console.log("Create web worker",t)}return new e("")}}(s=t.worker||(t.worker={}))}(W||(W={}));class Y{constructor(t,e,i=!1){this.code=t,this.message=e,this.interrupt=i}}!function(t){t.Package=1e3,t.IO=2e3,t.DOM=3e3,t.Render=4e3}(H||(H={}));const X=new Map,Z=new Y(0,"Not found reason"),K=new Map;class Q extends Error{constructor(t,e=void 0){var i,n;super(),this._reason=null!==(n=null!==(i=K.get(t))&&void 0!==i?i:X.get(t))&&void 0!==n?n:Z,this.name="Exception",this.cause=e,Object.setPrototypeOf(this,new.target.prototype)}get message(){return this._reason.message.replace(/%(\w+)%/g,((t,e)=>{var i;const n=null===(i=this._variables)||void 0===i?void 0:i.get(e);return null!=n?n:e}))}get code(){return this._reason.code}set(t,e){return this._variables||(this._variables=new Map),this._variables.set(t,e),this}isInterrupt(){return this._reason.interrupt}static register(t){if(X.has(t.code))throw new SyntaxError(`Reason ${t} already exist`);return X.set(t.code,t),t}static wrapVariable(t){return`%${t}%`}static dump(t=!1){const e=t=>[...t.values()].sort(((t,e)=>t.code-e.code)),i=e(K),n=e(X);console.log("I18N",t?W.json.stringify(i):i),console.log("Origin",t?W.json.stringify(n):n)}}var J;_&&(window.onerror=t=>(console.log(t),!0),window.addEventListener("error",(t=>(t.preventDefault(),console.log(t),!0))),window.addEventListener("unhandledrejection",(t=>(t.preventDefault(),console.log(t,t.reason),!0)))),function(t){t.XmlParseFailed=Q.register(new Y(H.IO+1,"Read xml failed")),t.XmlRootNotFound=Q.register(new Y(H.IO+2,"Not found root element"))}(J||(J={}));var tt=i(22215),et=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const it=t=>null==t;class nt{constructor(t){this.map=null!=t?t:new Map}get size(){return this.map.size}clear(){this.map.clear()}entries(){return this.map.entries()}keys(){return this.map.keys()}values(){return this.map.values()}toMap(){return new Map(this.map)}[Symbol.iterator](){return this.entries()}forEach(t,e){this.map.forEach(t,e)}asyncEach(t,e){return et(this,void 0,void 0,(function*(){this.map.forEach(t);for(let[i,n]of this.map)yield t.call(e,n,i,this.map)}))}}class ot extends nt{constructor(t){super(t)}delete(t){return!it(t)&&this.map.delete(t)}get(t){if(!it(t))return this.map.get(t)}has(t){return!it(t)&&this.map.has(t)}set(t,e){return it(t)||(it(e)?this.delete(t):this.map.set(t,e)),this}}class rt extends nt{constructor(t){super(t)}delete(t){return this.map.delete(t)}get(t){return this.map.get(t)}has(t){return this.map.has(t)}set(t,e){return this.map.set(t,e),this}safeGet(t,e){let i=this.get(t);return void 0===i&&(i=e(),this.set(t,i)),i}}var st;const at=null!==(st=i.g.console)&&void 0!==st?st:{log:n};var lt;!function(t){t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.OFF=5]="OFF"}(lt||(lt={})),function(t){t.of=function(e){const i=t[e];return"number"==typeof i?i:t.OFF}}(lt||(lt={}));class ut{constructor(t){var e,i,n,o;this.name=t,this._lv=dt,this._fmt=`${t} - `,this._fxDebug=(null!==(e=at.debug)&&void 0!==e?e:at.log).bind(at,this._fmt),this._fxInfo=(null!==(i=at.info)&&void 0!==i?i:at.log).bind(at,this._fmt),this._fxWarn=(null!==(n=at.warn)&&void 0!==n?n:at.log).bind(at,this._fmt),this._fxError=(null!==(o=at.error)&&void 0!==o?o:at.log).bind(at,this._fmt)}set level(t){this._lv=t}get level(){return this._lv}get debug(){return this.level<=lt.DEBUG?this._fxDebug:n}get info(){return this.level<=lt.INFO?this._fxInfo:n}get warn(){return this.level<=lt.WARN?this._fxWarn:n}get error(){return this.level<=lt.ERROR?this._fxError:n}}const dt=lt.INFO,ct="_swlog",ht="_default";class pt{static setCfgVal(t,e){let i=W.store.get(ct);i||(i={},i[ht]=lt[dt]),i[t]=t!==ht&&e-lt.of(i[ht])==0?"":lt[e],W.store.set(ct,i)}static getCfgVal(t){let e=W.store.get(ct);if(e){const i=e[t];if("string"==typeof i)return i.length>0?lt.of(i.toUpperCase()):lt.of(e[ht])}return null}static getLogger(t,e){var i;const n=null!=t?t:"Root",o=pt.getCfgVal(n),r=pt.cache.safeGet(n,(()=>new ut(n.padEnd(10))));if(null===o){const t=null!==(i=null!=e?e:pt.getCfgVal(ht))&&void 0!==i?i:dt;pt.setCfgVal(n,t),r.level=t}else r.level=o;return r}static setDefaultLevel(t){let e=dt;e="string"==typeof t?lt.of(t):t,this.setCfgVal(ht,e)}}pt.cache=new rt;var gt=i(48834).Buffer;const ft=pt.getLogger("IO");var yt;!function(t){t.attrs=":@",t.text="$$"}(yt||(yt={}));class mt{constructor(t,e){this.raw=t,this._index=e}origin(){return this.raw}name(){for(const t of Object.keys(this.raw))if(t!=yt.attrs)return t;return""}attribute(t){return this.raw[yt.attrs]?this.raw[yt.attrs][t]:null}text(){var t;return null!==(t=this.raw[this.name()][0][yt.text])&&void 0!==t?t:null}index(){return this._index}children(t){const e=this.raw[this.name()],i=new Array;if(Array.isArray(e)){const n=t==Yt.All;e.forEach(((e,o)=>{const r=new mt(e,o);(n||t==r.name())&&i.push(r)}))}return i}dump(){ft.info(this.raw)}}class vt{read(t,e){const i=new tt.XMLParser({ignoreDeclaration:!0,ignoreAttributes:!1,attributeNamePrefix:"",attributesGroupName:"",parseAttributeValue:!1,parseTagValue:!1,removeNSPrefix:!0,textNodeName:yt.text,preserveOrder:!0}),n="string"==typeof t?t:gt.from(t),o=i.parse(n),r=new mt(o[0],0),s=S.create(e);if(!o)throw new Q(J.XmlRootNotFound.code);return s.node=r,s}}function $t(){return new vt}var bt=i(44574),wt=i.n(bt),xt=i(48834);var Ct=i.g.Buffer||xt.Buffer,Dt=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class Ot{name(){return""}asBuffer(){return Dt(this,void 0,void 0,(function*(){return new ArrayBuffer(0)}))}hash(t){return Dt(this,void 0,void 0,(function*(){return new ArrayBuffer(0)}))}close(){}}const Pt=new class{isOpen(){return Promise.resolve(!0)}names(){return Dt(this,void 0,void 0,(function*(){return[]}))}has(t){return Dt(this,void 0,void 0,(function*(){return!1}))}entry(t){return Dt(this,void 0,void 0,(function*(){return new Ot}))}put(t,e){return Dt(this,void 0,void 0,(function*(){}))}remove(t){return Dt(this,void 0,void 0,(function*(){}))}flush(t,e){return Dt(this,void 0,void 0,(function*(){let i;return i="blob"===t?new Blob([new ArrayBuffer(0)]):"arraybuffer"===t?new ArrayBuffer(0):e,i}))}copyTo(t){return Dt(this,void 0,void 0,(function*(){}))}equals(t){return Dt(this,void 0,void 0,(function*(){return this===t}))}close(){}};var St,It;!function(t){t.is=function(t){if("object"!=typeof t)return!1;const e=Object.getOwnPropertyNames(Object.getPrototypeOf(Pt));for(let i in e)if("constructor"!=i&&!(i in t))return!1;return!0},t.isEqual=function(t,e){return Dt(this,void 0,void 0,(function*(){return!(!t||!e)&&t.equals(e)}))},t.normalize=function(t,e=!0){if(!t||0==t.length)return"";let i=t;return"/"==t.charAt(0)&&(i=t.substring(1)),e&&(i=i.toLowerCase()),i}}(St||(St={})),function(t){t.PackageOpenFailed=Q.register(new Y(H.Package+1,"Package open failed",!0)),t.DocumentOpenFailed=Q.register(new Y(H.Package+2,"Document open failed",!0)),t.PackageNotFound=Q.register(new Y(H.Package+3,"Package not found",!0)),t.EntryNameInvalid=Q.register(new Y(H.Package+11,"Entry name is empty")),t.EntryNotFound=Q.register(new Y(H.Package+12,"Not found entry %name%")),t.EntryLoadFailed=Q.register(new Y(H.Package+13,"Load entry %name% failed"))}(It||(It={}));Symbol.iterator;class Tt extends A{constructor(t){if(super(),this.elements=new Array,t)for(const e of t)s(e)||this.append(e)}add(t,e){return!s(t)&&("number"==typeof e?!(e<0||e>this.elements.length)&&(this.elements.splice(e,0,t),this.notifyListener(["add",t,e]),!0):this.append(t))}append(t){if(s(t))return!1;const e=this.elements.push(t);return this.notifyListener(["add",t,e-1]),!0}elementAtIndex(t){if(!(t<0||t>=this.elements.length))return this.elements[t]}at(t){return this.elementAtIndex(t)}get(t){return this.elementAtIndex(t)}first(){return this.elementAtIndex(0)}last(){return this.elementAtIndex(this.size()-1)}indexOf(t,e){const i=e||o;return this.elements.findIndex((e=>i(e,t)))}contains(t,e){return-1!==this.indexOf(t,e)}remove(t,e){const i=this.indexOf(t,e);return-1!==i&&void 0!==this.removeElementAtIndex(i)}removeElementAtIndex(t){if(t<0||t>=this.elements.length)return;const e=this.elements.splice(t,1);return this.notifyListener(["remove",e[0],t]),e[0]}removeAt(t){return this.removeElementAtIndex(t)}removeFirst(){return this.elements.shift()}removeLast(){return this.elements.pop()}clear(){this.elements.length=0,this.notifyListener(["clear"])}reverse(){this.elements.length>0&&(this.elements.reverse(),this.notifyListener(["reverse"]))}forEach(t){for(const e of this.elements)if(!1===t(e))break}toArray(){return this.elements.slice()}size(){return this.elements.length}count(){return this.size()}isEmpty(){return 0===this.size()}isNotEmpty(){return this.size()>0}[Symbol.iterator](){return this.elements.values()}}var Rt=Tt;const jt=pt.getLogger("Convert");class At{parse(t){return t}persist(t){return t}}At.INSTANCE=new At;const Ft=t=>{let e;const i=t+"";if(e="#"==i.charAt(0)?Number.parseInt(i.substring(1),16):Number.parseFloat(i),!Number.isNaN(e))return e},Mt=(t,e=4)=>{const i=Math.pow(10,e);return Math.round(t*i)/i},Bt=(t,e=-1)=>{var i;return void 0===t?e:Math.trunc(null!==(i=Ft(t))&&void 0!==i?i:e)};class kt{parse(t){const e=Ft(t);return null==e&&jt.warn(`Can not parse ${t} to number`),e}persist(t){return String(Mt(t))}}kt.INSTANCE=new kt;class Lt{parse(t){if(t&&t.length>0)return"true"==t.toLowerCase()}persist(t){return String(t)}}Lt.INSTANCE=new Lt;class Nt{parse(t){return t.split(/\s+/)}persist(t){return Array.isArray(t)?t.join(" "):""}}Nt.INSTANCE=new Nt;class Et{parse(t){const e=t.split(/\s+/).map((t=>Ft(t))),i=new Array;for(const t of e)void 0!==t&&i.push(t);return i}persist(t){return Array.isArray(t)?t.map((t=>Mt(t))).join(" "):""}}Et.INSTANCE=new Et;class _t{parse(t){if(t&&t.length){const e=/(\d{2,4})[-_/ ](\d{1,2})[-_/ ](\d{1,2}).*/g.exec(t.trim());if(e){const t=Number.parseInt(e[1]),i=Number.parseInt(e[2]),n=Number.parseInt(e[3]);if(Number.isInteger(t)&&Number.isInteger(i)&&Number.isInteger(n))return new Date(t,i-1,n)}}}persist(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}}_t.INSTANCE=new _t;const Vt=t=>S.create(t);var qt=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Gt=pt.getLogger("DOM"),zt=t=>P(t,Rt),Ut=t=>null!=t&&u(t),Wt=t=>{if("object"==typeof t)if(I.is(t))t.close();else if(zt(t)||Array.isArray(t))for(let e of t)Wt(e);else if(t instanceof Promise)t.then(Wt);else if(t instanceof Map)for(let[e,i]of t)Wt(i)};var Ht,Yt;!function(t){t.NodeNotReady=Q.register(new Y(H.DOM+50,"DOM node not ready")),t.FeildError=Q.register(new Y(H.DOM+51,"Feild %name% error")),t.RootError=Q.register(new Y(H.DOM+52,"Model root[%name%] need invalid path"))}(Ht||(Ht={})),function(t){let e;!function(t){t[t.attr=1]="attr",t[t.node=2]="node",t[t.choice=3]="choice"}(e=t.Type||(t.Type={})),t.All="*";class i{constructor(e){this._index=-1,this._node=e,this._children=e.children(t.All)}origin(){return this._node.origin()}name(){return this._node.name()}attribute(t){return this._node.attribute(t)}text(){return this._node.text()}index(){return this._node.index()}dump(){return this._node.dump()}nextChild(){return this._children[++this._index]}current(){return this._children[this._index]}children(e){return e==t.All?this._children:this._children.filter((t=>t.name()==e))}static wrap(t){return new i(t)}}t.ChoiceNode=i}(Yt||(Yt={}));const Xt="_meta_",Zt="/",Kt=new R;class Qt extends R{constructor(t){super(),this.parent=Kt,this.observer={update:(e,i,n)=>{e&&t.isAncestor(e)&&this.notifyObservers(e,i,!1,n)}},this.parent.addObserver(this.observer)}doClose(){this.parent.deleteObserver(this.observer),super.doClose()}}class Jt{}class te extends j{constructor(t){var e;super(),this._choice=!1,this.__willClosed=new Set,this.__data=this.willClose(new oe(null!==(e=null==t?void 0:t.isNew)&&void 0!==e&&e))}static is(t){return t&&P(t,te)}static allField(t){const e=Reflect.getMetadata(Xt,t);if(!e)return new Map;let i=e.allFields;if(!i){const n=new Array;for(;t;){const e=Reflect.getMetadata(Xt,t);e&&n.push(e.fields),t=Object.getPrototypeOf(t)}i=new Map;for(const t of n.reverse())for(const[e,n]of t)i.set(e,n);e.allFields=i}return i}get parent(){return this._parent}get isChoice(){return this._choice}set node(t){this.data().node=t}set package(t){this.data().package=t}get package(){let t=this;for(;t;){const e=t.data().package;if(e)return e;t=t.parent}throw new Q(It.PackageNotFound.code)}get observable(){return s(this._observable)&&(this._observable=this.willClose(new Qt(this))),this._observable}data(){return this.__data}doClose(){for(const t of this.__willClosed)t.close();this.__willClosed.clear()}willClose(t){return this.__willClosed.add(t),t}fields(){return te.allField(Object.getPrototypeOf(this))}getInfo(t,e=!0){const i=this.fields().get(t);if(s(i)){if(e)throw new Q(Ht.FeildError.code).set("name",t).set("msg","Not found field info");return ee.NULL}return i}getData(t){const e=this.data();let i=e.find(t);if(s(i)){const n=this.getInfo(t);i=new ne(this,n.name),e.fields.set(t,i)}return i}val(t){return this[t]}doGet(t){const e=this.getData(t);return e.parsed||this.parse(t,e),e.value}setUnitID(t){var e;null===(e=this.parent)||void 0===e||e.setUnitID(t)}parseText(t,e,i){try{return i&&t.startsWith("<![CDATA[")&&t.endsWith("]]>")&&(t=t.substring(9,t.length-3)),Vt(e).parse(t)}catch(t){Gt.debug(t)}}parse(t,e){const i=this.data(),n=i.node;if(!i.isNew&&s(n))throw new Q(Ht.NodeNotReady.code);const o=this.getInfo(t);if(n){const t=o.name,i=o.multiple,r=o.clazz,s=(t=>{if(!t)return!1;let e=t;return"function"==typeof t&&(e=t.prototype),"parse"in e&&"persist"in e})(r);switch(o.type){case Yt.Type.attr:{let i=n.attribute(t);if(null===i)for(const t of o.aliases)if(i=n.attribute(t),null!==i)break;Ut(i)?s?e.value=this.parseText(i,r,!1):Gt.info(`Unknown type of attribute ${t}`,r):o.required&&Gt.warn(`Not found required attribute ${t} from element ${n.name()}`);break}case Yt.Type.node:{const a=this;if(this.isChoice){const i=n.name();if(i==t||o.aliases.includes(i))if(s){const t=n.text();Ut(t)&&(e.value=this.parseText(t,r,o.isCDATA))}else{const i=r.prototype instanceof Jt?S.create(r):null,o=i?i.chose(n):r,s=S.create(o);te.is(s)?(s._parent=a,s.node=n,e.value=s):Gt.info(`Unknown type of choice node ${t}`,r)}}else if(o.isTextContent){const t=n.text();Ut(t)&&(e.value=this.parseText(t,r,o.isCDATA))}else{let l=n.children(t);if(0==l.length)for(const t of o.aliases)if(l=n.children(t),l.length>0)break;if(l.length>0){const n=i?l.length:1,u=this.makeList(),d=r.prototype instanceof Jt?S.create(r):null;for(let e=0;e<n;e++){const i=l[e];let n;if(s){const t=i.text();Ut(t)&&(n=this.parseText(t,r,o.isCDATA))}else{const e=d?d.chose(i):r;if(te.is(e)){const t=S.create(e);t._parent=a,t.node=i,n=t}else Gt.info(`Unknown type of node ${t}`,r)}n&&u.add(n)}u.isNotEmpty()&&(e.value=i?u:u.first())}}break}case Yt.Type.choice:{const o=Yt.ChoiceNode.wrap(n),s=new Map;for(let[t,e]of te.allField(r.prototype)){for(let t of e.aliases)s.set(t,e);s.set(t,e)}const a=this.makeList();let l=o.nextChild();for(;l;){if(s.get(l.name())){const e=S.create(r);if(te.is(e)?(e._choice=!0,e._parent=this,e.node=l,a.add(e)):Gt.info(`Choice ${t} type must be model`),!i)break}l=o.nextChild()}a.isNotEmpty()&&(e.value=i?a:a.first());break}}}s(e.value)?e.value=o.default:(e.exist=!0,o.isID&&this.setUnitID(e.value)),e.parsed=!0}doSet(t,e,i){const n=this.getData(t),o=null!=i?i:n.value;o!==e&&(n.value=e,te.is(e)?e._parent=this:zt(e)&&(r(e.changeParent)?e.changeParent.call(e,this):Gt.info("Value is List, but not model list, use XmlModel.makeList !")),n.modified=!0,Kt.notifyObservers(this,n.name,!1,{oldValue:o}))}related(t){const e=this;return this.willClose(new class extends T{constructor(){super(),this.loaded=!1,this.relatives=new Array}parent(){return e}with(t){this.name=t}has(t){return qt(this,void 0,void 0,(function*(){return this.all().then((e=>e.includes(t)))}))}all(){return qt(this,void 0,void 0,(function*(){if(this.loaded)return this.relatives;this.loaded=!0;const i=e.getInfo(this.name).relative;if(!i)throw new Q(Ht.FeildError.code,"Need relative").set("name",this.name);let n=e.doGet(this.name);(null==t?void 0:t.locs)&&(n=yield Promise.resolve(t.locs));const o=new Array;Array.isArray(n)||zt(n)?o.push(...n):n&&o.push(n);for(const n of o)try{const o=yield e.load(n,i,null==t?void 0:t.afterLoad);this.relatives.push(o)}catch(t){Gt.warn(t)}return this.relatives}))}get(){return qt(this,void 0,void 0,(function*(){return this.all().then((t=>t[0]))}))}set(i,n,o){var r,s,a;return qt(this,void 0,void 0,(function*(){let o="";if(d(n)){const t=Reflect.getOwnMetadata(Xt,Object.getPrototypeOf(i)),e=null==t?void 0:t.path;if(!e)throw new Q(Ht.RootError.code).set("name",t.name);o=e}else o=null!=n?n:"";if(yield this.has(i));else{const e=null!==(s=null===(r=null==t?void 0:t.index)||void 0===r?void 0:r.call(this))&&void 0!==s?s:this.relatives.length,n=o;o=o.replace("{index}",e+"");const a=/{(\w+)}/g;let l;for(;null!==(l=a.exec(o));){const t=l[1];Gt.warn(`Not replaced var ${t} at ${n}`)}this.relatives.push(i)}const l=e.location(o);if(i._entry=l,i._parent=e,e.getInfo(this.name).multiple){const t=null!==(a=e.doGet(this.name))&&void 0!==a?a:e.makeList();t.add(l),e.doSet(this.name,t)}else e.doSet(this.name,l);return!0}))}doClose(){for(const t of this.relatives)t.close();this.relatives.length=0}})}normalize(t,e){const i=new Array,n=t.replace(/\\+/,Zt).replace(/\/+/,Zt);if(!n.startsWith(Zt)&&e){let t=e.replace(/\\+/,Zt).replace(/\/+/,Zt);t.toLowerCase().endsWith(".xml")&&(t=t.substring(0,t.lastIndexOf(Zt))),i.push(...t.split(Zt).filter((t=>0==t.length||"."!=t)))}i.push(...n.split(Zt).filter((t=>0==t.length||"."!=t)));const o=new Array;for(const t of i)0!=t.length&&(/\.{2,}/.test(t)?o.pop():o.push(t));return Zt+o.join(Zt)}location(t){if(t.charAt(0)==Zt)return this.normalize(t);let e,i=this;for(;i;){const t=i._entry;if(t){e=t;break}i=i.parent}return this.normalize(t,e)}loadEntry(t){return this.package.entry(t)}load(t,e,i){return qt(this,void 0,void 0,(function*(){if(!t)throw new Q(It.EntryNameInvalid.code);try{Gt.debug(`Model[${e.name}, ${t}] read...`);const n=this.location(t),o=yield this.loadEntry(n),s=yield o.asBuffer(),a=$t().read(s,e);return a._parent=this,a._entry=n,r(i)&&i.call(this,a),Gt.debug(`Model[${e.name}, ${t}] read finish`),a}catch(e){throw new Q(It.EntryLoadFailed.code,e).set("name",t)}}))}isNew(){return this.data().isNew}isModified(){return this.data().isModified()}sequence(){var t,e;return null!==(e=null===(t=this.data().node)||void 0===t?void 0:t.index())&&void 0!==e?e:-1}makeList(){return new class extends Rt{constructor(t){super(),this.parent=t}add(t,e){const i=super.add(t,e);return i&&te.is(t)&&(t._parent=this.parent),i}changeParent(t){this.parent=t;for(const t of this)te.is(t)&&(t._parent=this.parent)}}(this)}makeModel(t,e=!0){const i=S.create(t);return te.is(i)&&(i.data().isNew=e,i._parent=this),i}safeSet(t,e){var i;const n=t.split("."),o=(t,e)=>{const i=e.clazz;if(i){let e;if(te.is(i)&&(e=i),e)return t.makeModel(e,!0)}return null};let r=this;for(let t=0;t<n.length-1;t++){const e=n[t],i=/(\w+)(\[(\-?\d+|\w+)\])?/.exec(e);if(null===i)return Gt.info(`Property ${e} is invalid`),null;const s=i[1],a=i[3],l=r.getInfo(s,!1);if(l===ee.NULL)return Gt.info(`Not found property ${e} of model`,r),null;if(l.type===Yt.Type.attr)return Gt.info(`Property ${e} is attribute of model`,r),null;if(!te.is(r))return Gt.info("Target is not XmlModel",r),null;let u=r.val(s);if(l.multiple)if(zt(u)||(r[s]=u=r.makeList()),a&&a.length>0){const t=u;if("i"==a){const i=o(r,l);if(!i)return Gt.info(`Property ${e} type is `,l.clazz),null;t.add(i,0),r=i}else if("a"==a){const i=o(r,l);if(!i)return Gt.info(`Property ${e} type is `,l.clazz),null;t.add(i),r=i}else{const e=Number.parseInt(a),i=t.size();let n=e;if(e<0&&(n=e+i),n>=i)return Gt.info(`Index ${e} out of size ${i}`),null;r=t.get(n)}}else r=u;else{const t=null!=u?u:o(r,l);if(!t)return Gt.info(`Property ${e} type is`,l.clazz),null;r=r[s]=t}}const s=n[n.length-1];if(zt(r))null===(i=r[s])||void 0===i||i.call(r,e);else{if(r.getInfo(s,!1)===ee.NULL)return Gt.info(`Not found property ${s} of model`,r),null;r[s]=e}return r}parentUntil(t){let e=this;for(;e;){if(P(e,t))return e;e=e.parent}}isAncestor(t){let e=t;for(;e;){if(e===this)return!0;e=e.parent}return!1}handleField(t,e){if(t&&t.length>0){const i=this.fields(),n=t=>{const e=this.getData(t);e.value=void 0,e.parsed=!0};if("delete"===e)for(const e of t)i.has(e)&&n(e);else if("retain"===e)for(const e of i.keys())t.includes(e)||n(e)}}clone(){const t=this,e=new this.constructor,i=e;i.data().isNew=!0,i._choice=this._choice,i._entry=this._entry;const n=t=>{if(te.is(t))return t.clone();if(zt(t)){const e=i.makeList();for(const i of t)e.add(n(i));return e}return W.copy(t)};for(const[i,o]of this.fields()){const o=t[i];e[i]=n(o)}return e}toXML(t,e){var i,n,o;const r=Reflect.getOwnMetadata(Xt,Object.getPrototypeOf(this)),a=null!=e?e:r.name,l=!0===(null==t?void 0:t.saved);if(s(a))return"";const u=null!==(i=null==t?void 0:t.namespace)&&void 0!==i?i:"ofd",d=null!==(n=null==t?void 0:t.xmlns)&&void 0!==n?n:'xmlns:ofd="http://www.ofdspec.org/2016"',c=t=>u&&u.length>0?u+":"+t:t,p=(t,e)=>{if(t.relative){const t=this.location(".");e.startsWith(t)&&(e=e.substring(t.length)).startsWith(Zt)&&(e=e.substring(1))}return e},g=(e,i,n)=>{if(te.is(n))return n._choice=e.type==Yt.Type.choice,n.toXML(t,i);if(!s(n)){const t=e.clazz;try{const o=Vt(t);let r=p(e,o.persist(n));if(r=e.isCDATA&&e.type!=Yt.Type.attr?`<![CDATA[${r}]]>`:h(r),e.isTextContent)return r;{const t=c(i);return`<${t}>${r}</${t}>`}}catch(e){Gt.warn(`${i} persist failed`,n,t)}}return""};let f="",y="",m="";s(e)&&d&&d.length>0&&(f+='<?xml version="1.0" encoding="UTF-8"?>',y+=` ${d}`);for(const[t,e]of this.fields()){const t=e.name,i=null!==(o=this.val(t))&&void 0!==o?o:e.default;if(l){this.getData(t).modified=!1}if(e.type==Yt.Type.attr){if(!e.required&&(s(i)||e.equals(i,e.default)))continue;const n=e.clazz;if(te.is(n))Gt.warn(`Why attr ${t} is type ${n} ?`);else{const o=Vt(n);y+=` ${t}="${h(p(e,o.persist(i)))}"`}}else if(!s(i))if(e.multiple)if(zt(i))for(const n of i)m+=g(e,t,n);else Gt.warn("Multiple node is not list ?");else m+=g(e,t,i)}if(this.isChoice)f+=m;else{const t=c(a);f+=`<${t}${y}>${m}</${t}>`}return l&&(this.data().isNew=!1),f}saveTo(t){var e;return qt(this,void 0,void 0,(function*(){const i=Reflect.getMetadata(Xt,Object.getPrototypeOf(this)),n=new Set,o=new Set;if(i.isRoot()){const e=this._entry;e?this.isModified()?yield t.put(e,this.toXML({saved:!0})):o.add(e):Gt.warn("Root entry path invalid",this)}for(let[t,r]of i.fields){const t=r.name,i=null!==(e=this.val(t))&&void 0!==e?e:r.default;if(!s(i))if(r.relative){const e=this.getData(t).related;if(e){const t=yield e.all();for(let e of t)te.is(e)&&n.add(e)}else if(zt(i))for(let t of i)Ut(t)&&o.add(t);else Ut(i)?o.add(i):Gt.warn("Relate loc type unsupported ?",i)}else if(zt(i))for(let t of i)te.is(t)&&n.add(t);else te.is(i)&&n.add(i)}for(const e of n)yield e.saveTo(t);if(yield this.package.equals(t));else for(const e of o){const i=this.location(e);if(!(yield t.has(i)))try{const e=yield this.loadEntry(i),n=yield e.asBuffer();yield t.put(i,n)}catch(t){Gt.warn("Copy entry failed",t)}}return!0}))}}class ee{constructor(t,e,i,n){var r,s,a,l,u,d,c;this.name=t,this.type=e,this.clazz=i,this.required=null!==(r=null==n?void 0:n.required)&&void 0!==r&&r,this.multiple=null!==(s=null==n?void 0:n.multiple)&&void 0!==s&&s,this.isID=null!==(a=null==n?void 0:n.ID)&&void 0!==a&&a,this.isTextContent=null!==(l=null==n?void 0:n.TextContent)&&void 0!==l&&l,this.isCDATA=null!==(u=null==n?void 0:n.CDATA)&&void 0!==u&&u,this.relative=null==n?void 0:n.relative,this.equals=null!==(d=null==n?void 0:n.equals)&&void 0!==d?d:o,this._default=null==n?void 0:n.default,this.aliases=null!==(c=null==n?void 0:n.aliases)&&void 0!==c?c:[]}get default(){return this._default}}ee.NULL=new ee("",Yt.Type.attr,ee);class ie{constructor(){this.fields=new Map}find(t){return this.fields.get(t)}isRoot(){return!d(this.name)}mixin(t){if(t&&t.fields)for(let[e,i]of t.fields)this.fields.set(e,i);return this}}class ne extends T{constructor(t,e){super(),this.parsed=!1,this.exist=!1,this.modified=!1,this.master=t,this.name=e}doClose(){var t;Wt(this._value),null===(t=this.related)||void 0===t||t.close()}get value(){return this._value}set value(t){this._value!==t&&(zt(this._value)&&this._value.deleteListeners(),this._value=t,zt(this._value)&&this._value.addListener(((t,e,i)=>{this.modified=!0,Kt.notifyObservers(this.master,this.name,!1,{event:t,item:e,index:i})})))}}class oe extends T{constructor(t){super(),this.isNew=t,this.fields=new Map}doClose(){for(let[t,e]of this.fields)e.close();this.fields.clear(),delete this.node}find(t){return this.fields.get(t)}isModified(){for(let[t,e]of this.fields)if(e.modified)return!0;for(let[t,e]of this.fields){const t=e.value;if(te.is(t)){if(t.isModified())return!0}else if(zt(t))for(let e of t)if(te.is(e)&&e.isModified())return!0}return!1}}var re;!function(t){t.AtClass=function(t,e){return i=>{const n=i.prototype;Reflect.hasOwnMetadata(Xt,n)||Reflect.defineMetadata(Xt,new ie,n);const o=Reflect.getOwnMetadata(Xt,n);Array.isArray(t)?(o.name=t[0],t.length>1&&(o.aliases=t.slice(1))):o.name=t,o.path=e}},t.propertyName=e=>"$"===e.charAt(0)?t.propertyName(e.substring(1)):e,t.AtField=function(e,i,n){return(o,r)=>{Reflect.hasOwnMetadata(Xt,o)||Reflect.defineMetadata(Xt,new ie,o);const s=Reflect.getOwnMetadata(Xt,o),a=r.toString(),l=t.propertyName(a),u={TextContent:!1};if(a.startsWith("$$")){if(e!==Yt.Type.node)throw new Q(Ht.FeildError.code).set("name",r).set("msg","TextContent type must is node");u.TextContent=!0}const d=new ee(l,e,i,Object.assign({},n,u));if(s.fields.has(l))throw new Q(Ht.FeildError.code).set("name",r).set("msg",`Property ${a} already defined with ${l}`);s.fields.set(l,d)}},t.Getter=function(e=!0){return(i,n)=>{const o=Reflect.getOwnMetadata(Xt,i);if(s(o))throw new Q(Ht.FeildError.code).set("name",n).set("msg","Getter must before AtField");const r=n.toString(),a=t.propertyName(r);if(s(o.find(a)))throw new Q(Ht.FeildError.code).set("name",n).set("msg","Getter must before AtField");const l=Object.getOwnPropertyDescriptor(i,a);l&&l.get&&!e||Object.defineProperty(i,a,{get:function(){return this.doGet(a)},enumerable:!0,configurable:!0})}},t.Setter=function(e=!0){return(i,n)=>{const o=Reflect.getOwnMetadata(Xt,i);if(s(o))throw new Q(Ht.FeildError.code).set("name",n).set("msg","Setter must before AtField");const r=n.toString(),a=t.propertyName(r),l=o.find(a);if(s(l))throw new Q(Ht.FeildError.code).set("name",n).set("msg","Setter must before AtField");const u=Object.getOwnPropertyDescriptor(i,a);u&&u.set&&!e||Object.defineProperty(i,a,{set:function(t){var e;const i=null===(e=null==u?void 0:u.get)||void 0===e?void 0:e.call(this);l.equals(i,t)||this.doSet(a,t,i)},enumerable:!0,configurable:!0})}},t.Relative=function(e){return(i,n,o)=>{const r=o.value,s=t.propertyName(e);o.value=function(){const t=this,e=t.getData(s);if(!e.related){const i=r.call(t);i.with(s),e.related=i}return e.related},o.writable=!1,o.enumerable=!1}},t.mixin=function(t,e){const i=t.prototype;Reflect.hasOwnMetadata(Xt,i)||Reflect.defineMetadata(Xt,new ie,i);const n=Reflect.getOwnMetadata(Xt,i);for(const t of e)n.mixin(Reflect.getOwnMetadata(Xt,t.prototype))}}(re||(re={}));const se=(t,e)=>{((t,e)=>{e.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((i=>{"constructor"!=i&&Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)||Object.create(null))}))}))})(t,e),re.mixin(t,e)},ae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function le(t,e,i,n,o){let r,s,a,l,u,d,c,h,p,g,f,y,m;for(;o>=64;){for(r=e[0],s=e[1],a=e[2],l=e[3],u=e[4],d=e[5],c=e[6],h=e[7],g=0;g<16;g++)f=n+4*g,t[g]=(255&i[f])<<24|(255&i[f+1])<<16|(255&i[f+2])<<8|255&i[f+3];for(g=16;g<64;g++)p=t[g-2],y=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=t[g-15],m=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,t[g]=(y+t[g-7]|0)+(m+t[g-16]|0);for(g=0;g<64;g++)y=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&c)|0)+(h+(ae[g]+t[g]|0)|0)|0,m=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&s^r&a^s&a)|0,h=c,c=d,d=u,u=l+y|0,l=a,a=s,s=r,r=y+m|0;e[0]+=r,e[1]+=s,e[2]+=a,e[3]+=l,e[4]+=u,e[5]+=d,e[6]+=c,e[7]+=h,n+=64,o-=64}return n}class ue{constructor(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let t=0;t<this.buffer.length;t++)this.buffer[t]=0;for(let t=0;t<this.temp.length;t++)this.temp[t]=0;this.reset()}update(t,e=t.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let i=0;if(this.bytesHashed+=e,this.bufferLength>0){for(;this.bufferLength<64&&e>0;)this.buffer[this.bufferLength++]=t[i++],e--;64===this.bufferLength&&(le(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(e>=64&&(i=le(this.temp,this.state,t,i,e),e%=64);e>0;)this.buffer[this.bufferLength++]=t[i++],e--;return this}finish(t){if(!this.finished){const t=this.bytesHashed,e=this.bufferLength,i=t/536870912|0,n=t<<3,o=t%64<56?64:128;this.buffer[e]=128;for(let t=e+1;t<o-8;t++)this.buffer[t]=0;this.buffer[o-8]=i>>>24&255,this.buffer[o-7]=i>>>16&255,this.buffer[o-6]=i>>>8&255,this.buffer[o-5]=i>>>0&255,this.buffer[o-4]=n>>>24&255,this.buffer[o-3]=n>>>16&255,this.buffer[o-2]=n>>>8&255,this.buffer[o-1]=n>>>0&255,le(this.temp,this.state,this.buffer,0,o),this.finished=!0}for(let e=0;e<8;e++)t[4*e+0]=this.state[e]>>>24&255,t[4*e+1]=this.state[e]>>>16&255,t[4*e+2]=this.state[e]>>>8&255,t[4*e+3]=this.state[e]>>>0&255;return this}digest(){const t=new Uint8Array(this.digestLength);return this.finish(t),t}_saveState(t){for(let e=0;e<this.state.length;e++)t[e]=this.state[e]}_restoreState(t,e){for(let e=0;e<this.state.length;e++)this.state[e]=t[e];this.bytesHashed=e,this.finished=!1,this.bufferLength=0}}class de{constructor(){this.name="sha256",this.raw=new ue}init(t){return this.raw.reset(),!0}update(t){return this.raw.update(t,t.length),!0}final(t){return t&&t.length>0&&this.raw.update(t,t.length),Ct.from(this.raw.digest())}}function ce(t,e,i=1024){if(e&&e.length>0&&t.init()){for(let n=0,o=e.length;n<o;n+=i)if(!t.update(e.subarray(n,n+i)))return null;const n=t.final();if(n.length>0)return n}return null}var he,pe=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};!function(t){t.FetchFailed=Q.register(new Y(H.IO+501,"Fetch file failed from %url%",!0))}(he||(he={}));const ge=Yt.Type.node,fe=Yt.Type.attr,ye=Yt.Type.choice,me=re.AtClass,ve=re.Getter,$e=re.Setter,be=re.AtField,we=re.Relative,xe=kt,Ce=At,De=Lt,Oe=Et,Pe=Nt,Se=_t;class Ie{constructor(t){this._current=null!=t?t:0}newStart(){return this._current*=2,this}current(){return this._current}next(t=1){return this._current+=t,this.current()}cas(t){return void 0!==t&&1===Ie.compare(this._current,t)&&(this._current=t),this.current()}static max(t,e){return-1==Ie.compare(t,e)?e:t}static compare(t,e){return t==e?0:void 0===t?-1:void 0===e?1:t<e?-1:1}}var Te;!function(t){t.get=function(t,e,i){return pe(this,void 0,void 0,(function*(){let n=yield t.get();if(s(n)){const o=t.parent().makeModel(e,!0);yield t.set(o,i),n=o}return n}))}}(Te||(Te={}));const Re=t=>pe(void 0,void 0,void 0,(function*(){const e=yield Promise.resolve(t);let i;return i=e instanceof Blob?yield e.arrayBuffer():e instanceof Uint8Array?e.buffer:e,i})),je=t=>{const e=ce(new de,Ct.from(t));return e?e.toString("hex"):""};var Ae=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Fe=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class Me extends te{constructor(){super()}set PhysicalBox(t){this.$PhysicalBox=t}get PhysicalBox(){return this.$PhysicalBox}set ApplicationBox(t){this.$ApplicationBox=t}get ApplicationBox(){return this.$ApplicationBox}set ContentBox(t){this.$ContentBox=t}get ContentBox(){return this.$ContentBox}set BleedBox(t){this.$BleedBox=t}get BleedBox(){return this.$BleedBox}set CropBox(t){this.$CropBox=t}get CropBox(){return this.$CropBox}set Rotate(t){this.$Rotate=t}get Rotate(){return this.$Rotate}}Ae([$e(),ve(),be(ge,Oe,{required:!0}),Fe("design:type",Object)],Me.prototype,"$PhysicalBox",void 0),Ae([$e(),ve(),be(ge,Oe),Fe("design:type",Object)],Me.prototype,"$ApplicationBox",void 0),Ae([$e(),ve(),be(ge,Oe),Fe("design:type",Object)],Me.prototype,"$ContentBox",void 0),Ae([$e(),ve(),be(ge,Oe),Fe("design:type",Object)],Me.prototype,"$BleedBox",void 0),Ae([$e(),ve(),be(ge,Oe),Fe("design:type",Object)],Me.prototype,"$CropBox",void 0),Ae([$e(),ve(),be(ge,xe),Fe("design:type",Object)],Me.prototype,"$Rotate",void 0);class Be extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set PageID(t){this.$PageID=t}get PageID(){return this.$PageID}set Left(t){this.$Left=t}get Left(){return this.$Left}set Top(t){this.$Top=t}get Top(){return this.$Top}set Right(t){this.$Right=t}get Right(){return this.$Right}set Bottom(t){this.$Bottom=t}get Bottom(){return this.$Bottom}set Zoom(t){this.$Zoom=t}get Zoom(){return this.$Zoom}}Ae([$e(),ve(),be(fe,Ce,{required:!0}),Fe("design:type",String)],Be.prototype,"$Type",void 0),Ae([$e(),ve(),be(fe,xe,{required:!0}),Fe("design:type",Object)],Be.prototype,"$PageID",void 0),Ae([$e(),ve(),be(fe,xe),Fe("design:type",Object)],Be.prototype,"$Left",void 0),Ae([$e(),ve(),be(fe,xe),Fe("design:type",Object)],Be.prototype,"$Top",void 0),Ae([$e(),ve(),be(fe,xe),Fe("design:type",Object)],Be.prototype,"$Right",void 0),Ae([$e(),ve(),be(fe,xe),Fe("design:type",Object)],Be.prototype,"$Bottom",void 0),Ae([$e(),ve(),be(fe,xe),Fe("design:type",Object)],Be.prototype,"$Zoom",void 0);class ke extends te{constructor(){super()}set Point1(t){this.$Point1=t}get Point1(){return this.$Point1}}Ae([$e(),ve(),be(fe,Oe,{required:!0}),Fe("design:type",Object)],ke.prototype,"$Point1",void 0);class Le extends te{constructor(){super()}set Point1(t){this.$Point1=t}get Point1(){return this.$Point1}}Ae([$e(),ve(),be(fe,Oe,{required:!0}),Fe("design:type",Object)],Le.prototype,"$Point1",void 0);class Ne extends te{constructor(){super()}set Point1(t){this.$Point1=t}get Point1(){return this.$Point1}set Point2(t){this.$Point2=t}get Point2(){return this.$Point2}}Ae([$e(),ve(),be(fe,Oe,{required:!0}),Fe("design:type",Object)],Ne.prototype,"$Point1",void 0),Ae([$e(),ve(),be(fe,Oe,{required:!0}),Fe("design:type",Object)],Ne.prototype,"$Point2",void 0);class Ee extends te{constructor(){super()}set Point1(t){this.$Point1=t}get Point1(){return this.$Point1}set Point2(t){this.$Point2=t}get Point2(){return this.$Point2}set Point3(t){this.$Point3=t}get Point3(){return this.$Point3}}Ae([$e(),ve(),be(fe,Oe),Fe("design:type",Object)],Ee.prototype,"$Point1",void 0),Ae([$e(),ve(),be(fe,Oe),Fe("design:type",Object)],Ee.prototype,"$Point2",void 0),Ae([$e(),ve(),be(fe,Oe,{required:!0}),Fe("design:type",Object)],Ee.prototype,"$Point3",void 0);class _e extends te{constructor(){super()}set SweepDirection(t){this.$SweepDirection=t}get SweepDirection(){return this.$SweepDirection}set LargeArc(t){this.$LargeArc=t}get LargeArc(){return this.$LargeArc}set RotationAngle(t){this.$RotationAngle=t}get RotationAngle(){return this.$RotationAngle}set EllipseSize(t){this.$EllipseSize=t}get EllipseSize(){return this.$EllipseSize}set EndPoint(t){this.$EndPoint=t}get EndPoint(){return this.$EndPoint}}Ae([$e(),ve(),be(fe,De,{required:!0}),Fe("design:type",Object)],_e.prototype,"$SweepDirection",void 0),Ae([$e(),ve(),be(fe,De,{required:!0}),Fe("design:type",Object)],_e.prototype,"$LargeArc",void 0),Ae([$e(),ve(),be(fe,xe,{required:!0}),Fe("design:type",Object)],_e.prototype,"$RotationAngle",void 0),Ae([$e(),ve(),be(fe,Oe,{required:!0}),Fe("design:type",Object)],_e.prototype,"$EllipseSize",void 0),Ae([$e(),ve(),be(fe,Oe,{required:!0}),Fe("design:type",Object)],_e.prototype,"$EndPoint",void 0);class Ve extends te{constructor(){super()}}class qe extends te{constructor(){super()}set Move(t){this.$Move=t}get Move(){return this.$Move}set Line(t){this.$Line=t}get Line(){return this.$Line}set QuadraticBezier(t){this.$QuadraticBezier=t}get QuadraticBezier(){return this.$QuadraticBezier}set CubicBezier(t){this.$CubicBezier=t}get CubicBezier(){return this.$CubicBezier}set Arc(t){this.$Arc=t}get Arc(){return this.$Arc}set Close(t){this.$Close=t}get Close(){return this.$Close}}Ae([$e(),ve(),be(ge,ke),Fe("design:type",ke)],qe.prototype,"$Move",void 0),Ae([$e(),ve(),be(ge,Le),Fe("design:type",Le)],qe.prototype,"$Line",void 0),Ae([$e(),ve(),be(ge,Ne),Fe("design:type",Ne)],qe.prototype,"$QuadraticBezier",void 0),Ae([$e(),ve(),be(ge,Ee),Fe("design:type",Ee)],qe.prototype,"$CubicBezier",void 0),Ae([$e(),ve(),be(ge,_e),Fe("design:type",_e)],qe.prototype,"$Arc",void 0),Ae([$e(),ve(),be(ge,Ve),Fe("design:type",Ve)],qe.prototype,"$Close",void 0);class Ge extends te{constructor(){super()}set Start(t){this.$Start=t}get Start(){return this.$Start}set Choice(t){this.$Choice=t}get Choice(){return this.$Choice}}Ae([$e(),ve(),be(fe,Oe,{required:!0}),Fe("design:type",Object)],Ge.prototype,"$Start",void 0),Ae([$e(),ve(),be(ye,qe,{required:!0,multiple:!0}),Fe("design:type",Object)],Ge.prototype,"$Choice",void 0);class ze extends te{constructor(){super()}set Area(t){this.$Area=t}get Area(){return this.$Area}}Ae([$e(),ve(),be(ge,Ge,{required:!0,multiple:!0}),Fe("design:type",Object)],ze.prototype,"$Area",void 0);class Ue extends te{constructor(){super()}set Name(t){this.$Name=t}get Name(){return this.$Name}}Ae([$e(),ve(),be(fe,Ce,{required:!0}),Fe("design:type",Object)],Ue.prototype,"$Name",void 0);class We extends te{constructor(){super()}set Dest(t){this.$Dest=t}get Dest(){return this.$Dest}set Bookmark(t){this.$Bookmark=t}get Bookmark(){return this.$Bookmark}}Ae([$e(),ve(),be(ge,Be),Fe("design:type",Be)],We.prototype,"$Dest",void 0),Ae([$e(),ve(),be(ge,Ue),Fe("design:type",Ue)],We.prototype,"$Bookmark",void 0);class He extends te{constructor(){super()}set Choice(t){this.$Choice=t}get Choice(){return this.$Choice}}Ae([$e(),ve(),be(ye,We,{required:!0,multiple:!0}),Fe("design:type",Object)],He.prototype,"$Choice",void 0);class Ye extends te{constructor(){super()}set URI(t){this.$URI=t}get URI(){return this.$URI}set Base(t){this.$Base=t}get Base(){return this.$Base}}Ae([$e(),ve(),be(fe,Ce,{required:!0}),Fe("design:type",Object)],Ye.prototype,"$URI",void 0),Ae([$e(),ve(),be(fe,Ce),Fe("design:type",Object)],Ye.prototype,"$Base",void 0);class Xe extends te{constructor(){super()}set AttachID(t){this.$AttachID=t}get AttachID(){return this.$AttachID}set NewWindow(t){this.$NewWindow=t}get NewWindow(){return this.$NewWindow}}Ae([$e(),ve(),be(fe,xe,{required:!0}),Fe("design:type",Object)],Xe.prototype,"$AttachID",void 0),Ae([$e(),ve(),be(fe,De,{default:!0}),Fe("design:type",Object)],Xe.prototype,"$NewWindow",void 0);class Ze extends te{constructor(){super()}set ResourceID(t){this.$ResourceID=t}get ResourceID(){return this.$ResourceID}set Volume(t){this.$Volume=t}get Volume(){return this.$Volume}set Repeat(t){this.$Repeat=t}get Repeat(){return this.$Repeat}set Synchronous(t){this.$Synchronous=t}get Synchronous(){return this.$Synchronous}}Ae([$e(),ve(),be(fe,xe,{required:!0}),Fe("design:type",Object)],Ze.prototype,"$ResourceID",void 0),Ae([$e(),ve(),be(fe,xe),Fe("design:type",Object)],Ze.prototype,"$Volume",void 0),Ae([$e(),ve(),be(fe,De),Fe("design:type",Object)],Ze.prototype,"$Repeat",void 0),Ae([$e(),ve(),be(fe,De),Fe("design:type",Object)],Ze.prototype,"$Synchronous",void 0);class Ke extends te{constructor(){super()}set ResourceID(t){this.$ResourceID=t}get ResourceID(){return this.$ResourceID}set Operator(t){this.$Operator=t}get Operator(){return this.$Operator}}Ae([$e(),ve(),be(fe,xe,{required:!0}),Fe("design:type",Object)],Ke.prototype,"$ResourceID",void 0),Ae([$e(),ve(),be(fe,Ce,{default:"Play"}),Fe("design:type",String)],Ke.prototype,"$Operator",void 0);class Qe extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}Ae([$e(),ve(),be(fe,Ce),Fe("design:type",Object)],Qe.prototype,"$Type",void 0),Ae([$e(),ve(),be(ge,Ce,{CDATA:!0}),Fe("design:type",Object)],Qe.prototype,"$$Value",void 0);class Je extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set ResourceID(t){this.$ResourceID=t}get ResourceID(){return this.$ResourceID}set FormFieldID(t){this.$FormFieldID=t}get FormFieldID(){return this.$FormFieldID}}Ae([$e(),ve(),be(fe,xe,{required:!0}),Fe("design:type",Object)],Je.prototype,"$ResourceID",void 0),Ae([$e(),ve(),be(fe,xe,{required:!0}),Fe("design:type",Object)],Je.prototype,"$FormFieldID",void 0),Ae([$e(),ve(),be(fe,Ce),Fe("design:type",Object)],Je.prototype,"$Type",void 0);class ti extends te{}class ei extends te{}class ii extends te{set Goto(t){this.$Goto=t}get Goto(){return this.$Goto}set URI(t){this.$URI=t}get URI(){return this.$URI}set GotoA(t){this.$GotoA=t}get GotoA(){return this.$GotoA}set Sound(t){this.$Sound=t}get Sound(){return this.$Sound}set Movie(t){this.$Movie=t}get Movie(){return this.$Movie}set Script(t){this.$Script=t}get Script(){return this.$Script}set GoTo3DView(t){this.$GoTo3DView=t}get GoTo3DView(){return this.$GoTo3DView}set ResetForm(t){this.$ResetForm=t}get ResetForm(){return this.$ResetForm}set SubmitForm(t){this.$SubmitForm=t}get SubmitForm(){return this.$SubmitForm}}Ae([$e(),ve(),be(ge,He),Fe("design:type",He)],ii.prototype,"$Goto",void 0),Ae([$e(),ve(),be(ge,Ye),Fe("design:type",Ye)],ii.prototype,"$URI",void 0),Ae([$e(),ve(),be(ge,Xe),Fe("design:type",Xe)],ii.prototype,"$GotoA",void 0),Ae([$e(),ve(),be(ge,Ze),Fe("design:type",Ze)],ii.prototype,"$Sound",void 0),Ae([$e(),ve(),be(ge,Ke),Fe("design:type",Ke)],ii.prototype,"$Movie",void 0),Ae([$e(),ve(),be(ge,Qe),Fe("design:type",Qe)],ii.prototype,"$Script",void 0),Ae([$e(),ve(),be(ge,Je),Fe("design:type",Je)],ii.prototype,"$GoTo3DView",void 0),Ae([$e(),ve(),be(ge,ti),Fe("design:type",ti)],ii.prototype,"$ResetForm",void 0),Ae([$e(),ve(),be(ge,ei),Fe("design:type",ei)],ii.prototype,"$SubmitForm",void 0);class ni extends te{constructor(){super()}set Event(t){this.$Event=t}get Event(){return this.$Event}set Region(t){this.$Region=t}get Region(){return this.$Region}set Choice(t){this.$Choice=t}get Choice(){return this.$Choice}}Ae([$e(),ve(),be(fe,Ce,{required:!0}),Fe("design:type",String)],ni.prototype,"$Event",void 0),Ae([$e(),ve(),be(ge,ze),Fe("design:type",ze)],ni.prototype,"$Region",void 0),Ae([$e(),ve(),be(ye,ii,{required:!0}),Fe("design:type",ii)],ni.prototype,"$Choice",void 0);class oi extends te{constructor(){super()}set Action(t){this.$Action=t}get Action(){return this.$Action}newAction(){const t=this.makeModel(ni,!0);return this.Action||(this.Action=this.makeList()),this.Action.add(t),t}}Ae([$e(),ve(),be(ge,ni,{multiple:!0}),Fe("design:type",Object)],oi.prototype,"$Action",void 0);var ri=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},si=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class ai extends te{constructor(t=!1){super({isNew:t})}}class li extends te{constructor(){super()}}class ui extends te{constructor(){super()}set Thumbnail(t){this.$Thumbnail=t}get Thumbnail(){return this.$Thumbnail}set GraphUnits(t){this.$GraphUnits=t}get GraphUnits(){return this.$GraphUnits}}ri([$e(),ve(),be(fe,xe),si("design:type",Object)],ui.prototype,"$Thumbnail",void 0),ri([$e(),ve(),be(ye,li,{multiple:!0}),si("design:type",Object)],ui.prototype,"$GraphUnits",void 0);class di extends te{constructor(){super()}set Width(t){this.$Width=t}get Width(){return this.$Width}set Height(t){this.$Height=t}get Height(){return this.$Height}set XStep(t){this.$XStep=t}get XStep(){return this.$XStep}set YStep(t){this.$YStep=t}get YStep(){return this.$YStep}set ReflectMethod(t){this.$ReflectMethod=t}get ReflectMethod(){return this.$ReflectMethod}set RelativeTo(t){this.$RelativeTo=t}get RelativeTo(){return this.$RelativeTo}set CTM(t){this.$CTM=t}get CTM(){return this.$CTM}set CellContent(t){this.$CellContent=t}get CellContent(){return this.$CellContent}}ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],di.prototype,"$Width",void 0),ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],di.prototype,"$Height",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],di.prototype,"$XStep",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],di.prototype,"$YStep",void 0),ri([$e(),ve(),be(fe,Ce),si("design:type",String)],di.prototype,"$ReflectMethod",void 0),ri([$e(),ve(),be(fe,Ce),si("design:type",String)],di.prototype,"$RelativeTo",void 0),ri([$e(),ve(),be(fe,Oe),si("design:type",Object)],di.prototype,"$CTM",void 0),ri([$e(),ve(),be(ge,ui,{required:!0}),si("design:type",ui)],di.prototype,"$CellContent",void 0);class ci extends te{constructor(){super()}set Position(t){this.$Position=t}get Position(){return this.$Position}set Color(t){this.$Color=t}get Color(){return this.$Color}}ri([$e(),ve(),be(fe,xe),si("design:type",Object)],ci.prototype,"$Position",void 0),ri([$e(),ve(),be(ge,ai,{required:!0}),si("design:type",ai)],ci.prototype,"$Color",void 0);class hi extends te{constructor(){super()}set MapType(t){this.$MapType=t}get MapType(){return this.$MapType}set MapUnit(t){this.$MapUnit=t}get MapUnit(){return this.$MapUnit}set Extend(t){this.$Extend=t}get Extend(){return this.$Extend}set StartPoint(t){this.$StartPoint=t}get StartPoint(){return this.$StartPoint}set EndPoint(t){this.$EndPoint=t}get EndPoint(){return this.$EndPoint}set Segment(t){this.$Segment=t}get Segment(){return this.$Segment}}ri([$e(),ve(),be(fe,Ce,{default:"Direct"}),si("design:type",String)],hi.prototype,"$MapType",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],hi.prototype,"$MapUnit",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],hi.prototype,"$Extend",void 0),ri([$e(),ve(),be(fe,Oe,{required:!0}),si("design:type",Object)],hi.prototype,"$StartPoint",void 0),ri([$e(),ve(),be(fe,Oe,{required:!0}),si("design:type",Object)],hi.prototype,"$EndPoint",void 0),ri([$e(),ve(),be(ge,ci,{required:!0,multiple:!0}),si("design:type",Object)],hi.prototype,"$Segment",void 0);class pi extends te{constructor(){super()}set MapType(t){this.$MapType=t}get MapType(){return this.$MapType}set MapUnit(t){this.$MapUnit=t}get MapUnit(){return this.$MapUnit}set Eccentricity(t){this.$Eccentricity=t}get Eccentricity(){return this.$Eccentricity}set Angle(t){this.$Angle=t}get Angle(){return this.$Angle}set StartPoint(t){this.$StartPoint=t}get StartPoint(){return this.$StartPoint}set StartRadius(t){this.$StartRadius=t}get StartRadius(){return this.$StartRadius}set EndPoint(t){this.$EndPoint=t}get EndPoint(){return this.$EndPoint}set EndRadius(t){this.$EndRadius=t}get EndRadius(){return this.$EndRadius}set Extend(t){this.$Extend=t}get Extend(){return this.$Extend}set Segment(t){this.$Segment=t}get Segment(){return this.$Segment}}ri([$e(),ve(),be(fe,Ce,{default:"Direct"}),si("design:type",String)],pi.prototype,"$MapType",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],pi.prototype,"$MapUnit",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],pi.prototype,"$Eccentricity",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],pi.prototype,"$Angle",void 0),ri([$e(),ve(),be(fe,Oe,{required:!0}),si("design:type",Object)],pi.prototype,"$StartPoint",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],pi.prototype,"$StartRadius",void 0),ri([$e(),ve(),be(fe,Oe,{required:!0}),si("design:type",Object)],pi.prototype,"$EndPoint",void 0),ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],pi.prototype,"$EndRadius",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],pi.prototype,"$Extend",void 0),ri([$e(),ve(),be(ge,ci,{required:!0,multiple:!0}),si("design:type",Object)],pi.prototype,"$Segment",void 0);class gi extends te{constructor(){super()}set X(t){this.$X=t}get X(){return this.$X}set Y(t){this.$Y=t}get Y(){return this.$Y}set EdgeFlag(t){this.$EdgeFlag=t}get EdgeFlag(){return this.$EdgeFlag}set Color(t){this.$Color=t}get Color(){return this.$Color}}ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],gi.prototype,"$X",void 0),ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],gi.prototype,"$Y",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],gi.prototype,"$EdgeFlag",void 0),ri([$e(),ve(),be(ge,ai,{required:!0}),si("design:type",ai)],gi.prototype,"$Color",void 0);class fi extends te{constructor(){super()}set Extend(t){this.$Extend=t}get Extend(){return this.$Extend}set Point(t){this.$Point=t}get Point(){return this.$Point}set BackColor(t){this.$BackColor=t}get BackColor(){return this.$BackColor}}ri([$e(),ve(),be(fe,xe),si("design:type",Object)],fi.prototype,"$Extend",void 0),ri([$e(),ve(),be(ge,gi,{required:!0,multiple:!0}),si("design:type",Object)],fi.prototype,"$Point",void 0),ri([$e(),ve(),be(ge,ai),si("design:type",ai)],fi.prototype,"$BackColor",void 0);class yi extends te{constructor(){super()}set VerticesPerRow(t){this.$VerticesPerRow=t}get VerticesPerRow(){return this.$VerticesPerRow}set Extend(t){this.$Extend=t}get Extend(){return this.$Extend}set Point(t){this.$Point=t}get Point(){return this.$Point}set BackColor(t){this.$BackColor=t}get BackColor(){return this.$BackColor}}ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],yi.prototype,"$VerticesPerRow",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],yi.prototype,"$Extend",void 0),ri([$e(),ve(),be(ge,gi,{required:!0,multiple:!0}),si("design:type",Object)],yi.prototype,"$Point",void 0),ri([$e(),ve(),be(ge,ai),si("design:type",ai)],yi.prototype,"$BackColor",void 0);class mi extends te{constructor(){super()}set Pattern(t){this.$Pattern=t}get Pattern(){return this.$Pattern}set AxialShd(t){this.$AxialShd=t}get AxialShd(){return this.$AxialShd}set RadialShd(t){this.$RadialShd=t}get RadialShd(){return this.$RadialShd}set GouraudShd(t){this.$GouraudShd=t}get GouraudShd(){return this.$GouraudShd}set LaGouraudShd(t){this.$LaGouraudShd=t}get LaGouraudShd(){return this.$LaGouraudShd}}ri([$e(),ve(),be(ge,di),si("design:type",di)],mi.prototype,"$Pattern",void 0),ri([$e(),ve(),be(ge,hi),si("design:type",hi)],mi.prototype,"$AxialShd",void 0),ri([$e(),ve(),be(ge,pi),si("design:type",pi)],mi.prototype,"$RadialShd",void 0),ri([$e(),ve(),be(ge,fi),si("design:type",fi)],mi.prototype,"$GouraudShd",void 0),ri([$e(),ve(),be(ge,yi),si("design:type",yi)],mi.prototype,"$LaGouraudShd",void 0);class vi extends te{constructor(t=!1){super({isNew:t})}set Value(t){this.$Value=t}get Value(){return this.$Value}set Index(t){this.$Index=t}get Index(){return this.$Index}set ColorSpace(t){this.$ColorSpace=t}get ColorSpace(){return this.$ColorSpace}set Alpha(t){this.$Alpha=t}get Alpha(){return this.$Alpha}set FillChoice(t){this.$FillChoice=t}get FillChoice(){return this.$FillChoice}values(){return this.Value&&this.Value.length>0?this.Value.map((t=>Bt(t,0))):[]}}ri([$e(),ve(),be(fe,Pe),si("design:type",Object)],vi.prototype,"$Value",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],vi.prototype,"$Index",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],vi.prototype,"$ColorSpace",void 0),ri([$e(),ve(),be(fe,xe,{default:255}),si("design:type",Object)],vi.prototype,"$Alpha",void 0),ri([$e(),ve(),be(ye,mi),si("design:type",mi)],vi.prototype,"$FillChoice",void 0),se(ai,[vi]),function(t){t.fromRGBA=function(e,i,n,o=1){const r=new t(!0);return r.Value=[e,i,n].map((t=>t.toString())),r.Alpha=o>1?o:255*o,r}}(ai||(ai={}));class $i extends te{constructor(){super()}}class bi extends te{constructor(){super()}set DrawParam(t){this.$DrawParam=t}get DrawParam(){return this.$DrawParam}set CTM(t){this.$CTM=t}get CTM(){return this.$CTM}set AreaChoice(t){this.$AreaChoice=t}get AreaChoice(){return this.$AreaChoice}}ri([$e(),ve(),be(fe,xe),si("design:type",Object)],bi.prototype,"$DrawParam",void 0),ri([$e(),ve(),be(fe,Oe),si("design:type",Object)],bi.prototype,"$CTM",void 0),ri([$e(),ve(),be(ye,$i,{required:!0}),si("design:type",$i)],bi.prototype,"$AreaChoice",void 0);class wi extends te{constructor(){super()}set Area(t){this.$Area=t}get Area(){return this.$Area}}ri([$e(),ve(),be(ge,bi,{required:!0,multiple:!0}),si("design:type",Object)],wi.prototype,"$Area",void 0);class xi extends te{constructor(){super()}set TransFlag(t){this.$TransFlag=t}get TransFlag(){return this.$TransFlag}set Clip(t){this.$Clip=t}get Clip(){return this.$Clip}}ri([$e(),ve(),be(fe,De),si("design:type",Object)],xi.prototype,"$TransFlag",void 0),ri([$e(),ve(),be(ge,wi,{required:!0,multiple:!0}),si("design:type",Object)],xi.prototype,"$Clip",void 0);class Ci extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Boundary(t){this.$Boundary=t}get Boundary(){return this.$Boundary}set Name(t){this.$Name=t}get Name(){return this.$Name}set Visible(t){this.$Visible=t}get Visible(){return this.$Visible}set CTM(t){this.$CTM=t}get CTM(){return this.$CTM}set DrawParam(t){this.$DrawParam=t}get DrawParam(){return this.$DrawParam}set LineWidth(t){this.$LineWidth=t}get LineWidth(){return this.$LineWidth}set Cap(t){this.$Cap=t}get Cap(){return this.$Cap}set Join(t){this.$Join=t}get Join(){return this.$Join}set MiterLimit(t){this.$MiterLimit=t}get MiterLimit(){return this.$MiterLimit}set DashOffset(t){this.$DashOffset=t}get DashOffset(){return this.$DashOffset}set DashPattern(t){this.$DashPattern=t}get DashPattern(){return this.$DashPattern}set Alpha(t){this.$Alpha=t}get Alpha(){return this.$Alpha}set Actions(t){this.$Actions=t}get Actions(){return this.$Actions}set Clips(t){this.$Clips=t}get Clips(){return this.$Clips}newAction(){return this.Actions||(this.Actions=this.makeModel(oi,!0)),this.Actions.newAction()}}ri([$e(),ve(),be(fe,xe,{ID:!0}),si("design:type",Object)],Ci.prototype,"$ID",void 0),ri([$e(),ve(),be(fe,Oe),si("design:type",Object)],Ci.prototype,"$Boundary",void 0),ri([$e(),ve(),be(fe,Ce),si("design:type",Object)],Ci.prototype,"$Name",void 0),ri([$e(),ve(),be(fe,De,{default:!0}),si("design:type",Object)],Ci.prototype,"$Visible",void 0),ri([$e(),ve(),be(fe,Oe),si("design:type",Object)],Ci.prototype,"$CTM",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],Ci.prototype,"$DrawParam",void 0),ri([$e(),ve(),be(fe,xe,{default:.353}),si("design:type",Object)],Ci.prototype,"$LineWidth",void 0),ri([$e(),ve(),be(fe,Ce,{default:"Butt"}),si("design:type",String)],Ci.prototype,"$Cap",void 0),ri([$e(),ve(),be(fe,Ce,{default:"Miter"}),si("design:type",String)],Ci.prototype,"$Join",void 0),ri([$e(),ve(),be(fe,xe,{default:4.234}),si("design:type",Object)],Ci.prototype,"$MiterLimit",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],Ci.prototype,"$DashOffset",void 0),ri([$e(),ve(),be(fe,Oe),si("design:type",Object)],Ci.prototype,"$DashPattern",void 0),ri([$e(),ve(),be(fe,xe,{default:255}),si("design:type",Object)],Ci.prototype,"$Alpha",void 0),ri([$e(),ve(),be(ge,oi),si("design:type",oi)],Ci.prototype,"$Actions",void 0),ri([$e(),ve(),be(ge,xi),si("design:type",xi)],Ci.prototype,"$Clips",void 0);const Di=new Set([100,200,300,400,500,600,700,800,900]);class Oi extends te{constructor(){super()}set CodePosition(t){this.$CodePosition=t}get CodePosition(){return this.$CodePosition}set CodeCount(t){this.$CodeCount=t}get CodeCount(){return this.$CodeCount}set GlyphCount(t){this.$GlyphCount=t}get GlyphCount(){return this.$GlyphCount}set Glyphs(t){this.$Glyphs=t}get Glyphs(){return this.$Glyphs}}ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],Oi.prototype,"$CodePosition",void 0),ri([$e(),ve(),be(fe,xe,{default:1}),si("design:type",Object)],Oi.prototype,"$CodeCount",void 0),ri([$e(),ve(),be(fe,xe,{default:1}),si("design:type",Object)],Oi.prototype,"$GlyphCount",void 0),ri([$e(),ve(),be(ge,Oe),si("design:type",Object)],Oi.prototype,"$Glyphs",void 0);class Pi extends te{constructor(){super()}set X(t){this.$X=t}get X(){return this.$X}set Y(t){this.$Y=t}get Y(){return this.$Y}set DeltaX(t){this.$DeltaX=t}get DeltaX(){return this.$DeltaX}set DeltaY(t){this.$DeltaY=t}get DeltaY(){return this.$DeltaY}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}ri([$e(),ve(),be(fe,xe),si("design:type",Object)],Pi.prototype,"$X",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],Pi.prototype,"$Y",void 0),ri([$e(),ve(),be(fe,Pe),si("design:type",Object)],Pi.prototype,"$DeltaX",void 0),ri([$e(),ve(),be(fe,Pe),si("design:type",Object)],Pi.prototype,"$DeltaY",void 0),ri([$e(),ve(),be(ge,Ce,{required:!0}),si("design:type",Object)],Pi.prototype,"$$Value",void 0);class Si extends Ci{constructor(){super()}set Font(t){this.$Font=t}get Font(){return this.$Font}set Size(t){this.$Size=t}get Size(){return this.$Size}set Stroke(t){this.$Stroke=t}get Stroke(){return this.$Stroke}set Fill(t){this.$Fill=t}get Fill(){return this.$Fill}set HScale(t){this.$HScale=t}get HScale(){return this.$HScale}set ReadDirection(t){this.$ReadDirection=t}get ReadDirection(){return this.$ReadDirection}set CharDirection(t){this.$CharDirection=t}get CharDirection(){return this.$CharDirection}set Weight(t){this.$Weight=t}get Weight(){return this.$Weight}set Italic(t){this.$Italic=t}get Italic(){return this.$Italic}set FillColor(t){this.$FillColor=t}get FillColor(){return this.$FillColor}set StrokeColor(t){this.$StrokeColor=t}get StrokeColor(){return this.$StrokeColor}set CGTransform(t){this.$CGTransform=t}get CGTransform(){return this.$CGTransform}set TextCode(t){this.$TextCode=t}get TextCode(){return this.$TextCode}type(){return"TextObject"}}ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],Si.prototype,"$Font",void 0),ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],Si.prototype,"$Size",void 0),ri([$e(),ve(),be(fe,De,{default:!1}),si("design:type",Object)],Si.prototype,"$Stroke",void 0),ri([$e(),ve(),be(fe,De,{default:!0}),si("design:type",Object)],Si.prototype,"$Fill",void 0),ri([$e(),ve(),be(fe,xe,{default:1}),si("design:type",Object)],Si.prototype,"$HScale",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],Si.prototype,"$ReadDirection",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],Si.prototype,"$CharDirection",void 0),ri([$e(),ve(),be(fe,xe,{}),si("design:type",Number)],Si.prototype,"$Weight",void 0),ri([$e(),ve(),be(fe,De,{}),si("design:type",Object)],Si.prototype,"$Italic",void 0),ri([$e(),ve(),be(ge,ai),si("design:type",ai)],Si.prototype,"$FillColor",void 0),ri([$e(),ve(),be(ge,ai),si("design:type",ai)],Si.prototype,"$StrokeColor",void 0),ri([$e(),ve(),be(ge,Oi,{multiple:!0}),si("design:type",Object)],Si.prototype,"$CGTransform",void 0),ri([$e(),ve(),be(ge,Pi,{required:!0,multiple:!0}),si("design:type",Object)],Si.prototype,"$TextCode",void 0);class Ii extends Ci{constructor(){super()}set Stroke(t){this.$Stroke=t}get Stroke(){return this.$Stroke}set Fill(t){this.$Fill=t}get Fill(){return this.$Fill}set Rule(t){this.$Rule=t}get Rule(){return this.$Rule}set FillColor(t){this.$FillColor=t}get FillColor(){return this.$FillColor}set StrokeColor(t){this.$StrokeColor=t}get StrokeColor(){return this.$StrokeColor}set AbbreviatedData(t){this.$AbbreviatedData=t}get AbbreviatedData(){return this.$AbbreviatedData}type(){return"PathObject"}}ri([$e(),ve(),be(fe,De,{default:!0}),si("design:type",Object)],Ii.prototype,"$Stroke",void 0),ri([$e(),ve(),be(fe,De,{default:!1}),si("design:type",Object)],Ii.prototype,"$Fill",void 0),ri([$e(),ve(),be(fe,Ce,{default:"NonZero"}),si("design:type",String)],Ii.prototype,"$Rule",void 0),ri([$e(),ve(),be(ge,ai),si("design:type",ai)],Ii.prototype,"$FillColor",void 0),ri([$e(),ve(),be(ge,ai),si("design:type",ai)],Ii.prototype,"$StrokeColor",void 0),ri([$e(),ve(),be(ge,Ce,{required:!0}),si("design:type",Object)],Ii.prototype,"$AbbreviatedData",void 0);class Ti extends te{constructor(){super()}set LineWidth(t){this.$LineWidth=t}get LineWidth(){return this.$LineWidth}set HorizonalCornerRadius(t){this.$HorizonalCornerRadius=t}get HorizonalCornerRadius(){return this.$HorizonalCornerRadius}set VerticalCornerRadius(t){this.$VerticalCornerRadius=t}get VerticalCornerRadius(){return this.$VerticalCornerRadius}set DashOffset(t){this.$DashOffset=t}get DashOffset(){return this.$DashOffset}set DashPattern(t){this.$DashPattern=t}get DashPattern(){return this.$DashPattern}set BorderColor(t){this.$BorderColor=t}get BorderColor(){return this.$BorderColor}}ri([$e(),ve(),be(fe,xe,{default:.353}),si("design:type",Object)],Ti.prototype,"$LineWidth",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],Ti.prototype,"$HorizonalCornerRadius",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],Ti.prototype,"$VerticalCornerRadius",void 0),ri([$e(),ve(),be(fe,xe,{default:0}),si("design:type",Object)],Ti.prototype,"$DashOffset",void 0),ri([$e(),ve(),be(fe,Oe),si("design:type",Object)],Ti.prototype,"$DashPattern",void 0),ri([$e(),ve(),be(ge,ai),si("design:type",ai)],Ti.prototype,"$BorderColor",void 0);class Ri extends Ci{constructor(){super()}set ResourceID(t){this.$ResourceID=t}get ResourceID(){return this.$ResourceID}set Substitution(t){this.$Substitution=t}get Substitution(){return this.$Substitution}set ImageMask(t){this.$ImageMask=t}get ImageMask(){return this.$ImageMask}set Border(t){this.$Border=t}get Border(){return this.$Border}type(){return"ImageObject"}}ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],Ri.prototype,"$ResourceID",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],Ri.prototype,"$Substitution",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],Ri.prototype,"$ImageMask",void 0),ri([$e(),ve(),be(ge,Ti),si("design:type",Ti)],Ri.prototype,"$Border",void 0);class ji extends Ci{constructor(){super()}set ResourceID(t){this.$ResourceID=t}get ResourceID(){return this.$ResourceID}set Substitution(t){this.$Substitution=t}get Substitution(){return this.$Substitution}set Title(t){this.$Title=t}get Title(){return this.$Title}set Border(t){this.$Border=t}get Border(){return this.$Border}type(){return"VideoObject"}}ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],ji.prototype,"$ResourceID",void 0),ri([$e(),ve(),be(fe,xe),si("design:type",Object)],ji.prototype,"$Substitution",void 0),ri([$e(),ve(),be(fe,Ce),si("design:type",Object)],ji.prototype,"$Title",void 0),ri([$e(),ve(),be(ge,Ti),si("design:type",Ti)],ji.prototype,"$Border",void 0);class Ai extends Ci{constructor(){super()}set ResourceID(t){this.$ResourceID=t}get ResourceID(){return this.$ResourceID}type(){return"CompositeObject"}}ri([$e(),ve(),be(fe,xe,{required:!0}),si("design:type",Object)],Ai.prototype,"$ResourceID",void 0);class Fi extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set GraphUnits(t){this.$GraphUnits=t}get GraphUnits(){return this.$GraphUnits}}ri([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),si("design:type",Object)],Fi.prototype,"$ID",void 0),ri([$e(),ve(),be(ye,li,{multiple:!0}),si("design:type",Object)],Fi.prototype,"$GraphUnits",void 0);class Mi extends te{constructor(){super()}set Path(t){this.$Path=t}get Path(){return this.$Path}set Text(t){this.$Text=t}get Text(){return this.$Text}}ri([$e(),ve(),be(ge,Ii),si("design:type",Ii)],Mi.prototype,"$Path",void 0),ri([$e(),ve(),be(ge,Si),si("design:type",Si)],Mi.prototype,"$Text",void 0),se($i,[Mi]);class Bi extends te{constructor(){super()}set TextObject(t){this.$TextObject=t}get TextObject(){return this.$TextObject}set PathObject(t){this.$PathObject=t}get PathObject(){return this.$PathObject}set ImageObject(t){this.$ImageObject=t}get ImageObject(){return this.$ImageObject}set VideoObject(t){this.$VideoObject=t}get VideoObject(){return this.$VideoObject}set CompositeObject(t){this.$CompositeObject=t}get CompositeObject(){return this.$CompositeObject}set PageBlock(t){this.$PageBlock=t}get PageBlock(){return this.$PageBlock}available(){var t,e,i,n;return null!==(n=null!==(i=null!==(e=null!==(t=this.TextObject)&&void 0!==t?t:this.PathObject)&&void 0!==e?e:this.ImageObject)&&void 0!==i?i:this.VideoObject)&&void 0!==n?n:this.CompositeObject}}ri([$e(),ve(),be(ge,Si),si("design:type",Si)],Bi.prototype,"$TextObject",void 0),ri([$e(),ve(),be(ge,Ii),si("design:type",Ii)],Bi.prototype,"$PathObject",void 0),ri([$e(),ve(),be(ge,Ri),si("design:type",Ri)],Bi.prototype,"$ImageObject",void 0),ri([$e(),ve(),be(ge,ji),si("design:type",ji)],Bi.prototype,"$VideoObject",void 0),ri([$e(),ve(),be(ge,Ai),si("design:type",Ai)],Bi.prototype,"$CompositeObject",void 0),ri([$e(),ve(),be(ge,Fi),si("design:type",Fi)],Bi.prototype,"$PageBlock",void 0),se(li,[Bi]);var ki=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Li=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ni=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class Ei extends te{constructor(){super()}location(t){if(t.charAt(0)!=Zt){const e=this.parentUntil(nn);(null==e?void 0:e.BaseLoc)&&(t=e.BaseLoc+Zt+t)}return super.location(t)}loadData(t){return Ni(this,void 0,void 0,(function*(){return t?this.loadEntry(this.location(t)).then((t=>t.asBuffer())):Promise.reject("FileLoc is empty")}))}putData(t,e){return Ni(this,void 0,void 0,(function*(){const i=yield Re(e),n=this.location(t);return yield this.package.put(n,i),n}))}}const _i=new Set([1,2,4,8,16]);class Vi extends te{constructor(){super()}set CV(t){this.$CV=t}get CV(){return this.$CV}}ki([$e(),ve(),be(ge,Pe,{required:!0,multiple:!0}),Li("design:type",Object)],Vi.prototype,"$CV",void 0);class qi extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Type(t){this.$Type=t}get Type(){return this.$Type}set BitsPerComponent(t){this.$BitsPerComponent=t}get BitsPerComponent(){return this.$BitsPerComponent}set Profile(t){this.$Profile=t}get Profile(){return this.$Profile}set Palette(t){this.$Palette=t}get Palette(){return this.$Palette}}ki([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Li("design:type",Object)],qi.prototype,"$ID",void 0),ki([$e(),ve(),be(fe,Ce,{required:!0}),Li("design:type",String)],qi.prototype,"$Type",void 0),ki([$e(),ve(),be(fe,xe,{default:8}),Li("design:type",Number)],qi.prototype,"$BitsPerComponent",void 0),ki([$e(),ve(),be(fe,Ce),Li("design:type",Object)],qi.prototype,"$Profile",void 0),ki([$e(),ve(),be(ge,Vi),Li("design:type",Vi)],qi.prototype,"$Palette",void 0);class Gi extends te{constructor(){super()}set ColorSpace(t){this.$ColorSpace=t}get ColorSpace(){return this.$ColorSpace}}ki([$e(),ve(),be(ge,qi,{required:!0,multiple:!0}),Li("design:type",Object)],Gi.prototype,"$ColorSpace",void 0);class zi extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Relative(t){this.$Relative=t}get Relative(){return this.$Relative}set LineWidth(t){this.$LineWidth=t}get LineWidth(){return this.$LineWidth}set Join(t){this.$Join=t}get Join(){return this.$Join}set Cap(t){this.$Cap=t}get Cap(){return this.$Cap}set DashOffset(t){this.$DashOffset=t}get DashOffset(){return this.$DashOffset}set DashPattern(t){this.$DashPattern=t}get DashPattern(){return this.$DashPattern}set MiterLimit(t){this.$MiterLimit=t}get MiterLimit(){return this.$MiterLimit}set FillColor(t){this.$FillColor=t}get FillColor(){return this.$FillColor}set StrokeColor(t){this.$StrokeColor=t}get StrokeColor(){return this.$StrokeColor}}ki([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Li("design:type",Object)],zi.prototype,"$ID",void 0),ki([$e(),ve(),be(fe,xe),Li("design:type",Object)],zi.prototype,"$Relative",void 0),ki([$e(),ve(),be(fe,xe,{default:.353}),Li("design:type",Object)],zi.prototype,"$LineWidth",void 0),ki([$e(),ve(),be(fe,Ce,{default:"Miter"}),Li("design:type",String)],zi.prototype,"$Join",void 0),ki([$e(),ve(),be(fe,Ce,{default:"Butt"}),Li("design:type",String)],zi.prototype,"$Cap",void 0),ki([$e(),ve(),be(fe,xe,{default:0}),Li("design:type",Object)],zi.prototype,"$DashOffset",void 0),ki([$e(),ve(),be(fe,Oe),Li("design:type",Object)],zi.prototype,"$DashPattern",void 0),ki([$e(),ve(),be(fe,xe,{default:4.234}),Li("design:type",Object)],zi.prototype,"$MiterLimit",void 0),ki([$e(),ve(),be(ge,ai),Li("design:type",ai)],zi.prototype,"$FillColor",void 0),ki([$e(),ve(),be(ge,ai),Li("design:type",ai)],zi.prototype,"$StrokeColor",void 0);class Ui extends te{constructor(){super()}set DrawParam(t){this.$DrawParam=t}get DrawParam(){return this.$DrawParam}}ki([$e(),ve(),be(ge,zi,{required:!0,multiple:!0}),Li("design:type",Object)],Ui.prototype,"$DrawParam",void 0);class Wi extends Ei{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set FontName(t){this.$FontName=t}get FontName(){return this.$FontName}set FamilyName(t){this.$FamilyName=t}get FamilyName(){return this.$FamilyName}set Charset(t){this.$Charset=t}get Charset(){return this.$Charset}set Italic(t){this.$Italic=t}get Italic(){return this.$Italic}set Bold(t){this.$Bold=t}get Bold(){return this.$Bold}set Serif(t){this.$Serif=t}get Serif(){return this.$Serif}set FixedWidth(t){this.$FixedWidth=t}get FixedWidth(){return this.$FixedWidth}set FontFile(t){this.$FontFile=t}get FontFile(){return this.$FontFile}isEmbed(){return!!this.FontFile&&this.FontFile.length>0}loadFile(){return Ni(this,void 0,void 0,(function*(){return this.loadData(this.FontFile)}))}isBold(){var t,e,i,n;return null!==(n=null!==(t=this.Bold)&&void 0!==t?t:null===(i=null!==(e=this.FontName)&&void 0!==e?e:this.FamilyName)||void 0===i?void 0:i.toLowerCase().includes("bold"))&&void 0!==n&&n}isItalic(){var t,e,i,n;return null!==(n=null!==(t=this.Italic)&&void 0!==t?t:null===(i=null!==(e=this.FontName)&&void 0!==e?e:this.FamilyName)||void 0===i?void 0:i.toLowerCase().includes("italic"))&&void 0!==n&&n}tryClose(t){return!!I.is(t)&&(t.close(),!0)}doClose(){if(this.object instanceof Map){for(const[t,e]of this.object)this.tryClose(e);this.object.clear()}else this.tryClose(this.object);delete this.object}}ki([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Li("design:type",Object)],Wi.prototype,"$ID",void 0),ki([$e(),ve(),be(fe,Ce,{required:!0}),Li("design:type",Object)],Wi.prototype,"$FontName",void 0),ki([$e(),ve(),be(fe,Ce),Li("design:type",Object)],Wi.prototype,"$FamilyName",void 0),ki([$e(),ve(),be(fe,Ce,{default:"unicode"}),Li("design:type",String)],Wi.prototype,"$Charset",void 0),ki([$e(),ve(),be(fe,De,{}),Li("design:type",Object)],Wi.prototype,"$Italic",void 0),ki([$e(),ve(),be(fe,De,{}),Li("design:type",Object)],Wi.prototype,"$Bold",void 0),ki([$e(),ve(),be(fe,De,{default:!1}),Li("design:type",Object)],Wi.prototype,"$Serif",void 0),ki([$e(),ve(),be(fe,De,{default:!1}),Li("design:type",Object)],Wi.prototype,"$FixedWidth",void 0),ki([$e(),ve(),be(ge,Ce,{relative:ArrayBuffer}),Li("design:type",Object)],Wi.prototype,"$FontFile",void 0);class Hi extends te{constructor(){super()}set Font(t){this.$Font=t}get Font(){return this.$Font}}ki([$e(),ve(),be(ge,Wi,{required:!0,multiple:!0}),Li("design:type",Object)],Hi.prototype,"$Font",void 0);class Yi extends Ei{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Type(t){this.$Type=t}get Type(){return this.$Type}set Format(t){this.$Format=t}get Format(){return this.$Format}set MediaFile(t){this.$MediaFile=t}get MediaFile(){return this.$MediaFile}loadFile(){return this.loadData(this.MediaFile)}}ki([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Li("design:type",Object)],Yi.prototype,"$ID",void 0),ki([$e(),ve(),be(fe,Ce,{required:!0}),Li("design:type",String)],Yi.prototype,"$Type",void 0),ki([$e(),ve(),be(fe,Ce),Li("design:type",Object)],Yi.prototype,"$Format",void 0),ki([$e(),ve(),be(ge,Ce,{required:!0,relative:ArrayBuffer}),Li("design:type",Object)],Yi.prototype,"$MediaFile",void 0);class Xi extends te{constructor(){super()}set MultiMedia(t){this.$MultiMedia=t}get MultiMedia(){return this.$MultiMedia}}ki([$e(),ve(),be(ge,Yi,{required:!0,multiple:!0}),Li("design:type",Object)],Xi.prototype,"$MultiMedia",void 0);class Zi extends te{constructor(){super()}set GraphUnits(t){this.$GraphUnits=t}get GraphUnits(){return this.$GraphUnits}}ki([$e(),ve(),be(ye,li,{multiple:!0}),Li("design:type",Object)],Zi.prototype,"$GraphUnits",void 0);class Ki extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Width(t){this.$Width=t}get Width(){return this.$Width}set Height(t){this.$Height=t}get Height(){return this.$Height}set Thumbnail(t){this.$Thumbnail=t}get Thumbnail(){return this.$Thumbnail}set Substitution(t){this.$Substitution=t}get Substitution(){return this.$Substitution}set Content(t){this.$Content=t}get Content(){return this.$Content}}ki([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Li("design:type",Object)],Ki.prototype,"$ID",void 0),ki([$e(),ve(),be(fe,xe,{required:!0}),Li("design:type",Object)],Ki.prototype,"$Width",void 0),ki([$e(),ve(),be(fe,xe,{required:!0}),Li("design:type",Object)],Ki.prototype,"$Height",void 0),ki([$e(),ve(),be(ge,xe),Li("design:type",Object)],Ki.prototype,"$Thumbnail",void 0),ki([$e(),ve(),be(ge,xe),Li("design:type",Object)],Ki.prototype,"$Substitution",void 0),ki([$e(),ve(),be(ge,Zi),Li("design:type",Zi)],Ki.prototype,"$Content",void 0);class Qi extends te{constructor(){super()}set CompositeGraphicUnit(t){this.$CompositeGraphicUnit=t}get CompositeGraphicUnit(){return this.$CompositeGraphicUnit}}function Ji(t){return null!=t?t:new Rt}var tn;ki([$e(),ve(),be(ge,Ki,{required:!0,multiple:!0}),Li("design:type",Object)],Qi.prototype,"$CompositeGraphicUnit",void 0),function(t){t.ColorSpace="cs_",t.DrawParam="dp_",t.Font="ft_",t.MultiMedia="mm_",t.CompositeGraphicUnit="gu_"}(tn||(tn={}));const en="Res.xml";let nn=class extends te{constructor(){super()}doClose(){var t;null===(t=this._mapping)||void 0===t||t.clear()}set BaseLoc(t){this.$BaseLoc=t}get BaseLoc(){return this.$BaseLoc}set ColorSpaces(t){this.$ColorSpaces=t}get ColorSpaces(){return this.$ColorSpaces}set DrawParams(t){this.$DrawParams=t}get DrawParams(){return this.$DrawParams}set Fonts(t){this.$Fonts=t}get Fonts(){return this.$Fonts}set MultiMedias(t){this.$MultiMedias=t}get MultiMedias(){return this.$MultiMedias}set CompositeGraphicUnits(t){this.$CompositeGraphicUnits=t}get CompositeGraphicUnits(){return this.$CompositeGraphicUnits}toMap(){if(this._mapping)return this._mapping;const t=new Map;return Ji(this.ColorSpaces).forEach((e=>{Ji(e.ColorSpace).forEach((e=>{t.set(tn.ColorSpace+e.ID,e)}))})),Ji(this.DrawParams).forEach((e=>{Ji(e.DrawParam).forEach((e=>{t.set(tn.DrawParam+e.ID,e)}))})),Ji(this.Fonts).forEach((e=>{Ji(e.Font).forEach((e=>{t.set(tn.Font+e.ID,e)}))})),Ji(this.MultiMedias).forEach((e=>{Ji(e.MultiMedia).forEach((e=>{t.set(tn.MultiMedia+e.ID,e)}))})),Ji(this.CompositeGraphicUnits).forEach((e=>{Ji(e.CompositeGraphicUnit).forEach((e=>{t.set(tn.CompositeGraphicUnit+e.ID,e)}))})),this._mapping=t,t}newMedia(){this.MultiMedias||(this.MultiMedias=this.makeList());let t=this.MultiMedias.last();t||(t=this.makeModel(Xi,!0),this.MultiMedias.add(t));const e=t.makeModel(Yi,!0);return t.MultiMedia||(t.MultiMedia=t.makeList()),t.MultiMedia.add(e),e}};ki([$e(),ve(),be(fe,Ce,{required:!0}),Li("design:type",Object)],nn.prototype,"$BaseLoc",void 0),ki([$e(),ve(),be(ge,Gi,{multiple:!0}),Li("design:type",Object)],nn.prototype,"$ColorSpaces",void 0),ki([$e(),ve(),be(ge,Ui,{multiple:!0}),Li("design:type",Object)],nn.prototype,"$DrawParams",void 0),ki([$e(),ve(),be(ge,Hi,{multiple:!0}),Li("design:type",Object)],nn.prototype,"$Fonts",void 0),ki([$e(),ve(),be(ge,Xi,{multiple:!0}),Li("design:type",Object)],nn.prototype,"$MultiMedias",void 0),ki([$e(),ve(),be(ge,Qi,{multiple:!0}),Li("design:type",Object)],nn.prototype,"$CompositeGraphicUnits",void 0),nn=ki([me("Res","{name}"+en),Li("design:paramtypes",[])],nn);class on extends T{constructor(){super(),this.resources=new Set}doClose(){this.resources.clear()}add(t){s(t)||this.resources.add(t)}find(t,e){if(!s(e))for(const i of this.resources){const n=i.toMap().get(t+e);if(n)return n}}font(t){return this.find(tn.Font,t)}colorSpace(t){return this.find(tn.ColorSpace,t)}media(t){return this.find(tn.MultiMedia,t)}drawParam(t){return this.find(tn.DrawParam,t)}composite(t){return this.find(tn.CompositeGraphicUnit,t)}list(t){const e=new Array;for(const i of this.resources){const n=i[t];n&&e.push(...n)}return e}dump(){console.log(this.resources)}}class rn{constructor(t){this.set=new Array;for(const e of t)e&&this.set.push(e)}font(t){if(!s(t))for(const e of this.set){const i=e.font(t);if(i)return i}}colorSpace(t){if(!s(t))for(const e of this.set){const i=e.colorSpace(t);if(i)return i}}media(t){if(!s(t))for(const e of this.set){const i=e.media(t);if(i)return i}}drawParam(t){if(!s(t))for(const e of this.set){const i=e.drawParam(t);if(i)return i}}composite(t){if(!s(t))for(const e of this.set){const i=e.composite(t);if(i)return i}}}var sn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},an=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ln=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class un extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Type(t){this.$Type=t}get Type(){return this.$Type}set DrawParam(t){this.$DrawParam=t}get DrawParam(){return this.$DrawParam}set GraphUnits(t){this.$GraphUnits=t}get GraphUnits(){return this.$GraphUnits}}sn([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),an("design:type",Object)],un.prototype,"$ID",void 0),sn([$e(),ve(),be(fe,Ce),an("design:type",String)],un.prototype,"$Type",void 0),sn([$e(),ve(),be(fe,xe),an("design:type",Object)],un.prototype,"$DrawParam",void 0),sn([$e(),ve(),be(ye,li,{required:!0,multiple:!0}),an("design:type",Object)],un.prototype,"$GraphUnits",void 0);class dn extends te{constructor(){super()}set Layer(t){this.$Layer=t}get Layer(){return this.$Layer}}sn([$e(),ve(),be(ge,un,{required:!0,multiple:!0}),an("design:type",Object)],dn.prototype,"$Layer",void 0);class cn extends te{constructor(){super()}set TemplateID(t){this.$TemplateID=t}get TemplateID(){return this.$TemplateID}set ZOrder(t){this.$ZOrder=t}get ZOrder(){return this.$ZOrder}}sn([$e(),ve(),be(fe,xe,{required:!0}),an("design:type",Object)],cn.prototype,"$TemplateID",void 0),sn([$e(),ve(),be(fe,Ce),an("design:type",String)],cn.prototype,"$ZOrder",void 0);let hn=class extends te{constructor(){super()}set Area(t){this.$Area=t}get Area(){return this.$Area}set Template(t){this.$Template=t}get Template(){return this.$Template}set PageRes(t){this.$PageRes=t}get PageRes(){return this.$PageRes}set Content(t){this.$Content=t}get Content(){return this.$Content}set Actions(t){this.$Actions=t}get Actions(){return this.$Actions}relatePageResource(){return this.related()}loadAllResource(){return ln(this,void 0,void 0,(function*(){const t=new on;for(const e of yield this.relatePageResource().all())t.add(e);return this.willClose(t),t}))}};sn([$e(),ve(),be(ge,Me),an("design:type",Me)],hn.prototype,"$Area",void 0),sn([$e(),ve(),be(ge,cn,{multiple:!0}),an("design:type",Object)],hn.prototype,"$Template",void 0),sn([$e(),ve(),be(ge,Ce,{multiple:!0,relative:nn}),an("design:type",Object)],hn.prototype,"$PageRes",void 0),sn([$e(),ve(),be(ge,dn),an("design:type",dn)],hn.prototype,"$Content",void 0),sn([$e(),ve(),be(ge,oi),an("design:type",oi)],hn.prototype,"$Actions",void 0),sn([we("PageRes"),an("design:type",Function),an("design:paramtypes",[]),an("design:returntype",Object)],hn.prototype,"relatePageResource",null),hn=sn([me("Page","Pages/Page_{index}/Content.xml"),an("design:paramtypes",[])],hn);var pn=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const gn=(t,e)=>{if(t){let i=0;for(let n of t){if(!s(n)&&!1===e(n,i))break;i++}}},fn=(t,e)=>pn(void 0,void 0,void 0,(function*(){if(t){let i=0;for(let n of t){if(!s(n)&&!1===(yield Promise.resolve(e(n,i))))break;i++}}})),yn=t=>!!Array.isArray(t)&&0===t.length,mn=(t,e)=>{const i=t.length,n=e>=0?e:i+e;return n<0||n>=i?void 0:t[n]},vn=t=>{if(!yn(t))return mn(t,-1)};var $n=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},bn=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class wn extends te{constructor(){super()}set EachLength(t){this.$EachLength=t}get EachLength(){return this.$EachLength}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}$n([$e(),ve(),be(fe,xe,{default:0}),bn("design:type",Object)],wn.prototype,"$EachLength",void 0),$n([$e(),ve(),be(ge,Ce,{required:!0}),bn("design:type",Object)],wn.prototype,"$$Value",void 0);class xn extends te{constructor(){super()}set DataListID(t){this.$DataListID=t}get DataListID(){return this.$DataListID}}$n([$e(),ve(),be(fe,xe,{required:!0}),bn("design:type",Object)],xn.prototype,"$DataListID",void 0);class Cn extends te{constructor(){super()}set ValueType(t){this.$ValueType=t}get ValueType(){return this.$ValueType}set Value(t){this.$Value=t}get Value(){return this.$Value}set Escape(t){this.$Escape=t}get Escape(){return this.$Escape}}$n([$e(),ve(),be(fe,Ce,{default:"Value"}),bn("design:type",Object)],Cn.prototype,"$ValueType",void 0),$n([$e(),ve(),be(fe,Ce,{required:!0}),bn("design:type",Object)],Cn.prototype,"$Value",void 0),$n([$e(),ve(),be(ge,xn),bn("design:type",Object)],Cn.prototype,"$Escape",void 0);class Dn extends te{constructor(){super()}set DateTimeInputFormat(t){this.$DateTimeInputFormat=t}get DateTimeInputFormat(){return this.$DateTimeInputFormat}set DateTimeFormat(t){this.$DateTimeFormat=t}get DateTimeFormat(){return this.$DateTimeFormat}set CustomFormat(t){this.$CustomFormat=t}get CustomFormat(){return this.$CustomFormat}set NumberFormat(t){this.$NumberFormat=t}get NumberFormat(){return this.$NumberFormat}set RoundMode(t){this.$RoundMode=t}get RoundMode(){return this.$RoundMode}set TextSeparator(t){this.$TextSeparator=t}get TextSeparator(){return this.$TextSeparator}set Prefix(t){this.$Prefix=t}get Prefix(){return this.$Prefix}set Suffix(t){this.$Suffix=t}get Suffix(){return this.$Suffix}set Escape(t){this.$Escape=t}get Escape(){return this.$Escape}}$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Dn.prototype,"$DateTimeInputFormat",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Dn.prototype,"$DateTimeFormat",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Dn.prototype,"$CustomFormat",void 0),$n([$e(),ve(),be(fe,Ce,{default:"None"}),bn("design:type",Object)],Dn.prototype,"$NumberFormat",void 0),$n([$e(),ve(),be(fe,Ce,{default:"None"}),bn("design:type",Object)],Dn.prototype,"$RoundMode",void 0),$n([$e(),ve(),be(ge,wn),bn("design:type",Object)],Dn.prototype,"$TextSeparator",void 0),$n([$e(),ve(),be(ge,Cn),bn("design:type",Object)],Dn.prototype,"$Prefix",void 0),$n([$e(),ve(),be(ge,Cn),bn("design:type",Object)],Dn.prototype,"$Suffix",void 0),$n([$e(),ve(),be(ge,xn),bn("design:type",Object)],Dn.prototype,"$Escape",void 0);class On extends te{constructor(){super()}set Name(t){this.$Name=t}get Name(){return this.$Name}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}$n([$e(),ve(),be(fe,Ce,{required:!0}),bn("design:type",Object)],On.prototype,"$Name",void 0),$n([$e(),ve(),be(ge,Ce,{required:!0}),bn("design:type",Object)],On.prototype,"$$Value",void 0);class Pn extends te{constructor(){super()}set Parameter(t){this.$Parameter=t}get Parameter(){return this.$Parameter}newParameter(){var t;this.Parameter=null!==(t=this.Parameter)&&void 0!==t?t:this.makeList();const e=this.makeModel(On,!0);return this.Parameter.add(e),e}setParameter(t,e){var i;let n;if(this.Parameter&&0!==this.Parameter.size()||!s(e)){if(this.Parameter&&0!==this.Parameter.size()){const e=this.Parameter.toArray().filter((e=>e.Name===t)).pop();n=null!=e?e:this.newParameter()}else n=this.newParameter();s(e)?null===(i=this.Parameter)||void 0===i||i.remove(n):(n.Name=t,n.Value=e+"")}}getParameter(t){if(!this.Parameter)return;const e=this.Parameter.toArray().filter((e=>e.Name===t)).pop();return null==e?void 0:e.Value}}$n([$e(),ve(),be(ge,On,{required:!0,multiple:!0}),bn("design:type",Object)],Pn.prototype,"$Parameter",void 0);class Sn extends te{constructor(){super()}set Action(t){this.$Action=t}get Action(){return this.$Action}newAction(){const t=this.makeModel(ni,!0);return this.Action||(this.Action=this.makeList()),this.Action.add(t),t}}$n([$e(),ve(),be(ge,ni,{required:!0,multiple:!0}),bn("design:type",Object)],Sn.prototype,"$Action",void 0);class In extends te{constructor(){super()}set AnnotID(t){this.$AnnotID=t}get AnnotID(){return this.$AnnotID}}$n([$e(),ve(),be(fe,xe,{required:!0}),bn("design:type",Object)],In.prototype,"$AnnotID",void 0);class Tn extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Name(t){this.$Name=t}get Name(){return this.$Name}set PageID(t){this.$PageID=t}get PageID(){return this.$PageID}set Boundary(t){this.$Boundary=t}get Boundary(){return this.$Boundary}set Padding(t){this.$Padding=t}get Padding(){return this.$Padding}set RelativeObjectID(t){this.$RelativeObjectID=t}get RelativeObjectID(){return this.$RelativeObjectID}set RelativePos(t){this.$RelativePos=t}get RelativePos(){return this.$RelativePos}set DataRef(t){this.$DataRef=t}get DataRef(){return this.$DataRef}set ReFillRule(t){this.$ReFillRule=t}get ReFillRule(){return this.$ReFillRule}set Value(t){this.$Value=t}get Value(){return this.$Value}set ValueType(t){this.$ValueType=t}get ValueType(){return this.$ValueType}set DataListID(t){this.$DataListID=t}get DataListID(){return this.$DataListID}set StyleID(t){this.$StyleID=t}get StyleID(){return this.$StyleID}set Checked(t){this.$Checked=t}get Checked(){return this.$Checked}set AutoFocus(t){this.$AutoFocus=t}get AutoFocus(){return this.$AutoFocus}set ReadOnly(t){this.$ReadOnly=t}get ReadOnly(){return this.$ReadOnly}set Disabled(t){this.$Disabled=t}get Disabled(){return this.$Disabled}set Required(t){this.$Required=t}get Required(){return this.$Required}set MaxLength(t){this.$MaxLength=t}get MaxLength(){return this.$MaxLength}set Min(t){this.$Min=t}get Min(){return this.$Min}set Max(t){this.$Max=t}get Max(){return this.$Max}set Step(t){this.$Step=t}get Step(){return this.$Step}set Placeholder(t){this.$Placeholder=t}get Placeholder(){return this.$Placeholder}set Visible(t){this.$Visible=t}get Visible(){return this.$Visible}set Printable(t){this.$Printable=t}get Printable(){return this.$Printable}set CustomDataName(t){this.$CustomDataName=t}get CustomDataName(){return this.$CustomDataName}set CustomTagName(t){this.$CustomTagName=t}get CustomTagName(){return this.$CustomTagName}set CustomTagNameRef(t){this.$CustomTagNameRef=t}get CustomTagNameRef(){return this.$CustomTagNameRef}set SignatureID(t){this.$SignatureID=t}get SignatureID(){return this.$SignatureID}set ImageLayoutMode(t){this.$ImageLayoutMode=t}get ImageLayoutMode(){return this.$ImageLayoutMode}set BlendMode(t){this.$BlendMode=t}get BlendMode(){return this.$BlendMode}set Parameters(t){this.$Parameters=t}get Parameters(){return this.$Parameters}set Actions(t){this.$Actions=t}get Actions(){return this.$Actions}set AnnotRef(t){this.$AnnotRef=t}get AnnotRef(){return this.$AnnotRef}set Format(t){this.$Format=t}get Format(){return this.$Format}name(){return"Text"}}$n([$e(),ve(),be(fe,xe,{required:!0}),bn("design:type",Object)],Tn.prototype,"$ID",void 0),$n([$e(),ve(),be(fe,Ce,{required:!0}),bn("design:type",Object)],Tn.prototype,"$Name",void 0),$n([$e(),ve(),be(fe,xe,{required:!0}),bn("design:type",Object)],Tn.prototype,"$PageID",void 0),$n([$e(),ve(),be(fe,Ce,{required:!0}),bn("design:type",Object)],Tn.prototype,"$Type",void 0),$n([$e(),ve(),be(fe,Oe,{required:!0}),bn("design:type",Object)],Tn.prototype,"$Boundary",void 0),$n([$e(),ve(),be(fe,Oe),bn("design:type",Object)],Tn.prototype,"$Padding",void 0),$n([$e(),ve(),be(fe,xe,{default:0}),bn("design:type",Object)],Tn.prototype,"$RelativeObjectID",void 0),$n([$e(),ve(),be(fe,Ce,{default:"LeftBottom"}),bn("design:type",Object)],Tn.prototype,"$RelativePos",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$DataRef",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$ReFillRule",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$Value",void 0),$n([$e(),ve(),be(fe,Ce,{default:"None"}),bn("design:type",Object)],Tn.prototype,"$ValueType",void 0),$n([$e(),ve(),be(fe,xe),bn("design:type",Object)],Tn.prototype,"$DataListID",void 0),$n([$e(),ve(),be(fe,xe),bn("design:type",Object)],Tn.prototype,"$StyleID",void 0),$n([$e(),ve(),be(fe,De,{default:!1}),bn("design:type",Object)],Tn.prototype,"$Checked",void 0),$n([$e(),ve(),be(fe,De,{default:!1}),bn("design:type",Object)],Tn.prototype,"$AutoFocus",void 0),$n([$e(),ve(),be(fe,De,{default:!0}),bn("design:type",Object)],Tn.prototype,"$ReadOnly",void 0),$n([$e(),ve(),be(fe,De,{default:!1}),bn("design:type",Object)],Tn.prototype,"$Disabled",void 0),$n([$e(),ve(),be(fe,De,{default:!1}),bn("design:type",Object)],Tn.prototype,"$Required",void 0),$n([$e(),ve(),be(fe,xe,{default:0}),bn("design:type",Object)],Tn.prototype,"$MaxLength",void 0),$n([$e(),ve(),be(fe,xe),bn("design:type",Object)],Tn.prototype,"$Min",void 0),$n([$e(),ve(),be(fe,xe),bn("design:type",Object)],Tn.prototype,"$Max",void 0),$n([$e(),ve(),be(fe,xe),bn("design:type",Object)],Tn.prototype,"$Step",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$Placeholder",void 0),$n([$e(),ve(),be(fe,De,{default:!0}),bn("design:type",Object)],Tn.prototype,"$Visible",void 0),$n([$e(),ve(),be(fe,De,{default:!0}),bn("design:type",Object)],Tn.prototype,"$Printable",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$CustomDataName",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$CustomTagName",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$CustomTagNameRef",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$SignatureID",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$ImageLayoutMode",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],Tn.prototype,"$BlendMode",void 0),$n([$e(),ve(),be(ge,Pn),bn("design:type",Object)],Tn.prototype,"$Parameters",void 0),$n([$e(),ve(),be(ge,Sn),bn("design:type",Object)],Tn.prototype,"$Actions",void 0),$n([$e(),ve(),be(ge,In,{multiple:!0}),bn("design:type",Object)],Tn.prototype,"$AnnotRef",void 0),$n([$e(),ve(),be(ge,Dn),bn("design:type",Object)],Tn.prototype,"$Format",void 0);class Rn extends te{constructor(){super()}set ObjectID(t){this.$ObjectID=t}get ObjectID(){return this.$ObjectID}}$n([$e(),ve(),be(fe,xe,{required:!0}),bn("design:type",Object)],Rn.prototype,"$ObjectID",void 0);class jn extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Name(t){this.$Name=t}get Name(){return this.$Name}set WrapInItem(t){this.$WrapInItem=t}get WrapInItem(){return this.$WrapInItem}set Direction(t){this.$Direction=t}get Direction(){return this.$Direction}set ItemSpace(t){this.$ItemSpace=t}get ItemSpace(){return this.$ItemSpace}set MaxItemCount(t){this.$MaxItemCount=t}get MaxItemCount(){return this.$MaxItemCount}set ItemCustomTagName(t){this.$ItemCustomTagName=t}get ItemCustomTagName(){return this.$ItemCustomTagName}set FormObject(t){this.$FormObject=t}get FormObject(){return this.$FormObject}set StyleID(t){this.$StyleID=t}get StyleID(){return this.$StyleID}set Parameters(t){this.$Parameters=t}get Parameters(){return this.$Parameters}}$n([$e(),ve(),be(fe,xe,{required:!0}),bn("design:type",Object)],jn.prototype,"$ID",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],jn.prototype,"$Name",void 0),$n([$e(),ve(),be(fe,De,{default:!0}),bn("design:type",Object)],jn.prototype,"$WrapInItem",void 0),$n([$e(),ve(),be(fe,Ce,{default:"Down"}),bn("design:type",Object)],jn.prototype,"$Direction",void 0),$n([$e(),ve(),be(fe,xe,{default:0}),bn("design:type",Object)],jn.prototype,"$ItemSpace",void 0),$n([$e(),ve(),be(fe,xe,{default:1}),bn("design:type",Object)],jn.prototype,"$MaxItemCount",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],jn.prototype,"$ItemCustomTagName",void 0),$n([$e(),ve(),be(ge,Rn,{required:!0,multiple:!0}),bn("design:type",Object)],jn.prototype,"$FormObject",void 0),$n([$e(),ve(),be(fe,xe),bn("design:type",Object)],jn.prototype,"$StyleID",void 0),$n([$e(),ve(),be(ge,Pn),bn("design:type",Object)],jn.prototype,"$Parameters",void 0);class An extends te{constructor(t){super(t)}set ID(t){this.$ID=t}get ID(){return this.$ID}set Name(t){this.$Name=t}get Name(){return this.$Name}set Action(t){this.$Action=t}get Action(){return this.$Action}set Enctype(t){this.$Enctype=t}get Enctype(){return this.$Enctype}set Method(t){this.$Method=t}get Method(){return this.$Method}}$n([$e(),ve(),be(fe,xe,{required:!0}),bn("design:type",Object)],An.prototype,"$ID",void 0),$n([$e(),ve(),be(fe,Ce,{required:!0}),bn("design:type",Object)],An.prototype,"$Name",void 0),$n([$e(),ve(),be(fe,Ce),bn("design:type",Object)],An.prototype,"$Action",void 0),$n([$e(),ve(),be(fe,Ce,{default:"application/x-www-form-urlencoded"}),bn("design:type",Object)],An.prototype,"$Enctype",void 0),$n([$e(),ve(),be(fe,Ce,{default:"get"}),bn("design:type",Object)],An.prototype,"$Method",void 0);var Fn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Mn=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class Bn extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set SubRange(t){this.$SubRange=t}get SubRange(){return this.$SubRange}set StartIndex(t){this.$StartIndex=t}get StartIndex(){return this.$StartIndex}set EndIndex(t){this.$EndIndex=t}get EndIndex(){return this.$EndIndex}}Fn([$e(),ve(),be(fe,Ce,{default:"All"}),Mn("design:type",Object)],Bn.prototype,"$Type",void 0),Fn([$e(),ve(),be(fe,Ce,{default:"All"}),Mn("design:type",Object)],Bn.prototype,"$SubRange",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Bn.prototype,"$StartIndex",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Bn.prototype,"$EndIndex",void 0);class kn extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Name(t){this.$Name=t}get Name(){return this.$Name}set StyleID(t){this.$StyleID=t}get StyleID(){return this.$StyleID}set Horizontal(t){this.$Horizontal=t}get Horizontal(){return this.$Horizontal}set Vertical(t){this.$Vertical=t}get Vertical(){return this.$Vertical}set Duplex(t){this.$Duplex=t}get Duplex(){return this.$Duplex}set OnePageFormat(t){this.$OnePageFormat=t}get OnePageFormat(){return this.$OnePageFormat}set PageMargin(t){this.$PageMargin=t}get PageMargin(){return this.$PageMargin}set PageRange(t){this.$PageRange=t}get PageRange(){return this.$PageRange}}Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],kn.prototype,"$ID",void 0),Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],kn.prototype,"$Name",void 0),Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],kn.prototype,"$StyleID",void 0),Fn([$e(),ve(),be(fe,Ce,{default:"Center"}),Mn("design:type",Object)],kn.prototype,"$Horizontal",void 0),Fn([$e(),ve(),be(fe,Ce,{default:"Bottom"}),Mn("design:type",Object)],kn.prototype,"$Vertical",void 0),Fn([$e(),ve(),be(fe,De,{default:!1}),Mn("design:type",Object)],kn.prototype,"$Duplex",void 0),Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],kn.prototype,"$OnePageFormat",void 0),Fn([$e(),ve(),be(fe,Oe),Mn("design:type",Object)],kn.prototype,"$PageMargin",void 0),Fn([$e(),ve(),be(ge,Bn,{required:!0}),Mn("design:type",Object)],kn.prototype,"$PageRange",void 0);class Ln extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set LineWidth(t){this.$LineWidth=t}get LineWidth(){return this.$LineWidth}set LineType(t){this.$LineType=t}get LineType(){return this.$LineType}set Color(t){this.$Color=t}get Color(){return this.$Color}}Fn([$e(),ve(),be(fe,Ce,{default:"All"}),Mn("design:type",Object)],Ln.prototype,"$Type",void 0),Fn([$e(),ve(),be(fe,xe,{default:.353}),Mn("design:type",Object)],Ln.prototype,"$LineWidth",void 0),Fn([$e(),ve(),be(fe,Ce,{default:"SolidLine"}),Mn("design:type",Object)],Ln.prototype,"$LineType",void 0),Fn([$e(),ve(),be(ge,ai),Mn("design:type",Object)],Ln.prototype,"$Color",void 0);class Nn extends te{constructor(){super()}set Length(t){this.$Length=t}get Length(){return this.$Length}set Suffix(t){this.$Suffix=t}get Suffix(){return this.$Suffix}}Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],Nn.prototype,"$Length",void 0),Fn([$e(),ve(),be(ge,Ce),Mn("design:type",Object)],Nn.prototype,"$Suffix",void 0);class En extends te{constructor(){super()}set Length(t){this.$Length=t}get Length(){return this.$Length}set AverageRows(t){this.$AverageRows=t}get AverageRows(){return this.$AverageRows}}Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],En.prototype,"$Length",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],En.prototype,"$AverageRows",void 0);class _n extends te{constructor(){super()}set Min(t){this.$Min=t}get Min(){return this.$Min}set Max(t){this.$Max=t}get Max(){return this.$Max}set FontSize(t){this.$FontSize=t}get FontSize(){return this.$FontSize}}Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],_n.prototype,"$Min",void 0),Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],_n.prototype,"$Max",void 0),Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],_n.prototype,"$FontSize",void 0);class Vn extends te{constructor(){super()}set Rule(t){this.$Rule=t}get Rule(){return this.$Rule}}Fn([$e(),ve(),be(ge,_n,{required:!0,multiple:!0}),Mn("design:type",Object)],Vn.prototype,"$Rule",void 0);class qn extends te{constructor(){super()}set CellSeparator(t){this.$CellSeparator=t}get CellSeparator(){return this.$CellSeparator}set MinColSpace(t){this.$MinColSpace=t}get MinColSpace(){return this.$MinColSpace}}Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],qn.prototype,"$CellSeparator",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],qn.prototype,"$MinColSpace",void 0);class Gn extends te{constructor(){super()}set ReduceFontFirst(t){this.$ReduceFontFirst=t}get ReduceFontFirst(){return this.$ReduceFontFirst}set MinFontSize(t){this.$MinFontSize=t}get MinFontSize(){return this.$MinFontSize}set DeltaSize(t){this.$DeltaSize=t}get DeltaSize(){return this.$DeltaSize}}Fn([$e(),ve(),be(fe,De,{default:!1}),Mn("design:type",Object)],Gn.prototype,"$ReduceFontFirst",void 0),Fn([$e(),ve(),be(fe,xe,{default:1.764}),Mn("design:type",Object)],Gn.prototype,"$MinFontSize",void 0),Fn([$e(),ve(),be(fe,xe,{default:.353}),Mn("design:type",Object)],Gn.prototype,"$DeltaSize",void 0);class zn extends te{constructor(){super()}set Cutoff(t){this.$Cutoff=t}get Cutoff(){return this.$Cutoff}set Wrap(t){this.$Wrap=t}get Wrap(){return this.$Wrap}set SizeShiftRules(t){this.$SizeShiftRules=t}get SizeShiftRules(){return this.$SizeShiftRules}set TableLayout(t){this.$TableLayout=t}get TableLayout(){return this.$TableLayout}set Adaptive(t){this.$Adaptive=t}get Adaptive(){return this.$Adaptive}}Fn([$e(),ve(),be(ge,Nn,{required:!0}),Mn("design:type",Object)],zn.prototype,"$Cutoff",void 0),Fn([$e(),ve(),be(ge,En,{required:!0}),Mn("design:type",Object)],zn.prototype,"$Wrap",void 0),Fn([$e(),ve(),be(ge,Vn,{required:!0}),Mn("design:type",Object)],zn.prototype,"$SizeShiftRules",void 0),Fn([$e(),ve(),be(ge,qn,{required:!0}),Mn("design:type",Object)],zn.prototype,"$TableLayout",void 0),Fn([$e(),ve(),be(ge,Gn,{required:!0}),Mn("design:type",Object)],zn.prototype,"$Adaptive",void 0);class Un extends te{constructor(){super()}set ENCharLength(t){this.$ENCharLength=t}get ENCharLength(){return this.$ENCharLength}set CNCharLength(t){this.$CNCharLength=t}get CNCharLength(){return this.$CNCharLength}set HorizontalAlign(t){this.$HorizontalAlign=t}get HorizontalAlign(){return this.$HorizontalAlign}set VerticalAlign(t){this.$VerticalAlign=t}get VerticalAlign(){return this.$VerticalAlign}set CharSpacing(t){this.$CharSpacing=t}get CharSpacing(){return this.$CharSpacing}set LineSpacing(t){this.$LineSpacing=t}get LineSpacing(){return this.$LineSpacing}set CharDirection(t){this.$CharDirection=t}get CharDirection(){return this.$CharDirection}set ReadDirection(t){this.$ReadDirection=t}get ReadDirection(){return this.$ReadDirection}set Indent(t){this.$Indent=t}get Indent(){return this.$Indent}set LineBreak(t){this.$LineBreak=t}get LineBreak(){return this.$LineBreak}set MaxRows(t){this.$MaxRows=t}get MaxRows(){return this.$MaxRows}set CT_LayoutChoice(t){this.$CT_LayoutChoice=t}get CT_LayoutChoice(){return this.$CT_LayoutChoice}}Fn([$e(),ve(),be(fe,xe,{default:1}),Mn("design:type",Object)],Un.prototype,"$ENCharLength",void 0),Fn([$e(),ve(),be(fe,xe,{default:2}),Mn("design:type",Object)],Un.prototype,"$CNCharLength",void 0),Fn([$e(),ve(),be(fe,Ce,{default:"Left"}),Mn("design:type",Object)],Un.prototype,"$HorizontalAlign",void 0),Fn([$e(),ve(),be(fe,Ce,{default:"Middle"}),Mn("design:type",Object)],Un.prototype,"$VerticalAlign",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Un.prototype,"$CharSpacing",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Un.prototype,"$LineSpacing",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Un.prototype,"$CharDirection",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Un.prototype,"$ReadDirection",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Un.prototype,"$Indent",void 0),Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],Un.prototype,"$LineBreak",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Un.prototype,"$MaxRows",void 0),Fn([$e(),ve(),be(ye,zn,{required:!0}),Mn("design:type",Object)],Un.prototype,"$CT_LayoutChoice",void 0);class Wn extends te{constructor(){super()}set Charset(t){this.$Charset=t}get Charset(){return this.$Charset}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}Fn([$e(),ve(),be(fe,Ce,{required:!0}),Mn("design:type",Object)],Wn.prototype,"$Charset",void 0),Fn([$e(),ve(),be(ge,Ce,{required:!0}),Mn("design:type",Object)],Wn.prototype,"$$Value",void 0);class Hn extends te{constructor(){super()}set FontName(t){this.$FontName=t}get FontName(){return this.$FontName}set FontSize(t){this.$FontSize=t}get FontSize(){return this.$FontSize}set Weight(t){this.$Weight=t}get Weight(){return this.$Weight}set Italic(t){this.$Italic=t}get Italic(){return this.$Italic}set Color(t){this.$Color=t}get Color(){return this.$Color}set ShiftFontName(t){this.$ShiftFontName=t}get ShiftFontName(){return this.$ShiftFontName}}Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],Hn.prototype,"$FontName",void 0),Fn([$e(),ve(),be(fe,xe),Mn("design:type",Object)],Hn.prototype,"$FontSize",void 0),Fn([$e(),ve(),be(fe,xe,{default:400}),Mn("design:type",Object)],Hn.prototype,"$Weight",void 0),Fn([$e(),ve(),be(fe,De,{default:!1}),Mn("design:type",Object)],Hn.prototype,"$Italic",void 0),Fn([$e(),ve(),be(ge,ai),Mn("design:type",Object)],Hn.prototype,"$Color",void 0),Fn([$e(),ve(),be(ge,Wn,{multiple:!0}),Mn("design:type",Object)],Hn.prototype,"$ShiftFontName",void 0);class Yn extends te{constructor(){super()}set LineWidth(t){this.$LineWidth=t}get LineWidth(){return this.$LineWidth}set HorizonalCornerRadius(t){this.$HorizonalCornerRadius=t}get HorizonalCornerRadius(){return this.$HorizonalCornerRadius}set VerticalCornerRadius(t){this.$VerticalCornerRadius=t}get VerticalCornerRadius(){return this.$VerticalCornerRadius}set DashOffset(t){this.$DashOffset=t}get DashOffset(){return this.$DashOffset}set DashPattern(t){this.$DashPattern=t}get DashPattern(){return this.$DashPattern}set BorderColor(t){this.$BorderColor=t}get BorderColor(){return this.$BorderColor}}Fn([$e(),ve(),be(fe,xe,{default:.353}),Mn("design:type",Object)],Yn.prototype,"$LineWidth",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Yn.prototype,"$HorizonalCornerRadius",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Yn.prototype,"$VerticalCornerRadius",void 0),Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],Yn.prototype,"$DashOffset",void 0),Fn([$e(),ve(),be(fe,Oe),Mn("design:type",Object)],Yn.prototype,"$DashPattern",void 0),Fn([$e(),ve(),be(ge,ai),Mn("design:type",Object)],Yn.prototype,"$BorderColor",void 0);class Xn extends te{constructor(){super()}set Background(t){this.$Background=t}get Background(){return this.$Background}set Font(t){this.$Font=t}get Font(){return this.$Font}set Border(t){this.$Border=t}get Border(){return this.$Border}set Layout(t){this.$Layout=t}get Layout(){return this.$Layout}set UnderLine(t){this.$UnderLine=t}get UnderLine(){return this.$UnderLine}set DeleteLine(t){this.$DeleteLine=t}get DeleteLine(){return this.$DeleteLine}}Fn([$e(),ve(),be(ge,ai),Mn("design:type",Object)],Xn.prototype,"$Background",void 0),Fn([$e(),ve(),be(ge,Hn),Mn("design:type",Object)],Xn.prototype,"$Font",void 0),Fn([$e(),ve(),be(ge,Yn),Mn("design:type",Object)],Xn.prototype,"$Border",void 0),Fn([$e(),ve(),be(ge,Un),Mn("design:type",Object)],Xn.prototype,"$Layout",void 0),Fn([$e(),ve(),be(ge,Ln),Mn("design:type",Object)],Xn.prototype,"$UnderLine",void 0),Fn([$e(),ve(),be(ge,Ln),Mn("design:type",Object)],Xn.prototype,"$DeleteLine",void 0);class Zn extends te{constructor(){super()}set Value(t){this.$Value=t}get Value(){return this.$Value}set Remark(t){this.$Remark=t}get Remark(){return this.$Remark}set Text(t){this.$$Text=t}get Text(){return this.$$Text}}Fn([$e(),ve(),be(fe,Ce,{required:!0}),Mn("design:type",Object)],Zn.prototype,"$Value",void 0),Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],Zn.prototype,"$Remark",void 0),Fn([$e(),ve(),be(ge,Ce,{required:!0}),Mn("design:type",Object)],Zn.prototype,"$$Text",void 0);class Kn extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Name(t){this.$Name=t}get Name(){return this.$Name}set Option(t){this.$Option=t}get Option(){return this.$Option}}Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],Kn.prototype,"$ID",void 0),Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],Kn.prototype,"$Name",void 0),Fn([$e(),ve(),be(ge,Zn,{required:!0,multiple:!0}),Mn("design:type",Object)],Kn.prototype,"$Option",void 0);class Qn extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}}Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],Qn.prototype,"$ID",void 0);class Jn extends Xn{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Name(t){this.$Name=t}get Name(){return this.$Name}}Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],Jn.prototype,"$ID",void 0),Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],Jn.prototype,"$Name",void 0);class to extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set CustomDataName(t){this.$CustomDataName=t}get CustomDataName(){return this.$CustomDataName}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],to.prototype,"$ID",void 0),Fn([$e(),ve(),be(fe,Ce,{required:!0}),Mn("design:type",Object)],to.prototype,"$CustomDataName",void 0),Fn([$e(),ve(),be(ge,Ce,{required:!0}),Mn("design:type",Object)],to.prototype,"$$Value",void 0);class eo extends te{constructor(){super()}set CustomData(t){this.$CustomData=t}get CustomData(){return this.$CustomData}}Fn([$e(),ve(),be(ge,to,{required:!0,multiple:!0}),Mn("design:type",Object)],eo.prototype,"$CustomData",void 0);class io extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set CustomTagName(t){this.$CustomTagName=t}get CustomDataName(){return this.$CustomTagName}set CustomTagNameRef(t){this.$CustomTagNameRef=t}get CustomTagNameRef(){return this.$CustomTagNameRef}}Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],io.prototype,"$ID",void 0),Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],io.prototype,"$CustomTagName",void 0),Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],io.prototype,"$CustomTagNameRef",void 0);class no extends te{constructor(){super()}set CustomTag(t){this.$CustomTag=t}get CustomTag(){return this.$CustomTag}}Fn([$e(),ve(),be(ge,io,{required:!0,multiple:!0}),Mn("design:type",Object)],no.prototype,"$CustomTag",void 0);class oo extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set PageRef(t){this.$PageRef=t}get PageRef(){return this.$PageRef}set AutoHide(t){this.$AutoHide=t}get AutoHide(){return this.$AutoHide}set Value(t){this.$$Value=t}get Value(){return this.$$Value}set HomePageInstructions(t){this.$HomePageInstructions=t}get HomePageInstructions(){return this.$HomePageInstructions}}Fn([$e(),ve(),be(fe,Ce,{default:"None"}),Mn("design:type",String)],oo.prototype,"$Type",void 0),Fn([$e(),ve(),be(fe,xe),Mn("design:type",Object)],oo.prototype,"$PageRef",void 0),Fn([$e(),ve(),be(fe,De,{default:!1}),Mn("design:type",Object)],oo.prototype,"$AutoHide",void 0),Fn([$e(),ve(),be(ge,Ce),Mn("design:type",Object)],oo.prototype,"$$Value",void 0),Fn([$e(),ve(),be(fe,Ce),Mn("design:type",Object)],oo.prototype,"$HomePageInstructions",void 0);class ro extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set PageRef(t){this.$PageRef=t}get PageRef(){return this.$PageRef}set Value(t){this.$$Value=t}get Value(){return this.$$Value}set TailDataToEndTemplate(t){this.$TailDataToEndTemplate=t}get TailDataToEndTemplate(){return this.$TailDataToEndTemplate}}Fn([$e(),ve(),be(fe,Ce,{default:"None"}),Mn("design:type",String)],ro.prototype,"$Type",void 0),Fn([$e(),ve(),be(fe,xe),Mn("design:type",Object)],ro.prototype,"$PageRef",void 0),Fn([$e(),ve(),be(ge,Ce),Mn("design:type",Object)],ro.prototype,"$$Value",void 0),Fn([$e(),ve(),be(fe,De,{default:!1}),Mn("design:type",Object)],ro.prototype,"$TailDataToEndTemplate",void 0);class so extends te{constructor(){super()}set PageID(t){this.$PageID=t}get PageID(){return this.$PageID}set NextPage(t){this.$NextPage=t}get NextPage(){return this.$NextPage}set EndPage(t){this.$EndPage=t}get EndPage(){return this.$EndPage}set Overleaf(t){this.$Overleaf=t}get Overleaf(){return this.$Overleaf}}Fn([$e(),ve(),be(fe,xe,{required:!0}),Mn("design:type",Object)],so.prototype,"$PageID",void 0),Fn([$e(),ve(),be(ge,oo),Mn("design:type",oo)],so.prototype,"$NextPage",void 0),Fn([$e(),ve(),be(ge,ro),Mn("design:type",ro)],so.prototype,"$EndPage",void 0),Fn([$e(),ve(),be(ge,Ce),Mn("design:type",Object)],so.prototype,"$Overleaf",void 0);class ao extends te{constructor(){super()}set PageNumberStyleID(t){this.$PageNumberStyleID=t}get PageNumberStyleID(){return this.$PageNumberStyleID}set AutoAddCustomTag(t){this.$AutoAddCustomTag=t}get AutoAddCustomTag(){return this.$AutoAddCustomTag}set Style(t){this.$Style=t}get Style(){return this.$Style}set PageNumberStyle(t){this.$PageNumberStyle=t}get PageNumberStyle(){return this.$PageNumberStyle}set CustomDatas(t){this.$CustomDatas=t}get CustomDatas(){return this.$CustomDatas}set CustomTags(t){this.$CustomTags=t}get CustomTags(){return this.$CustomTags}set ContinuationPage(t){this.$ContinuationPage=t}get ContinuationPage(){return this.$ContinuationPage}}Fn([$e(),ve(),be(fe,xe,{default:0}),Mn("design:type",Object)],ao.prototype,"$PageNumberStyleID",void 0),Fn([$e(),ve(),be(fe,De,{default:!1}),Mn("design:type",Object)],ao.prototype,"$AutoAddCustomTag",void 0),Fn([$e(),ve(),be(ge,Jn,{multiple:!0}),Mn("design:type",Object)],ao.prototype,"$Style",void 0),Fn([$e(),ve(),be(ge,kn,{multiple:!0}),Mn("design:type",Object)],ao.prototype,"$PageNumberStyle",void 0),Fn([$e(),ve(),be(ge,eo),Mn("design:type",Object)],ao.prototype,"$CustomDatas",void 0),Fn([$e(),ve(),be(ge,no),Mn("design:type",Object)],ao.prototype,"$CustomTags",void 0),Fn([$e(),ve(),be(ge,so,{multiple:!0}),Mn("design:type",Object)],ao.prototype,"$ContinuationPage",void 0);var lo=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},uo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},co=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class ho extends te{constructor(){super()}set Name(t){this.$Name=t}get Name(){return this.$Name}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],ho.prototype,"$Name",void 0),lo([$e(),ve(),be(ge,Ce),uo("design:type",Object)],ho.prototype,"$$Value",void 0);class po extends te{constructor(){super()}set Parameter(t){this.$Parameter=t}get Parameter(){return this.$Parameter}}lo([$e(),ve(),be(ge,ho,{required:!0,multiple:!0}),uo("design:type",Object)],po.prototype,"$Parameter",void 0);class go extends te{constructor(){super()}set Visible(t){this.$Visible=t}get Visible(){return this.$Visible}set LineWidth(t){this.$LineWidth=t}get LineWidth(){return this.$LineWidth}set LineType(t){this.$LineType=t}get LineType(){return this.$LineType}set Fill(t){this.$Fill=t}get Fill(){return this.$Fill}set Stroke(t){this.$Stroke=t}get Stroke(){return this.$Stroke}set FillColor(t){this.$FillColor=t}get FillColor(){return this.$FillColor}set StrokeColor(t){this.$StrokeColor=t}get StrokeColor(){return this.$StrokeColor}}lo([$e(),ve(),be(fe,De,{default:!0}),uo("design:type",Object)],go.prototype,"$Visible",void 0),lo([$e(),ve(),be(fe,xe,{default:.353}),uo("design:type",Object)],go.prototype,"$LineWidth",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],go.prototype,"$Stroke",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],go.prototype,"$Fill",void 0),lo([$e(),ve(),be(fe,Ce,{default:"SolidLine"}),uo("design:type",String)],go.prototype,"$LineType",void 0),lo([$e(),ve(),be(ge,ai),uo("design:type",ai)],go.prototype,"$StrokeColor",void 0),lo([$e(),ve(),be(ge,ai),uo("design:type",ai)],go.prototype,"$FillColor",void 0);class fo extends te{constructor(){super(),this.Disabled=!1}set SubNum(t){this.$SubNum=t}get SubNum(){return this.$SubNum}set NoFill(t){this.$NoFill=t}get NoFill(){return this.$NoFill}set ID(t){this.$ID=t}get ID(){return this.$ID}set DataRef(t){this.$DataRef=t}get DataRef(){return this.$DataRef}set Boundary(t){this.$Boundary=t}get Boundary(){return this.$Boundary}set Padding(t){this.$Padding=t}get Padding(){return this.$Padding}set Visible(t){this.$Visible=t}get Visible(){return this.$Visible}set Printable(t){this.$Printable=t}get Printable(){return this.$Printable}set ZIndex(t){this.$ZIndex=t}get ZIndex(){return this.$ZIndex}set Name(t){this.$Name=t}get Name(){return this.$Name}set ExtendSize(t){this.$ExtendSize=t}get ExtendSize(){return this.$ExtendSize}set ExtendPadding(t){this.$ExtendPadding=t}get ExtendPadding(){return this.$ExtendPadding}set SaveAsAnnot(t){this.$SaveAsAnnot=t}get SaveAsAnnot(){return this.$SaveAsAnnot}set ImageDarken(t){this.$ImageDarken=t}get ImageDarken(){return this.$ImageDarken}set Top(t){this.$Top=t}get Top(){return this.$Top}set Append(t){this.$Append=t}get Append(){return this.$Append}set AppendSpace(t){this.$AppendSpace=t}get AppendSpace(){return this.$AppendSpace}set ReadOnly(t){this.$ReadOnly=t}get ReadOnly(){return this.$ReadOnly}set FillByGroupID(t){this.$FillByGroupID=t}get FillByGroupID(){return this.$FillByGroupID}set NextInfoRef(t){this.$NextInfoRef=t}get NextInfoRef(){return this.$NextInfoRef}set FieldBoundary(t){this.$FieldBoundary=t}get FieldBoundary(){return this.$FieldBoundary}set Background(t){this.$Background=t}get Background(){return this.$Background}set Color(t){this.$Color=t}get Color(){return this.$Color}set Parameters(t){this.$Parameters=t}get Parameters(){return this.$Parameters}set CustomTagName(t){this.$CustomTagName=t}get CustomTagName(){return this.$CustomTagName}set CustomTagNameRef(t){this.$CustomTagNameRef=t}get CustomTagNameRef(){return this.$CustomTagNameRef}set FieldName(t){this.$FieldName=t}get FieldName(){return this.$FieldName}}lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],fo.prototype,"$NoFill",void 0),lo([$e(),ve(),be(fe,xe,{required:!0}),uo("design:type",Object)],fo.prototype,"$ID",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],fo.prototype,"$DataRef",void 0),lo([$e(),ve(),be(fe,Oe,{required:!0}),uo("design:type",Object)],fo.prototype,"$Boundary",void 0),lo([$e(),ve(),be(fe,Oe),uo("design:type",Object)],fo.prototype,"$Padding",void 0),lo([$e(),ve(),be(fe,De,{default:!0}),uo("design:type",Object)],fo.prototype,"$Visible",void 0),lo([$e(),ve(),be(fe,De,{default:!0}),uo("design:type",Object)],fo.prototype,"$Printable",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],fo.prototype,"$ZIndex",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],fo.prototype,"$Name",void 0),lo([$e(),ve(),be(fe,Oe),uo("design:type",Object)],fo.prototype,"$ExtendSize",void 0),lo([$e(),ve(),be(fe,Oe),uo("design:type",Object)],fo.prototype,"$ExtendPadding",void 0),lo([$e(),ve(),be(fe,De),uo("design:type",Object)],fo.prototype,"$SaveAsAnnot",void 0),lo([$e(),ve(),be(fe,De),uo("design:type",Object)],fo.prototype,"$ImageDarken",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],fo.prototype,"$Top",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],fo.prototype,"$Append",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],fo.prototype,"$AppendSpace",void 0),lo([$e(),ve(),be(fe,De,{required:!0,default:!0}),uo("design:type",Object)],fo.prototype,"$ReadOnly",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],fo.prototype,"$FillByGroupID",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],fo.prototype,"$NextInfoRef",void 0),lo([$e(),ve(),be(ge,ai),uo("design:type",ai)],fo.prototype,"$Background",void 0),lo([$e(),ve(),be(ge,ai),uo("design:type",ai)],fo.prototype,"$Color",void 0),lo([$e(),ve(),be(ge,po),uo("design:type",po)],fo.prototype,"$Parameters",void 0),lo([$e(),ve(),be(ge,go),uo("design:type",go)],fo.prototype,"$FieldBoundary",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],fo.prototype,"$SubNum",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],fo.prototype,"$CustomTagName",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],fo.prototype,"$CustomTagNameRef",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],fo.prototype,"$FieldName",void 0);class yo extends te{constructor(){super()}set FormatType(t){this.$FormatType=t}get FormatType(){return this.$FormatType}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}lo([$e(),ve(),be(fe,Ce,{default:"Custom"}),uo("design:type",String)],yo.prototype,"$FormatType",void 0),lo([$e(),ve(),be(ge,Ce,{CDATA:!0}),uo("design:type",Object)],yo.prototype,"$$Value",void 0);class mo extends yo{constructor(){super()}}lo([$e(),ve(),be(ge,Ce,{CDATA:!0}),uo("design:type",Object)],mo.prototype,"$$Value",void 0);class vo extends te{constructor(){super()}set Length(t){this.$Length=t}get Length(){return this.$Length}set Suffix(t){this.$Suffix=t}get Suffix(){return this.$Suffix}}lo([$e(),ve(),be(fe,xe,{required:!0}),uo("design:type",Object)],vo.prototype,"$Length",void 0),lo([$e(),ve(),be(ge,Ce),uo("design:type",Object)],vo.prototype,"$Suffix",void 0);class $o extends te{constructor(){super()}set Length(t){this.$Length=t}get Length(){return this.$Length}set AverageLines(t){this.$AverageLines=t}get AverageLines(){return this.$AverageLines}set MaxRowCount(t){this.$MaxRowCount=t}get MaxRowCount(){return this.$MaxRowCount}set LineSpace(t){this.$LineSpace=t}get LineSpace(){return this.$LineSpace}}lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],$o.prototype,"$Length",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],$o.prototype,"$AverageLines",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],$o.prototype,"$MaxRowCount",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],$o.prototype,"$LineSpace",void 0);class bo extends te{constructor(){super()}set Min(t){this.$Min=t}get Min(){return this.$Min}set Max(t){this.$Max=t}get Max(){return this.$Max}set FontName(t){this.$FontName=t}get FontName(){return this.$FontName}set FontSize(t){this.$FontSize=t}get FontSize(){return this.$FontSize}}lo([$e(),ve(),be(fe,xe,{required:!0}),uo("design:type",Object)],bo.prototype,"$Min",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],bo.prototype,"$Max",void 0),lo([$e(),ve(),be(fe,Ce,{default:""}),uo("design:type",Object)],bo.prototype,"$FontName",void 0),lo([$e(),ve(),be(fe,xe,{default:12}),uo("design:type",Object)],bo.prototype,"$FontSize",void 0);class wo extends te{constructor(){super()}set MaxRowCount(t){this.$MaxRowCount=t}get MaxRowCount(){return this.$MaxRowCount}set Rule(t){this.$Rule=t}get Rule(){return this.$Rule}}lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],wo.prototype,"$MaxRowCount",void 0),lo([$e(),ve(),be(ge,bo,{required:!0,multiple:!0}),uo("design:type",Object)],wo.prototype,"$Rule",void 0);class xo extends te{constructor(){super()}set Separator(t){this.$Separator=t}get Separator(){return this.$Separator}set MinColSpace(t){this.$MinColSpace=t}get MinColSpace(){return this.$MinColSpace}set LineSpace(t){this.$LineSpace=t}get LineSpace(){return this.$LineSpace}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],xo.prototype,"$Separator",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],xo.prototype,"$MinColSpace",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],xo.prototype,"$LineSpace",void 0);class Co extends te{constructor(){super()}set MinFontSize(t){this.$MinFontSize=t}get MinFontSize(){return this.$MinFontSize}set DeltaSize(t){this.$DeltaSize=t}get DeltaSize(){return this.$DeltaSize}set ResizeFontFirst(t){this.$ResizeFontFirst=t}get ResizeFontFirst(){return this.$ResizeFontFirst}set MaxRowCount(t){this.$MaxRowCount=t}get MaxRowCount(){return this.$MaxRowCount}set LineSpace(t){this.$LineSpace=t}get LineSpace(){return this.$LineSpace}}lo([$e(),ve(),be(fe,xe,{default:1.764}),uo("design:type",Object)],Co.prototype,"$MinFontSize",void 0),lo([$e(),ve(),be(fe,xe,{default:.353}),uo("design:type",Object)],Co.prototype,"$DeltaSize",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Co.prototype,"$ResizeFontFirst",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],Co.prototype,"$MaxRowCount",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],Co.prototype,"$LineSpace",void 0);class Do extends te{constructor(){super()}set Cutoff(t){this.$Cutoff=t}get Cutoff(){return this.$Cutoff}set Wrap(t){this.$Wrap=t}get Wrap(){return this.$Wrap}set Rules(t){this.$Rules=t}get Rules(){return this.$Rules}set AutoGroup(t){this.$AutoGroup=t}get AutoGroup(){return this.$AutoGroup}set FitBoundary(t){this.$FitBoundary=t}get FitBoundary(){return this.$FitBoundary}}lo([$e(),ve(),be(ge,vo),uo("design:type",vo)],Do.prototype,"$Cutoff",void 0),lo([$e(),ve(),be(ge,$o),uo("design:type",$o)],Do.prototype,"$Wrap",void 0),lo([$e(),ve(),be(ge,wo),uo("design:type",wo)],Do.prototype,"$Rules",void 0),lo([$e(),ve(),be(ge,xo),uo("design:type",xo)],Do.prototype,"$AutoGroup",void 0),lo([$e(),ve(),be(ge,Co),uo("design:type",Co)],Do.prototype,"$FitBoundary",void 0);class Oo extends te{constructor(){super()}set ENCharLength(t){this.$ENCharLength=t}get ENCharLength(){return this.$ENCharLength}set CNCharLength(t){this.$CNCharLength=t}get CNCharLength(){return this.$CNCharLength}set PaddingChar(t){this.$PaddingChar=t}get PaddingChar(){return this.$PaddingChar}set NewlineCharacter(t){this.$NewlineCharacter=t}get NewlineCharacter(){return this.$NewlineCharacter}set DeltaX(t){this.$DeltaX=t}get DeltaX(){return this.$DeltaX}set DeltaY(t){this.$DeltaY=t}get DeltaY(){return this.$DeltaY}set Choice(t){this.$Choice=t}get Choice(){return this.$Choice}}lo([$e(),ve(),be(fe,xe,{default:1}),uo("design:type",Object)],Oo.prototype,"$ENCharLength",void 0),lo([$e(),ve(),be(fe,xe,{default:2}),uo("design:type",Object)],Oo.prototype,"$CNCharLength",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Oo.prototype,"$PaddingChar",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Oo.prototype,"$NewlineCharacter",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],Oo.prototype,"$DeltaX",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],Oo.prototype,"$DeltaY",void 0),lo([$e(),ve(),be(ye,Do,{required:!0}),uo("design:type",Do)],Oo.prototype,"$Choice",void 0);class Po extends te{constructor(){super()}set FontName(t){this.$FontName=t}get FontName(){return this.$FontName}set FontSize(t){this.$FontSize=t}get FontSize(){return this.$FontSize}set Weight(t){this.$Weight=t}get Weight(){return this.$Weight}set Italic(t){this.$Italic=t}get Italic(){return this.$Italic}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Po.prototype,"$FontName",void 0),lo([$e(),ve(),be(fe,xe,{default:1}),uo("design:type",Object)],Po.prototype,"$FontSize",void 0),lo([$e(),ve(),be(fe,xe,{default:400}),uo("design:type",Number)],Po.prototype,"$Weight",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Po.prototype,"$Italic",void 0);class So extends te{constructor(){super()}set LineWidth(t){this.$LineWidth=t}get LineWidth(){return this.$LineWidth}set LineType(t){this.$LineType=t}get LineType(){return this.$LineType}set Color(t){this.$Color=t}get Color(){return this.$Color}}lo([$e(),ve(),be(fe,xe,{default:.353}),uo("design:type",Object)],So.prototype,"$LineWidth",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],So.prototype,"$LineType",void 0),lo([$e(),ve(),be(ge,ai),uo("design:type",ai)],So.prototype,"$Color",void 0);class Io extends te{constructor(){super()}set Name(t){this.$Name=t}get Name(){return this.$Name}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Io.prototype,"$Name",void 0),lo([$e(),ve(),be(ge,Ce),uo("design:type",Object)],Io.prototype,"$$Value",void 0);class To extends te{constructor(){super()}set Escape(t){this.$Escape=t}get Escape(){return this.$Escape}}lo([$e(),ve(),be(ge,Io,{required:!0,multiple:!0}),uo("design:type",Object)],To.prototype,"$Escape",void 0);class Ro extends te{constructor(){super()}set CharSet(t){this.$CharSet=t}get CharSet(){return this.$CharSet}set Value(t){this.$$Value=t}get Value(){return this.$$Value}set ID(t){this.$ID=t}get ID(){return this.$ID}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Ro.prototype,"$CharSet",void 0),lo([$e(),ve(),be(ge,Ce),uo("design:type",Object)],Ro.prototype,"$$Value",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Ro.prototype,"$ID",void 0);class jo extends te{constructor(){super()}set Font(t){this.$Font=t}get Font(){return this.$Font}find(t){return co(this,void 0,void 0,(function*(){if(this.Font&&t)for(const e of this.Font)if(e&&e.ID==t)return e}))}}lo([$e(),ve(),be(ge,Ro,{multiple:!0}),uo("design:type",Object)],jo.prototype,"$Font",void 0);class Ao extends te{constructor(){super()}set EachLength(t){this.$EachLength=t}get EachLength(){return this.$EachLength}}lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],Ao.prototype,"$EachLength",void 0);class Fo extends te{constructor(){super()}set Content(t){this.$Content=t}get Content(){return this.$Content}set DataRef(t){this.$DataRef=t}get DataRef(){return this.$DataRef}set Escapes(t){this.$Escapes=t}get Escapes(){return this.$Escapes}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Fo.prototype,"$Content",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Fo.prototype,"$DataRef",void 0),lo([$e(),ve(),be(ge,To,{required:!0}),uo("design:type",To)],Fo.prototype,"$Escapes",void 0);class Mo extends te{constructor(){super()}set RightPadding(t){this.$RightPadding=t}get RightPadding(){return this.$RightPadding}set DataRef(t){this.$DataRef=t}get DataRef(){return this.$DataRef}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Mo.prototype,"$DataRef",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],Mo.prototype,"$RightPadding",void 0);class Bo extends fo{constructor(){super()}name(){return"TextBox"}viewName(){return"TextBox"}set FontName(t){this.$FontName=t}get FontName(){return this.$FontName}set FontSize(t){this.$FontSize=t}get FontSize(){return this.$FontSize}set Weight(t){this.$Weight=t}get Weight(){return this.$Weight}set Italic(t){this.$Italic=t}get Italic(){return this.$Italic}get FontColor(){return this.Color}set FontColor(t){this.Color=t}set CheckBox(t){this.$CheckBox=t}get CheckBox(){return this.$CheckBox}set HorizontalAlign(t){this.$HorizontalAlign=t}get HorizontalAlign(){return this.$HorizontalAlign}set VerticalAlign(t){this.$VerticalAlign=t}get VerticalAlign(){return this.$VerticalAlign}set LetterSpacing(t){this.$LetterSpacing=t}get LetterSpacing(){return this.$LetterSpacing}set CompositionType(t){this.$CompositionType=t}get CompositionType(){return this.$CompositionType}set VerticalCharRotate(t){this.$VerticalCharRotate=t}get VerticalCharRotate(){return this.$VerticalCharRotate}set VerticalDirection(t){this.$VerticalDirection=t}get VerticalDirection(){return this.$VerticalDirection}set CharDirection(t){this.$CharDirection=t}get CharDirection(){return this.$CharDirection}set ReadDirection(t){this.$ReadDirection=t}get ReadDirection(){return this.$ReadDirection}set Indent(t){this.$Indent=t}get Indent(){return this.$Indent}set SaveAsFreeText(t){this.$SaveAsFreeText=t}get SaveAsFreeText(){return this.$SaveAsFreeText}set CustomDataName(t){this.$CustomDataName=t}get CustomDataName(){return this.$CustomDataName}set Format(t){this.$Format=t}get Format(){return this.$Format}set Layout(t){this.$Layout=t}get Layout(){return this.$Layout}set Value(t){this.$Value=t}get Value(){return this.$Value}set Symbol(t){this.$Symbol=t}get Symbol(){return this.$Symbol}set UnderLine(t){this.$UnderLine=t}get UnderLine(){return this.$UnderLine}set DeleteLine(t){this.$DeleteLine=t}get DeleteLine(){return this.$DeleteLine}set Escapes(t){this.$Escapes=t}get Escapes(){return this.$Escapes}set TextSeparator(t){this.$TextSeparator=t}get TextSeparator(){return this.$TextSeparator}set Prefix(t){this.$Prefix=t}get Prefix(){return this.$Prefix}set Suffix(t){this.$Suffix=t}get Suffix(){return this.$Suffix}set AttachedContent(t){this.$AttachedContent=t}get AttachedContent(){return this.$AttachedContent}set Actions(t){this.$Actions=t}get Actions(){return this.$Actions}set ExtendFonts(t){this.$ExtendFonts=t}get ExtendFonts(){return this.$ExtendFonts}newActionURI(){var t;this.Actions=null!==(t=this.Actions)&&void 0!==t?t:this.makeModel(oi);const e=this.Actions.newAction();e.Event="CLICK",e.Choice=e.makeModel(ii,!0);const i=e.Choice.makeModel(Ye,!0);return e.Choice.URI=i,i}getActionURI(){var t,e,i,n;return null===(n=null===(i=null===(e=null===(t=this.Actions)||void 0===t?void 0:t.Action)||void 0===e?void 0:e.toArray().filter((t=>{var e;return!!(null===(e=t.Choice)||void 0===e?void 0:e.URI)})).pop())||void 0===i?void 0:i.Choice)||void 0===n?void 0:n.URI}}lo([$e(),ve(),be(fe,Ce,{required:!0,default:""}),uo("design:type",Object)],Bo.prototype,"$FontName",void 0),lo([$e(),ve(),be(fe,xe,{default:12}),uo("design:type",Object)],Bo.prototype,"$FontSize",void 0),lo([$e(),ve(),be(fe,xe,{default:400}),uo("design:type",Number)],Bo.prototype,"$Weight",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Bo.prototype,"$Italic",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Bo.prototype,"$CheckBox",void 0),lo([$e(),ve(),be(fe,Ce,{default:"Left"}),uo("design:type",String)],Bo.prototype,"$HorizontalAlign",void 0),lo([$e(),ve(),be(fe,Ce,{default:"Middle",required:!0}),uo("design:type",String)],Bo.prototype,"$VerticalAlign",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],Bo.prototype,"$LetterSpacing",void 0),lo([$e(),ve(),be(fe,Ce,{default:"Horizontal"}),uo("design:type",String)],Bo.prototype,"$CompositionType",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Bo.prototype,"$VerticalCharRotate",void 0),lo([$e(),ve(),be(fe,Ce,{default:"Left"}),uo("design:type",String)],Bo.prototype,"$VerticalDirection",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],Bo.prototype,"$CharDirection",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],Bo.prototype,"$ReadDirection",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],Bo.prototype,"$Indent",void 0),lo([$e(),ve(),be(fe,De),uo("design:type",Object)],Bo.prototype,"$SaveAsFreeText",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Bo.prototype,"$CustomDataName",void 0),lo([$e(),ve(),be(ge,yo),uo("design:type",yo)],Bo.prototype,"$Format",void 0),lo([$e(),ve(),be(ge,Oo),uo("design:type",Oo)],Bo.prototype,"$Layout",void 0),lo([$e(),ve(),be(ge,Ce),uo("design:type",Object)],Bo.prototype,"$Value",void 0),lo([$e(),ve(),be(ge,Po),uo("design:type",Po)],Bo.prototype,"$Symbol",void 0),lo([$e(),ve(),be(ge,So),uo("design:type",So)],Bo.prototype,"$UnderLine",void 0),lo([$e(),ve(),be(ge,So),uo("design:type",So)],Bo.prototype,"$DeleteLine",void 0),lo([$e(),ve(),be(ge,To),uo("design:type",To)],Bo.prototype,"$Escapes",void 0),lo([$e(),ve(),be(ge,Ao),uo("design:type",Ao)],Bo.prototype,"$TextSeparator",void 0),lo([$e(),ve(),be(ge,Fo),uo("design:type",Fo)],Bo.prototype,"$Prefix",void 0),lo([$e(),ve(),be(ge,Fo),uo("design:type",Fo)],Bo.prototype,"$Suffix",void 0),lo([$e(),ve(),be(ge,Mo),uo("design:type",Mo)],Bo.prototype,"$AttachedContent",void 0),lo([$e(),ve(),be(ge,oi),uo("design:type",oi)],Bo.prototype,"$Actions",void 0),lo([$e(),ve(),be(ge,jo),uo("design:type",jo)],Bo.prototype,"$ExtendFonts",void 0);class ko extends Bo{constructor(){super()}name(){return"NumberBox"}set RoundMode(t){this.$RoundMode=t}get RoundMode(){return this.$RoundMode}set DisplayFormat(t){this.$DisplayFormat=t}get DisplayFormat(){return this.$DisplayFormat}set FormatType(t){this.$FormatType=t}get FormatType(){return this.$FormatType}}lo([$e(),ve(),be(fe,Ce),uo("design:type",String)],ko.prototype,"$RoundMode",void 0),lo([$e(),ve(),be(fe,Ce,{default:"None"}),uo("design:type",String)],ko.prototype,"$DisplayFormat",void 0),lo([$e(),ve(),be(fe,Ce,{default:"None"}),uo("design:type",String)],ko.prototype,"$FormatType",void 0),lo([$e(),ve(),be(fe,Ce,{default:!1}),uo("design:type",Object)],ko.prototype,"$SumFieldID",void 0),lo([$e(),ve(),be(fe,Ce,{default:"SumPage"}),uo("design:type",String)],ko.prototype,"$SumType",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Boolean)],ko.prototype,"$SpecialConfig",void 0);class Lo extends ko{constructor(){super()}}lo([$e(),ve(),be(ge,mo),uo("design:type",mo)],Lo.prototype,"$Format",void 0);class No extends Bo{constructor(){super()}}class Eo extends Bo{constructor(){super()}name(){return"DateBox"}set DisplayFormat(t){this.$DisplayFormat=t}get DisplayFormat(){return this.$DisplayFormat}set InputFormat(t){this.$InputFormat=t}get InputFormat(){return this.$InputFormat}}lo([$e(),ve(),be(fe,Ce,{default:"None"}),uo("design:type",String)],Eo.prototype,"$DisplayFormat",void 0),lo([$e(),ve(),be(ge,Ce),uo("design:type",Object)],Eo.prototype,"$InputFormat",void 0);class _o extends Bo{constructor(){super()}name(){return"HolderBox"}set Rule(t){this.$Rule=t}get Rule(){return this.$Rule}set Condition(t){this.$Condition=t}get Condition(){return this.$Condition}set SelectValue(t){this.$SelectValue=t}get SelectValue(){return this.$SelectValue}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],_o.prototype,"$Rule",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],_o.prototype,"$Condition",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],_o.prototype,"$SelectValue",void 0);class Vo extends fo{constructor(){super()}name(){return"ImageBox"}viewName(){return"ImageBox"}set Format(t){this.$Format=t}get Format(){return this.$Format}set ValueType(t){this.$ValueType=t}get ValueType(){return this.$ValueType}set Mask(t){this.$Mask=t}get Mask(){return this.$Mask}set SignStamp(t){this.$SignStamp=t}get SignStamp(){return this.$SignStamp}set TileMode(t){this.$TileMode=t}get TileMode(){return this.$TileMode}set Value(t){this.$Value=t}get Value(){return this.$Value}set BlendMode(t){this.$BlendMode=t}get BlendMode(){return this.$BlendMode}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Vo.prototype,"$Format",void 0),lo([$e(),ve(),be(fe,Ce,{required:!0,default:"Base64"}),uo("design:type",String)],Vo.prototype,"$ValueType",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],Vo.prototype,"$Mask",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Vo.prototype,"$SignStamp",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",String)],Vo.prototype,"$TileMode",void 0),lo([$e(),ve(),be(ge,Ce),uo("design:type",Object)],Vo.prototype,"$Value",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Vo.prototype,"$BlendMode",void 0);class qo extends Vo{constructor(){super()}name(){return"BarcodeBox"}set Generator(t){this.$Generator=t}get Generator(){return this.$Generator}set SubType(t){this.$SubType=t}get SubType(){return this.$SubType}}lo([$e(),ve(),be(fe,Ce,{default:"None"}),uo("design:type",String)],qo.prototype,"$Generator",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],qo.prototype,"$SubType",void 0);class Go extends Vo{constructor(){super()}name(){return"SealBox"}set SealID(t){this.$SealID=t}get SealID(){return this.$SealID}set SealType(t){this.$SealType=t}get SealType(){return this.$SealType}set Provider(t){this.$Provider=t}get Provider(){return this.$Provider}set Password(t){this.$Password=t}get Password(){return this.$Password}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Go.prototype,"$SealID",void 0),lo([$e(),ve(),be(fe,Ce,{default:"Normal"}),uo("design:type",String)],Go.prototype,"$SealType",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Go.prototype,"$Provider",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Go.prototype,"$Password",void 0);class zo extends Vo{constructor(){super()}name(){return"OFDBox"}set FixedType(t){this.$FixedType=t}get FixedType(){return this.$FixedType}}lo([$e(),ve(),be(fe,Ce,{default:"OFD"}),uo("design:type",String)],zo.prototype,"$FixedType",void 0);class Uo extends te{constructor(){super()}set TextBox(t){this.$TextBox=t}get TextBox(){return this.$TextBox}set NumberBox(t){this.$NumberBox=t}get NumberBox(){return this.$NumberBox}set DateBox(t){this.$DateBox=t}get DateBox(){return this.$DateBox}set HolderBox(t){this.$HolderBox=t}get HolderBox(){return this.$HolderBox}set ImageBox(t){this.$ImageBox=t}get ImageBox(){return this.$ImageBox}set BarcodeBox(t){this.$BarcodeBox=t}get BarcodeBox(){return this.$BarcodeBox}set SealBox(t){this.$SealBox=t}get SealBox(){return this.$SealBox}set OFDBox(t){this.$OFDBox=t}get OFDBox(){return this.$OFDBox}set PageIndexBox(t){this.$PageIndexBox=t}get PageIndexBox(){return this.$PageIndexBox}set CheckboxBox(t){this.$CheckboxBox=t}get CheckboxBox(){return this.$CheckboxBox}available(){var t,e,i,n,o,r,s,a,l;return null!==(l=null!==(a=null!==(s=null!==(r=null!==(o=null!==(n=null!==(i=null!==(e=null!==(t=this.TextBox)&&void 0!==t?t:this.NumberBox)&&void 0!==e?e:this.DateBox)&&void 0!==i?i:this.HolderBox)&&void 0!==n?n:this.ImageBox)&&void 0!==o?o:this.BarcodeBox)&&void 0!==r?r:this.SealBox)&&void 0!==s?s:this.OFDBox)&&void 0!==a?a:this.PageIndexBox)&&void 0!==l?l:this.CheckboxBox}setField(t){switch(t.name()){case"TextBox":return this.TextBox=t,!0;case"NumberBox":return this.NumberBox=t,!0;case"DateBox":return this.DateBox=t,!0;case"HolderBox":return this.HolderBox=t,!0;case"ImageBox":return this.ImageBox=t,!0;case"BarcodeBox":return this.BarcodeBox=t,!0;case"SealBox":return this.SealBox=t,!0;case"OFDBox":return this.OFDBox=t,!0;case"PageIndexBox":return this.PageIndexBox=t,!0;case"CheckboxBox":return this.CheckboxBox=t,!0}return!1}make(t){switch(t){case"TextBox":return this.makeModel(Bo,!0);case"NumberBox":return this.makeModel(ko,!0);case"DateBox":return this.makeModel(Eo,!0);case"HolderBox":return this.makeModel(_o,!0);case"ImageBox":return this.makeModel(Vo,!0);case"BarcodeBox":return this.makeModel(qo,!0);case"SealBox":return this.makeModel(Go,!0);case"OFDBox":return this.makeModel(zo,!0);case"PageIndexBox":return this.makeModel(Lo,!0);case"CheckboxBox":return this.makeModel(No,!0)}return null}}lo([$e(),ve(),be(ge,Bo),uo("design:type",Bo)],Uo.prototype,"$TextBox",void 0),lo([$e(),ve(),be(ge,ko),uo("design:type",ko)],Uo.prototype,"$NumberBox",void 0),lo([$e(),ve(),be(ge,Eo),uo("design:type",Eo)],Uo.prototype,"$DateBox",void 0),lo([$e(),ve(),be(ge,_o),uo("design:type",_o)],Uo.prototype,"$HolderBox",void 0),lo([$e(),ve(),be(ge,Vo),uo("design:type",Vo)],Uo.prototype,"$ImageBox",void 0),lo([$e(),ve(),be(ge,qo),uo("design:type",qo)],Uo.prototype,"$BarcodeBox",void 0),lo([$e(),ve(),be(ge,Go),uo("design:type",Go)],Uo.prototype,"$SealBox",void 0),lo([$e(),ve(),be(ge,zo),uo("design:type",zo)],Uo.prototype,"$OFDBox",void 0),lo([$e(),ve(),be(ge,Lo),uo("design:type",Lo)],Uo.prototype,"$PageIndexBox",void 0),lo([$e(),ve(),be(ge,No),uo("design:type",No)],Uo.prototype,"$CheckboxBox",void 0);class Wo extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set AutoDataRef(t){this.$AutoDataRef=t}get AutoDataRef(){return this.$AutoDataRef}}lo([$e(),ve(),be(fe,xe,{required:!0}),uo("design:type",Object)],Wo.prototype,"$ID",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Wo.prototype,"$AutoDataRef",void 0);class Ho extends te{constructor(){super()}set EndTemplate(t){this.$EndTemplate=t}get EndTemplate(){return this.$EndTemplate}set NextTemplate(t){this.$NextTemplate=t}get NextTemplate(){return this.$NextTemplate}set HomeTemplate(t){this.$HomeTemplate=t}get HomeTemplate(){return this.$HomeTemplate}set BackFileLoc(t){this.$BackFileLoc=t}get BackFileLoc(){return this.$BackFileLoc}set ItemAllInList(t){this.$ItemAllInList=t}get ItemAllInList(){return this.$ItemAllInList}set GroupTagName(t){this.$GroupTagName=t}get GroupTagName(){return this.$GroupTagName}set GroupSpace(t){this.$GroupSpace=t}get GroupSpace(){return this.$GroupSpace}set Direction(t){this.$Direction=t}get Direction(){return this.$Direction}set LineSpace(t){this.$LineSpace=t}get LineSpace(){return this.$LineSpace}set MaxRowCount(t){this.$MaxRowCount=t}get MaxRowCount(){return this.$MaxRowCount}set TailDataToEndTemplate(t){this.$TailDataToEndTemplate=t}get TailDataToEndTemplate(){return this.$TailDataToEndTemplate}set WrapInCurLine(t){this.$WrapInCurLine=t}get WrapInCurLine(){return this.$WrapInCurLine}set HomeGroup(t){this.$HomeGroup=t}get HomeGroup(){return this.$HomeGroup}set Boundary(t){this.$Boundary=t}get Boundary(){return this.$Boundary}}lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Ho.prototype,"$EndTemplate",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Ho.prototype,"$NextTemplate",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Ho.prototype,"$HomeTemplate",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Ho.prototype,"$BackFileLoc",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Ho.prototype,"$ItemAllInList",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Ho.prototype,"$GroupTagName",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],Ho.prototype,"$GroupSpace",void 0),lo([$e(),ve(),be(fe,Ce,{default:"bottom",required:!0}),uo("design:type",String)],Ho.prototype,"$Direction",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],Ho.prototype,"$LineSpace",void 0),lo([$e(),ve(),be(fe,xe,{default:0}),uo("design:type",Object)],Ho.prototype,"$MaxRowCount",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Ho.prototype,"$TailDataToEndTemplate",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Ho.prototype,"$WrapInCurLine",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Ho.prototype,"$HomeGroup",void 0),lo([$e(),ve(),be(fe,Oe),uo("design:type",Object)],Ho.prototype,"$Boundary",void 0);class Yo extends te{constructor(){super(),this.ZIndex=0,this.Disabled=!1}name(){return"GroupBox"}freeOutFun(t){var e,i;return co(this,void 0,void 0,(function*(){if(t)null===(e=this.parent.Group)||void 0===e||e.add(t);else{const t=this.clone();t.Type="SubGroup",null===(i=this.parent.Group)||void 0===i||i.add(t)}return this}))}freeOutFunExit(t){var e,i,n;return co(this,void 0,void 0,(function*(){let o=this,r=null===(e=this.parent.Group)||void 0===e?void 0:e.toArray().find((t=>"SubGroup"===t.Type&&t.ID===o.SubGroupID));return t&&(o=t,r=null===(i=this.parent.Group)||void 0===i?void 0:i.toArray().find((t=>"SubGroup"===t.Type&&t.ID===o.ID))),r&&(null===(n=this.parent.Group)||void 0===n||n.remove(r)),this}))}set ID(t){this.$ID=t}get ID(){return this.$ID}set SubGroupID(t){this.$SubGroupID=t}get SubGroupID(){return this.$SubGroupID}set Type(t){this.$Type=t}get Type(){return this.$Type}set Field(t){this.$Field=t}get Field(){return this.$Field}set Extend(t){this.$Extend=t}get Extend(){return this.$Extend}}lo([$e(),ve(),be(fe,xe,{required:!0}),uo("design:type",Object)],Yo.prototype,"$ID",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],Yo.prototype,"$SubGroupID",void 0),lo([$e(),ve(),be(fe,Ce,{default:"Text"}),uo("design:type",String)],Yo.prototype,"$Type",void 0),lo([$e(),ve(),be(ge,Wo,{multiple:!0}),uo("design:type",Object)],Yo.prototype,"$Field",void 0),lo([$e(),ve(),be(ge,Ho),uo("design:type",Ho)],Yo.prototype,"$Extend",void 0);class Xo extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set CustomTagName(t){this.$CustomTagName=t}get CustomTagName(){return this.$CustomTagName}set CustomTagNameRef(t){this.$CustomTagNameRef=t}get CustomTagNameRef(){return this.$CustomTagNameRef}}lo([$e(),ve(),be(fe,xe,{required:!0}),uo("design:type",Object)],Xo.prototype,"$ID",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Xo.prototype,"$CustomTagName",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Xo.prototype,"$CustomTagNameRef",void 0);class Zo extends te{constructor(){super()}set CustomTag(t){this.$CustomTag=t}get CustomTag(){return this.$CustomTag}}lo([$e(),ve(),be(ge,Xo,{required:!0,multiple:!0}),uo("design:type",Object)],Zo.prototype,"$CustomTag",void 0);class Ko extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set CustomDataName(t){this.$CustomDataName=t}get CustomDataName(){return this.$CustomDataName}}lo([$e(),ve(),be(fe,xe,{required:!0}),uo("design:type",Object)],Ko.prototype,"$ID",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Ko.prototype,"$CustomDataName",void 0);class Qo extends te{constructor(){super()}set CustomData(t){this.$CustomData=t}get CustomData(){return this.$CustomData}}lo([$e(),ve(),be(ge,Ko,{required:!0,multiple:!0}),uo("design:type",Object)],Qo.prototype,"$CustomData",void 0);class Jo extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set PageRef(t){this.$PageRef=t}get PageRef(){return this.$PageRef}set AutoHide(t){this.$AutoHide=t}get AutoHide(){return this.$AutoHide}set Value(t){this.$$Value=t}get Value(){return this.$$Value}set HomePageInstructions(t){this.$HomePageInstructions=t}get HomePageInstructions(){return this.$HomePageInstructions}}lo([$e(),ve(),be(fe,Ce,{default:"None"}),uo("design:type",String)],Jo.prototype,"$Type",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],Jo.prototype,"$PageRef",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],Jo.prototype,"$AutoHide",void 0),lo([$e(),ve(),be(ge,Ce),uo("design:type",Object)],Jo.prototype,"$$Value",void 0),lo([$e(),ve(),be(fe,Ce),uo("design:type",Object)],Jo.prototype,"$HomePageInstructions",void 0);class tr extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set PageRef(t){this.$PageRef=t}get PageRef(){return this.$PageRef}set Value(t){this.$$Value=t}get Value(){return this.$$Value}set TailDataToEndTemplate(t){this.$TailDataToEndTemplate=t}get TailDataToEndTemplate(){return this.$TailDataToEndTemplate}}lo([$e(),ve(),be(fe,Ce,{default:"None"}),uo("design:type",String)],tr.prototype,"$Type",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],tr.prototype,"$PageRef",void 0),lo([$e(),ve(),be(ge,Ce),uo("design:type",Object)],tr.prototype,"$$Value",void 0),lo([$e(),ve(),be(fe,De,{default:!1}),uo("design:type",Object)],tr.prototype,"$TailDataToEndTemplate",void 0);class er extends te{constructor(){super()}set Type(t){this.$Type=t}get Type(){return this.$Type}set PageRef(t){this.$PageRef=t}get PageRef(){return this.$PageRef}}lo([$e(),ve(),be(fe,Ce,{default:"None"}),uo("design:type",String)],er.prototype,"$Type",void 0),lo([$e(),ve(),be(fe,xe),uo("design:type",Object)],er.prototype,"$PageRef",void 0);class ir extends te{constructor(){super()}set NextPage(t){this.$NextPage=t}get NextPage(){return this.$NextPage}set EndPage(t){this.$EndPage=t}get EndPage(){return this.$EndPage}set BackPage(t){this.$BackPage=t}get BackPage(){return this.$BackPage}}lo([$e(),ve(),be(ge,Jo),uo("design:type",Jo)],ir.prototype,"$NextPage",void 0),lo([$e(),ve(),be(ge,tr),uo("design:type",tr)],ir.prototype,"$EndPage",void 0),lo([$e(),ve(),be(ge,er),uo("design:type",er)],ir.prototype,"$BackPage",void 0);const nr="Tpls/Tpl_{index}/",or=nr+"Form.xml";let rr=class extends te{constructor(t=!1){super({isNew:t})}set Field(t){this.$Field=t}get Field(){return this.$Field}set Group(t){this.$Group=t}get Group(){return this.$Group}set CustomTags(t){this.$CustomTags=t}get CustomTags(){return this.$CustomTags}set CustomDatas(t){this.$CustomDatas=t}get CustomDatas(){return this.$CustomDatas}set ContinuationPage(t){this.$ContinuationPage=t}get ContinuationPage(){return this.$ContinuationPage}};lo([$e(),ve(),be(ge,Uo,{required:!0,multiple:!0}),uo("design:type",Object)],rr.prototype,"$Field",void 0),lo([$e(),ve(),be(ge,Yo,{multiple:!0}),uo("design:type",Object)],rr.prototype,"$Group",void 0),lo([$e(),ve(),be(ge,Zo),uo("design:type",Zo)],rr.prototype,"$CustomTags",void 0),lo([$e(),ve(),be(ge,Qo),uo("design:type",Qo)],rr.prototype,"$CustomDatas",void 0),lo([$e(),ve(),be(ge,ir),uo("design:type",ir)],rr.prototype,"$ContinuationPage",void 0),rr=lo([me("PageForm",or),uo("design:paramtypes",[Object])],rr);class sr extends te{constructor(){super()}set PageID(t){this.$PageID=t}get PageID(){return this.$PageID}set FileLoc(t){this.$FileLoc=t}get FileLoc(){return this.$FileLoc}realLoc(){var t;return co(this,void 0,void 0,(function*(){let e=null!==(t=this.FileLoc)&&void 0!==t?t:"";return(yield this.package.has(this.location(e)))||e.charAt(0)==Zt||(e=Zt+e),e}))}relatePageForm(){return this.related({locs:this.data().isNew?void 0:this.realLoc().then((t=>[t]))})}}lo([$e(),ve(),be(fe,xe,{required:!0}),uo("design:type",Object)],sr.prototype,"$PageID",void 0),lo([$e(),ve(),be(ge,Ce,{relative:rr}),uo("design:type",Object)],sr.prototype,"$FileLoc",void 0),lo([we("FileLoc"),uo("design:type",Function),uo("design:paramtypes",[]),uo("design:returntype",Object)],sr.prototype,"relatePageForm",null);let ar=class extends te{constructor(){super()}set Page(t){this.$Page=t}get Page(){return this.$Page}set MaxUnitID(t){this.$MaxUnitID=t}get MaxUnitID(){return this.$MaxUnitID}find(t){return co(this,void 0,void 0,(function*(){if(this.Page&&t)for(const e of this.Page)if(e&&e.PageID==t)return e.relatePageForm().get()}))}};lo([$e(),ve(),be(ge,xe),uo("design:type",Object)],ar.prototype,"$MaxUnitID",void 0),lo([$e(),ve(),be(ge,sr,{multiple:!0}),uo("design:type",Object)],ar.prototype,"$Page",void 0),ar=lo([me("PageForm","Forms.xml"),uo("design:paramtypes",[])],ar);var lr=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ur=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},dr=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const cr=pt.getLogger("FormNext",lt.INFO);class hr extends Tn{set Type(t){this.$Type=t}get Type(){return this.$Type}text(){let t="";switch(this.Type){case"Text":default:t="";break;case"Number":t="";break;case"DateTime":t="";break;case"Image":t="";break;case"Seal":t="";break;case"Barcode":case"QRCode":case"GMCode":t="";break;case"Checkbox":t=""}return t}name(){return"Text"}getStyle(t){const e=null!=t?t:this.StyleID;if(!e)return;const i=this.parentUntil(Pr);if(i)return i.getStyle(e);cr.info("forms is not found")}setStyle(t,e,i){var n,o,r,s,a;return dr(this,void 0,void 0,(function*(){const l=this.StyleID,u=null!==(n=this.parentUntil(Pr))&&void 0!==n?n:void 0,d=null==u?void 0:u.Form;let c=[];for(const t of null!=d?d:[]){const e=yield null==t?void 0:t.relateForm().all();for(const t of e)for(const e of null!==(r=null===(o=t.FormObject)||void 0===o?void 0:o.toArray())&&void 0!==r?r:[])c.push(e)}const h=null!==(s=this.getStyle(l))&&void 0!==s?s:void 0;let p=0;for(const t of c)t.StyleID===l&&p++;if(p>1){const n=null==h?void 0:h.clone();n&&(n.ID=i,n.safeSet(t,e),this.StyleID=n.ID,null===(a=null==u?void 0:u.Style)||void 0===a||a.add(n))}else null==h||h.safeSet(t,e)}))}newStyle(){const t=this.parentUntil(Pr);if(t)return t.newStyle()}getDataList(t){const e=null!=t?t:this.DataListID;if(!e)return;const i=this.parentUntil(Pr);return i?i.getDataList(e):void 0}newDataList(){const t=this.parentUntil(Pr);if(t)return t.newDataList()}getParam(t){var e;return this.Parameters=null!==(e=this.Parameters)&&void 0!==e?e:this.makeModel(Pn,!0),this.Parameters.getParameter(t)}setParam(t,e){var i;this.Parameters=null!==(i=this.Parameters)&&void 0!==i?i:this.makeModel(Pn,!0),this.Parameters.setParameter(t,e)}set SubNum(t){this.setParam("SubNum",t)}get SubNum(){return this.getParam("SubNum")}}lr([$e(),ve(),be(fe,Ce,{required:!0,default:""}),ur("design:type",Object)],hr.prototype,"$Name",void 0),lr([$e(),ve(),be(fe,Ce,{required:!0,default:"Text"}),ur("design:type",Object)],hr.prototype,"$Type",void 0);class pr extends jn{name(){return"GroupBox"}newStyle(){const t=this.parentUntil(Pr);if(t)return t.newStyle()}getStyle(t){var e;const i=null!=t?t:this.StyleID,n=this.parentUntil(Pr);if(!n)return;const o=null===(e=n.Style)||void 0===e?void 0:e.toArray();return null==o?void 0:o.filter((t=>t.ID===i)).pop()}getParam(t){var e;return this.Parameters=null!==(e=this.Parameters)&&void 0!==e?e:this.makeModel(Pn,!0),this.Parameters.getParameter(t)}setParam(t,e){var i;this.Parameters=null!==(i=this.Parameters)&&void 0!==i?i:this.makeModel(Pn,!0),this.Parameters.setParameter(t,e)}freeOutFun(t){var e,i;return dr(this,void 0,void 0,(function*(){const n=this.parentUntil(Dr);if(t)null===(e=null==n?void 0:n.Group)||void 0===e||e.add(t);else{const t=this.clone();t.GroupType="SubGroup",null===(i=null==n?void 0:n.Group)||void 0===i||i.add(t)}return this}))}freeOutFunExit(t){var e,i,n;return dr(this,void 0,void 0,(function*(){let o=this;const r=this.parentUntil(Dr);let s=null===(e=null==r?void 0:r.Group)||void 0===e?void 0:e.toArray().find((t=>"SubGroup"===t.GroupType&&t.ID==o.SubGroupID));return t&&(o=t,s=null===(i=null==r?void 0:r.Group)||void 0===i?void 0:i.toArray().find((t=>"SubGroup"===t.GroupType&&t.ID==o.ID))),s&&(null===(n=null==r?void 0:r.Group)||void 0===n||n.remove(s)),this}))}set GroupType(t){this.setParam("GroupType",t)}get GroupType(){return this.getParam("GroupType")}set SubGroupID(t){this.setParam("SubGroupID",t)}get SubGroupID(){return this.getParam("SubGroupID")}}class gr extends hr{name(){return"Text"}newActionURI(){var t;this.Actions=null!==(t=this.Actions)&&void 0!==t?t:this.makeModel(Sn);const e=this.Actions.newAction();e.Event="CLICK",e.Choice=e.makeModel(ii,!0);const i=e.Choice.makeModel(Ye,!0);return e.Choice.URI=i,i}getActionURI(){var t,e,i,n;return null===(n=null===(i=null===(e=null===(t=this.Actions)||void 0===t?void 0:t.Action)||void 0===e?void 0:e.toArray().filter((t=>{var e;return!!(null===(e=t.Choice)||void 0===e?void 0:e.URI)})).pop())||void 0===i?void 0:i.Choice)||void 0===n?void 0:n.URI}}class fr extends hr{name(){return"Number"}set SumFieldID(t){this.setParam("SumFieldID",t)}get SumFieldID(){return this.getParam("SumFieldID")}set FormatType(t){this.setParam("FormatType",t)}get FormatType(){return this.getParam("FormatType")}}class yr extends hr{name(){return"DateTime"}}class mr extends hr{name(){return"Image"}}class vr extends hr{name(){return"Barcode"}}class $r extends hr{name(){return"Seal"}}class br extends hr{set OnePageFormat(t){this.$OnePageFormat=t}get OnePageFormat(){return this.$OnePageFormat}set isOnePage(t){this.$isOnePage=t}get isOnePage(){return!!this.$isOnePage||!!this.$OnePageFormat}name(){return"PageNumberStyle"}}lr([$e(),ve(),be(fe,Ce),ur("design:type",Object)],br.prototype,"$OnePageFormat",void 0);class wr extends hr{name(){return"Checkbox"}}class xr extends te{constructor(){super()}set TextBox(t){this.$TextBox=t}get TextBox(){return this.$TextBox}set NumberBox(t){this.$NumberBox=t}get NumberBox(){return this.$NumberBox}set DateBox(t){this.$DateBox=t}get DateBox(){return this.$DateBox}set ImageBox(t){this.$ImageBox=t}get ImageBox(){return this.$ImageBox}set BarcodeBox(t){this.$BarcodeBox=t}get BarcodeBox(){return this.$BarcodeBox}set SealBox(t){this.$SealBox=t}get SealBox(){return this.$SealBox}set PageNumberBox(t){this.$PageNumberBox=t}get PageNumberBox(){return this.$PageNumberBox}set CheckboxBox(t){this.$CheckboxBox=t}get CheckboxBox(){return this.$CheckboxBox}available(){var t,e,i,n,o,r,s;return null!==(s=null!==(r=null!==(o=null!==(n=null!==(i=null!==(e=null!==(t=this.TextBox)&&void 0!==t?t:this.NumberBox)&&void 0!==e?e:this.DateBox)&&void 0!==i?i:this.ImageBox)&&void 0!==n?n:this.BarcodeBox)&&void 0!==o?o:this.SealBox)&&void 0!==r?r:this.PageNumberBox)&&void 0!==s?s:this.CheckboxBox}setField(t){switch(t.name()){case"Text":return this.TextBox=t,!0;case"Number":return this.NumberBox=t,!0;case"DateTime":return this.DateBox=t,!0;case"Image":return this.ImageBox=t,!0;case"Barcode":case"QRCode":case"GMCode":return this.BarcodeBox=t,!0;case"Seal":return this.SealBox=t,!0;case"PageNumberStyle":return this.PageNumberBox=t,!0;case"Checkbox":return this.CheckboxBox=t,!0}return!1}make(t){let e=null;switch(t){case"Text":e=this.makeModel(gr,!0),e.Type="Text";break;case"Number":e=this.makeModel(fr,!0),e.Type="Number";break;case"DateTime":e=this.makeModel(yr,!0),e.Type="DateTime";break;case"Image":e=this.makeModel(mr,!0),e.Type="Image";break;case"Barcode":case"QRCode":case"GMCode":e=this.makeModel(vr,!0),e.Type=t;break;case"Seal":e=this.makeModel($r,!0),e.Type="Seal";break;case"PageNumberStyle":e=this.makeModel(br,!0),e.Type="PageNumberStyle";break;case"Checkbox":e=this.makeModel(wr,!0),e.Type="Checkbox"}return e}}lr([$e(),ve(),be(ge,gr),ur("design:type",gr)],xr.prototype,"$TextBox",void 0),lr([$e(),ve(),be(ge,fr),ur("design:type",fr)],xr.prototype,"$NumberBox",void 0),lr([$e(),ve(),be(ge,yr),ur("design:type",yr)],xr.prototype,"$DateBox",void 0),lr([$e(),ve(),be(ge,mr),ur("design:type",mr)],xr.prototype,"$ImageBox",void 0),lr([$e(),ve(),be(ge,vr),ur("design:type",vr)],xr.prototype,"$BarcodeBox",void 0),lr([$e(),ve(),be(ge,$r),ur("design:type",$r)],xr.prototype,"$SealBox",void 0),lr([$e(),ve(),be(ge,br),ur("design:type",br)],xr.prototype,"$PageNumberBox",void 0),lr([$e(),ve(),be(ge,wr),ur("design:type",wr)],xr.prototype,"$CheckboxBox",void 0);class Cr extends Kn{newOption(t,e,i){var n,o,r;const s=null!==(n=this.Option)&&void 0!==n?n:this.makeList(),a=this.makeModel(Zn,!0),l=s.toArray().find((i=>i.Text==e&&i.Value==t));return(null===(o=null==l?void 0:l.parent)||void 0===o?void 0:o.ID)===i&&l||s.add(a),!(null===(r=this.Option)||void 0===r?void 0:r.isNotEmpty())&&this.Option||(this.Option=s),a}addOption(t,e,i){const n=this.newOption(t,e,i);return n.Value=t,n.Text=e,n}}let Dr=class extends An{constructor(t=!1){super({isNew:t})}set FormObject(t){this.$FormObject=t}get FormObject(){return this.$FormObject}set Group(t){this.$Group=t}get Group(){return this.$Group}};lr([$e(),ve(),be(ge,class extends Jt{chose(t){switch(this.getType(t)){case"Text":return gr;case"Number":return fr;case"DateTime":return yr;case"Image":case"OFD":return mr;case"Barcode":case"QRCode":case"GMCode":return vr;case"Seal":return $r;case"PageNumberStyle":return br;case"Checkbox":return wr;default:return hr}}getAttribute(t,e){return t.attribute(e)}getType(t){return this.getAttribute(t,"Type")}},{multiple:!0}),ur("design:type",Object)],Dr.prototype,"$FormObject",void 0),lr([$e(),ve(),be(ge,pr,{multiple:!0}),ur("design:type",Object)],Dr.prototype,"$Group",void 0),Dr=lr([me("Form","Form_{index}/Form.xml"),ur("design:paramtypes",[Object])],Dr);class Or extends Qn{set BaseLoc(t){this.$BaseLoc=t}get BaseLoc(){return this.$BaseLoc}realLoc(){var t;return dr(this,void 0,void 0,(function*(){let e=null!==(t=this.BaseLoc)&&void 0!==t?t:"";return(yield this.package.has(this.location(e)))||e.charAt(0)==Zt||(e=Zt+e),e}))}relateForm(){return this.related({locs:this.data().isNew?void 0:this.realLoc().then((t=>[t]))})}}lr([$e(),ve(),be(fe,Ce,{required:!0,relative:Dr}),ur("design:type",Object)],Or.prototype,"$BaseLoc",void 0),lr([we("BaseLoc"),ur("design:type",Function),ur("design:paramtypes",[]),ur("design:returntype",Object)],Or.prototype,"relateForm",null);let Pr=class extends ao{set Form(t){this.$Form=t}get Form(){return this.$Form}set Version(t){this.$Version=t}get Version(){return this.$Version}set DataList(t){this.$DataList=t}get DataList(){return this.$DataList}getStyle(t){if(t&&this.Style&&!this.Style.isEmpty())for(const e of this.Style)if((null==e?void 0:e.ID)===t)return e}newStyle(){var t;const e=this.Style=null!==(t=this.Style)&&void 0!==t?t:this.makeList(),i=this.makeModel(Jn,!0);return e.add(i),i}getDataList(t){if(t&&this.DataList&&!this.DataList.isEmpty())for(const e of this.DataList)if((null==e?void 0:e.ID)===t)return e}newDataList(t){var e,i;const n=null!==(e=this.DataList)&&void 0!==e?e:this.makeList();let o;return t&&(o=n.toArray().find((e=>e.ID===t))),o||(o=this.makeModel(Cr,!0),n.add(o),(null===(i=this.DataList)||void 0===i?void 0:i.isNotEmpty())||(this.DataList=n)),o}};lr([$e(),ve(),be(fe,Ce,{default:"3.1",required:!0}),ur("design:type",Object)],Pr.prototype,"$Version",void 0),lr([$e(),ve(),be(ge,Or,{multiple:!0}),ur("design:type",Object)],Pr.prototype,"$Form",void 0),lr([$e(),ve(),be(ge,Cr,{multiple:!0}),ur("design:type",Object)],Pr.prototype,"$DataList",void 0),Pr=lr([me("Forms","Forms/Forms.xml")],Pr);class Sr extends Wn{constructor(){super()}}var Ir=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Tr=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class Rr extends te{constructor(){super()}set Name(t){this.$Name=t}get Name(){return this.$Name}set Type(t){this.$Type=t}get Type(){return this.$Type}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}Ir([$e(),ve(),be(fe,Ce,{required:!0}),Tr("design:type",Object)],Rr.prototype,"$Name",void 0),Ir([$e(),ve(),be(fe,Ce),Tr("design:type",Object)],Rr.prototype,"$Type",void 0),Ir([$e(),ve(),be(ge,Ce,{required:!0}),Tr("design:type",Object)],Rr.prototype,"$$Value",void 0);class jr extends te{set Property(t){this.$Property=t}get Property(){return this.$Property}set Data(t){this.$Data=t}get Data(){return this.$Data}set ExtendData(t){this.$ExtendData=t}get ExtendData(){return this.$ExtendData}}Ir([$e(),ve(),be(ge,Rr),Tr("design:type",Rr)],jr.prototype,"$Property",void 0),Ir([$e(),ve(),be(fe,Ce),Tr("design:type",Object)],jr.prototype,"$Data",void 0),Ir([$e(),ve(),be(ge,Ce),Tr("design:type",Object)],jr.prototype,"$ExtendData",void 0);class Ar extends te{constructor(){super()}set AppName(t){this.$AppName=t}get AppName(){return this.$AppName}set Company(t){this.$Company=t}get Company(){return this.$Company}set AppVersion(t){this.$AppVersion=t}get AppVersion(){return this.$AppVersion}set Date(t){this.$Date=t}get Date(){return this.$Date}set RefId(t){this.$RefId=t}get RefId(){return this.$RefId}set Choice(t){this.$Choice=t}get Choice(){return this.$Choice}}Ir([$e(),ve(),be(fe,Ce,{required:!0}),Tr("design:type",Object)],Ar.prototype,"$AppName",void 0),Ir([$e(),ve(),be(fe,Ce),Tr("design:type",Object)],Ar.prototype,"$Company",void 0),Ir([$e(),ve(),be(fe,Ce),Tr("design:type",Object)],Ar.prototype,"$AppVersion",void 0),Ir([$e(),ve(),be(fe,Ce),Tr("design:type",Object)],Ar.prototype,"$Date",void 0),Ir([$e(),ve(),be(fe,Ce,{required:!0}),Tr("design:type",Object)],Ar.prototype,"$RefId",void 0),Ir([$e(),ve(),be(ye,jr),Tr("design:type",jr)],Ar.prototype,"$Choice",void 0);let Fr=class extends te{constructor(){super()}set Extension(t){this.$Extension=t}get Extension(){return this.$Extension}};Ir([$e(),ve(),be(ge,Ar,{multiple:!0}),Tr("design:type",Object)],Fr.prototype,"$Extension",void 0),Fr=Ir([me("Extensions",""),Tr("design:paramtypes",[])],Fr);var Mr=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Br=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},kr=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class Lr extends te{constructor(){super()}set TypeID(t){this.$TypeID=t}get TypeID(){return this.$TypeID}set SchemaLoc(t){this.$SchemaLoc=t}get SchemaLoc(){return this.$SchemaLoc}set FileLoc(t){this.$FileLoc=t}get FileLoc(){return this.$FileLoc}realLoc(){var t;return kr(this,void 0,void 0,(function*(){let e=null!==(t=this.FileLoc)&&void 0!==t?t:"";return this.location(e)}))}relateCustom(){return this.related({locs:this.data().isNew?void 0:this.realLoc().then((t=>[t]))})}}Mr([$e(),ve(),be(fe,Ce,{required:!0}),Br("design:type",Object)],Lr.prototype,"$TypeID",void 0),Mr([$e(),ve(),be(ge,Ce),Br("design:type",Object)],Lr.prototype,"$SchemaLoc",void 0),Mr([$e(),ve(),be(ge,Ce,{relative:Object,required:!0}),Br("design:type",Object)],Lr.prototype,"$FileLoc",void 0),Mr([we("FileLoc"),Br("design:type",Function),Br("design:paramtypes",[]),Br("design:returntype",Object)],Lr.prototype,"relateCustom",null);let Nr=class extends te{constructor(){super()}set CustomTag(t){this.$CustomTag=t}get CustomTag(){return this.$CustomTag}};Mr([$e(),ve(),be(ge,Lr,{multiple:!0}),Br("design:type",Object)],Nr.prototype,"$CustomTag",void 0),Nr=Mr([me("CustomTags",""),Br("design:paramtypes",[])],Nr);var Er=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},_r=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Vr=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class qr extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Name(t){this.$Name=t}get Name(){return this.$Name}set Format(t){this.$Format=t}get Format(){return this.$Format}set CreationDate(t){this.$CreationDate=t}get CreationDate(){return this.$CreationDate}set ModDate(t){this.$ModDate=t}get ModDate(){return this.$ModDate}set Size(t){this.$Size=t}get Size(){return this.$Size}set Visible(t){this.$Visible=t}get Visible(){return this.$Visible}set Usage(t){this.$Usage=t}get Usage(){return this.$Usage}set FileLoc(t){this.$FileLoc=t}get FileLoc(){return this.$FileLoc}loadData(){if(this.FileLoc)return this.loadEntry(this.location(this.FileLoc)).then((t=>t.asBuffer()))}putData(t){return Vr(this,void 0,void 0,(function*(){const e=yield Re(t),i=`Attachs/${je(e)}.dat`,n=this.location(i);yield this.package.put(n,e),this.FileLoc=i,this.Size=e.byteLength/1024}))}}Er([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),_r("design:type",Object)],qr.prototype,"$ID",void 0),Er([$e(),ve(),be(fe,Ce,{required:!0}),_r("design:type",Object)],qr.prototype,"$Name",void 0),Er([$e(),ve(),be(fe,Ce),_r("design:type",Object)],qr.prototype,"$Format",void 0),Er([$e(),ve(),be(fe,Ce),_r("design:type",Object)],qr.prototype,"$CreationDate",void 0),Er([$e(),ve(),be(fe,Ce),_r("design:type",Object)],qr.prototype,"$ModDate",void 0),Er([$e(),ve(),be(fe,xe),_r("design:type",Object)],qr.prototype,"$Size",void 0),Er([$e(),ve(),be(fe,De,{default:!0}),_r("design:type",Object)],qr.prototype,"$Visible",void 0),Er([$e(),ve(),be(fe,Ce),_r("design:type",Object)],qr.prototype,"$Usage",void 0),Er([$e(),ve(),be(ge,Ce,{required:!0}),_r("design:type",Object)],qr.prototype,"$FileLoc",void 0);let Gr=class extends te{constructor(){super()}set Attachment(t){this.$Attachment=t}get Attachment(){return this.$Attachment}addAttachment(t){return Vr(this,void 0,void 0,(function*(){this.Attachment||(this.Attachment=this.makeList());const e=this.makeModel(qr,!0);return this.Attachment.add(e),yield e.putData(t),e}))}};Er([$e(),ve(),be(ge,qr,{multiple:!0}),_r("design:type",Object)],Gr.prototype,"$Attachment",void 0),Gr=Er([me("Attachments","Attachments.xml"),_r("design:paramtypes",[])],Gr);var zr=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ur=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class Wr extends te{constructor(){super()}set Name(t){this.$Name=t}get Name(){return this.$Name}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}zr([$e(),ve(),be(fe,Ce,{required:!0}),Ur("design:type",Object)],Wr.prototype,"$Name",void 0),zr([$e(),ve(),be(ge,Ce,{required:!0}),Ur("design:type",Object)],Wr.prototype,"$$Value",void 0);class Hr extends te{constructor(){super()}set Boundary(t){this.$Boundary=t}get Boundary(){return this.$Boundary}set PageBlock(t){this.$PageBlock=t}get PageBlock(){return this.$PageBlock}newBlock(){const t=this.makeModel(li,!0);return this.PageBlock||(this.PageBlock=this.makeList()),this.PageBlock.add(t),t}}zr([$e(),ve(),be(fe,Oe),Ur("design:type",Object)],Hr.prototype,"$Boundary",void 0),zr([$e(),ve(),be(ye,li,{multiple:!0}),Ur("design:type",Object)],Hr.prototype,"$PageBlock",void 0);class Yr extends te{constructor(){super()}set Parameter(t){this.$Parameter=t}get Parameter(){return this.$Parameter}addParameter(t,e){this.Parameter||(this.Parameter=this.makeList());const i=this.makeModel(Wr,!0);return this.Parameter.add(i),i.Name=t,i.Value=e,i}}zr([$e(),ve(),be(ge,Wr,{required:!0,multiple:!0}),Ur("design:type",Object)],Yr.prototype,"$Parameter",void 0);class Xr extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Type(t){this.$Type=t}get Type(){return this.$Type}set Creator(t){this.$Creator=t}get Creator(){return this.$Creator}set LastModDate(t){this.$LastModDate=t}get LastModDate(){return this.$LastModDate}set Visible(t){this.$Visible=t}get Visible(){return this.$Visible}set Subtype(t){this.$Subtype=t}get Subtype(){return this.$Subtype}set Print(t){this.$Print=t}get Print(){return this.$Print}set NoZoom(t){this.$NoZoom=t}get NoZoom(){return this.$NoZoom}set NoRotate(t){this.$NoRotate=t}get NoRotate(){return this.$NoRotate}set ReadOnly(t){this.$ReadOnly=t}get ReadOnly(){return this.$ReadOnly}set Remark(t){this.$Remark=t}get Remark(){return this.$Remark}set Parameters(t){this.$Parameters=t}get Parameters(){return this.$Parameters}set Appearance(t){this.$Appearance=t}get Appearance(){return this.$Appearance}addParameter(t,e){return this.Parameters||(this.Parameters=this.makeModel(Yr,!0)),this.Parameters.addParameter(t,e)}isDisplay(){return!1!==this.Visible&&void 0!==this.Appearance&&void 0!==this.Appearance.PageBlock&&this.Appearance.PageBlock.size()>0}}zr([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Ur("design:type",Object)],Xr.prototype,"$ID",void 0),zr([$e(),ve(),be(fe,Ce,{required:!0}),Ur("design:type",String)],Xr.prototype,"$Type",void 0),zr([$e(),ve(),be(fe,Ce,{required:!0}),Ur("design:type",Object)],Xr.prototype,"$Creator",void 0),zr([$e(),ve(),be(fe,Ce,{required:!0}),Ur("design:type",Object)],Xr.prototype,"$LastModDate",void 0),zr([$e(),ve(),be(fe,De,{default:!0}),Ur("design:type",Object)],Xr.prototype,"$Visible",void 0),zr([$e(),ve(),be(fe,Ce),Ur("design:type",Object)],Xr.prototype,"$Subtype",void 0),zr([$e(),ve(),be(fe,De,{default:!0}),Ur("design:type",Object)],Xr.prototype,"$Print",void 0),zr([$e(),ve(),be(fe,De,{default:!1}),Ur("design:type",Object)],Xr.prototype,"$NoZoom",void 0),zr([$e(),ve(),be(fe,De,{default:!1}),Ur("design:type",Object)],Xr.prototype,"$NoRotate",void 0),zr([$e(),ve(),be(fe,De,{default:!0}),Ur("design:type",Object)],Xr.prototype,"$ReadOnly",void 0),zr([$e(),ve(),be(ge,Ce),Ur("design:type",Object)],Xr.prototype,"$Remark",void 0),zr([$e(),ve(),be(ge,Yr),Ur("design:type",Yr)],Xr.prototype,"$Parameters",void 0),zr([$e(),ve(),be(ge,Hr,{required:!0}),Ur("design:type",Hr)],Xr.prototype,"$Appearance",void 0);let Zr=class extends te{constructor(){super()}set Annot(t){this.$Annot=t}get Annot(){return this.$Annot}newAnnot(){const t=this.makeModel(Xr,!0);return this.Annot||(this.Annot=this.makeList()),this.Annot.add(t),t}};zr([$e(),ve(),be(ge,Xr,{required:!0,multiple:!0}),Ur("design:type",Object)],Zr.prototype,"$Annot",void 0),Zr=zr([me("PageAnnot","Annots/Page_{index}/Annotation.xml"),Ur("design:paramtypes",[])],Zr);var Kr=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Qr=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Jr=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class ts extends te{constructor(){super()}set PageID(t){this.$PageID=t}get PageID(){return this.$PageID}set FileLoc(t){this.$FileLoc=t}get FileLoc(){return this.$FileLoc}set Annot(t){this.$Annot=t}get Annot(){return this.$Annot}relatePageAnnot(){return this.related()}}Kr([$e(),ve(),be(fe,xe,{required:!0}),Qr("design:type",Object)],ts.prototype,"$PageID",void 0),Kr([$e(),ve(),be(ge,Ce,{relative:Zr}),Qr("design:type",Object)],ts.prototype,"$FileLoc",void 0),Kr([$e(),ve(),be(ge,Xr,{multiple:!0}),Qr("design:type",Object)],ts.prototype,"$Annot",void 0),Kr([we("FileLoc"),Qr("design:type",Function),Qr("design:paramtypes",[]),Qr("design:returntype",Object)],ts.prototype,"relatePageAnnot",null);let es=class extends te{constructor(){super()}set Page(t){this.$Page=t}get Page(){return this.$Page}findPage(t,e=!1){var i;const n=new Array;if(null===(i=this.Page)||void 0===i||i.forEach((e=>{e&&e.PageID==t&&n.push(e)})),0===n.length&&!0===e){const e=this.makeModel(ts,!0);e.PageID=t,this.Page||(this.Page=this.makeList()),this.Page.add(e),n.push(e)}return n}find(t){var e,i;return Jr(this,void 0,void 0,(function*(){const n=new Array;for(let o of this.findPage(t,!1))if(o.FileLoc&&o.FileLoc.length){const t=yield o.relatePageAnnot().get();null===(e=null==t?void 0:t.Annot)||void 0===e||e.forEach((t=>{n.push(t)}))}else null===(i=o.Annot)||void 0===i||i.forEach((t=>{n.push(t)}));return n}))}};Kr([$e(),ve(),be(ge,ts,{multiple:!0}),Qr("design:type",Object)],es.prototype,"$Page",void 0),es=Kr([me("Annotations","Annotations.xml"),Qr("design:paramtypes",[])],es);var is=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ns=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},os=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class rs extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Name(t){this.$Name=t}get Name(){return this.$Name}set ZOrder(t){this.$ZOrder=t}get ZOrder(){return this.$ZOrder}set BaseLoc(t){this.$BaseLoc=t}get BaseLoc(){return this.$BaseLoc}relatePage(){return this.related({afterLoad:t=>t.ID=this.ID})}}is([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),ns("design:type",Object)],rs.prototype,"$ID",void 0),is([$e(),ve(),be(fe,Ce),ns("design:type",Object)],rs.prototype,"$Name",void 0),is([$e(),ve(),be(fe,Ce,{default:"Background"}),ns("design:type",String)],rs.prototype,"$ZOrder",void 0),is([$e(),ve(),be(fe,Ce,{required:!0,relative:hn}),ns("design:type",Object)],rs.prototype,"$BaseLoc",void 0),is([we("BaseLoc"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],rs.prototype,"relatePage",null);class ss extends te{constructor(){super()}set MaxUnitID(t){this.$MaxUnitID=t}get MaxUnitID(){return this.$MaxUnitID}set PageArea(t){this.$PageArea=t}get PageArea(){return this.$PageArea}set PublicRes(t){this.$PublicRes=t}get PublicRes(){return this.$PublicRes}set DocumentRes(t){this.$DocumentRes=t}get DocumentRes(){return this.$DocumentRes}set TemplatePage(t){this.$TemplatePage=t}get TemplatePage(){return this.$TemplatePage}set DefaultCS(t){this.$DefaultCS=t}get DefaultCS(){return this.$DefaultCS}relateDocumentResource(){return this.related()}relatePublicResource(){return this.related()}loadAllResource(){return os(this,void 0,void 0,(function*(){const t=new on;for(const e of yield this.relateDocumentResource().all())t.add(e);for(const e of yield this.relatePublicResource().all())t.add(e);return this.willClose(t),t}))}findTemplate(t){if(s(this._tplMapping)&&(this._tplMapping=new ot,this.TemplatePage&&this.TemplatePage.size()>0))for(let t of this.TemplatePage)this._tplMapping.set(null==t?void 0:t.ID,t);return this._tplMapping.get(t)}doClose(){var t;null===(t=this._tplMapping)||void 0===t||t.clear()}}is([$e(),ve(),be(ge,xe,{required:!0,ID:!0}),ns("design:type",Object)],ss.prototype,"$MaxUnitID",void 0),is([$e(),ve(),be(ge,Me,{required:!0}),ns("design:type",Me)],ss.prototype,"$PageArea",void 0),is([$e(),ve(),be(ge,Ce,{multiple:!0,relative:nn}),ns("design:type",Object)],ss.prototype,"$PublicRes",void 0),is([$e(),ve(),be(ge,Ce,{multiple:!0,relative:nn}),ns("design:type",Object)],ss.prototype,"$DocumentRes",void 0),is([$e(),ve(),be(ge,rs,{multiple:!0}),ns("design:type",Object)],ss.prototype,"$TemplatePage",void 0),is([$e(),ve(),be(ge,xe),ns("design:type",Object)],ss.prototype,"$DefaultCS",void 0),is([we("DocumentRes"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],ss.prototype,"relateDocumentResource",null),is([we("PublicRes"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],ss.prototype,"relatePublicResource",null);class as extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set BaseLoc(t){this.$BaseLoc=t}get BaseLoc(){return this.$BaseLoc}relatePage(){return this.related({afterLoad:t=>t.ID=this.ID,index:()=>{var t;const e=this.parentUntil(ls);return(null===(t=null==e?void 0:e.Page)||void 0===t?void 0:t.contains(this))?e.count()-1:null==e?void 0:e.count()}})}}is([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),ns("design:type",Object)],as.prototype,"$ID",void 0),is([$e(),ve(),be(fe,Ce,{required:!0,relative:hn}),ns("design:type",Object)],as.prototype,"$BaseLoc",void 0),is([we("BaseLoc"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],as.prototype,"relatePage",null);class ls extends te{constructor(){super()}set Page(t){this.$Page=t}get Page(){return this.$Page}pageID(t){var e;const i=this.Page;if(i&&i.isNotEmpty()&&t>=0)return null===(e=i.get(t))||void 0===e?void 0:e.ID}count(){var t,e;return null!==(e=null===(t=this.Page)||void 0===t?void 0:t.size())&&void 0!==e?e:0}newPage(){this.Page||(this.Page=this.makeList());const t=this.makeModel(as,!0);return this.Page.add(t),t}}is([$e(),ve(),be(ge,as,{required:!0,multiple:!0}),ns("design:type",Object)],ls.prototype,"$Page",void 0);class us extends te{constructor(){super()}set Title(t){this.$Title=t}get Title(){return this.$Title}set Count(t){this.$Count=t}get Count(){return this.$Count}set Expanded(t){this.$Expanded=t}get Expanded(){return this.$Expanded}set Actions(t){this.$Actions=t}get Actions(){return this.$Actions}set OutlineElem(t){this.$OutlineElem=t}get OutlineElem(){return this.$OutlineElem}}is([$e(),ve(),be(fe,Ce,{required:!0}),ns("design:type",Object)],us.prototype,"$Title",void 0),is([$e(),ve(),be(fe,xe),ns("design:type",Object)],us.prototype,"$Count",void 0),is([$e(),ve(),be(fe,De,{default:!0}),ns("design:type",Object)],us.prototype,"$Expanded",void 0),is([$e(),ve(),be(ge,oi),ns("design:type",oi)],us.prototype,"$Actions",void 0),is([$e(),ve(),be(ge,us,{multiple:!0}),ns("design:type",Object)],us.prototype,"$OutlineElem",void 0);class ds extends te{constructor(){super()}set OutlineElem(t){this.$OutlineElem=t}get OutlineElem(){return this.$OutlineElem}}is([$e(),ve(),be(ge,us,{required:!0,multiple:!0}),ns("design:type",Object)],ds.prototype,"$OutlineElem",void 0);class cs extends te{constructor(){super()}set Printable(t){this.$Printable=t}get Printable(){return this.$Printable}set Copies(t){this.$Copies=t}get Copies(){return this.$Copies}}is([$e(),ve(),be(fe,De,{required:!0}),ns("design:type",Object)],cs.prototype,"$Printable",void 0),is([$e(),ve(),be(fe,xe,{default:-1}),ns("design:type",Object)],cs.prototype,"$Copies",void 0);class hs extends te{constructor(){super()}set StartDate(t){this.$StartDate=t}get StartDate(){return this.$StartDate}set EndDate(t){this.$EndDate=t}get EndDate(){return this.$EndDate}}is([$e(),ve(),be(fe,Ce),ns("design:type",Object)],hs.prototype,"$StartDate",void 0),is([$e(),ve(),be(fe,Ce),ns("design:type",Object)],hs.prototype,"$EndDate",void 0);class ps extends te{constructor(){super()}set Edit(t){this.$Edit=t}get Edit(){return this.$Edit}set Annot(t){this.$Annot=t}get Annot(){return this.$Annot}set Export(t){this.$Export=t}get Export(){return this.$Export}set Signature(t){this.$Signature=t}get Signature(){return this.$Signature}set Watermark(t){this.$Watermark=t}get Watermark(){return this.$Watermark}set PrintScreen(t){this.$PrintScreen=t}get PrintScreen(){return this.$PrintScreen}set Print(t){this.$Print=t}get Print(){return this.$Print}set ValidPeriod(t){this.$ValidPeriod=t}get ValidPeriod(){return this.$ValidPeriod}}is([$e(),ve(),be(ge,De,{default:!0}),ns("design:type",Object)],ps.prototype,"$Edit",void 0),is([$e(),ve(),be(ge,De,{default:!0}),ns("design:type",Object)],ps.prototype,"$Annot",void 0),is([$e(),ve(),be(ge,De,{default:!0}),ns("design:type",Object)],ps.prototype,"$Export",void 0),is([$e(),ve(),be(ge,De,{default:!0}),ns("design:type",Object)],ps.prototype,"$Signature",void 0),is([$e(),ve(),be(ge,De,{default:!0}),ns("design:type",Object)],ps.prototype,"$Watermark",void 0),is([$e(),ve(),be(ge,De,{default:!0}),ns("design:type",Object)],ps.prototype,"$PrintScreen",void 0),is([$e(),ve(),be(ge,cs),ns("design:type",cs)],ps.prototype,"$Print",void 0),is([$e(),ve(),be(ge,hs),ns("design:type",hs)],ps.prototype,"$ValidPeriod",void 0);class gs extends te{set ZoomMode(t){this.$ZoomMode=t}get ZoomMode(){return this.$ZoomMode}set Zoom(t){this.$Zoom=t}get Zoom(){return this.$Zoom}}is([$e(),ve(),be(ge,Ce),ns("design:type",String)],gs.prototype,"$ZoomMode",void 0),is([$e(),ve(),be(ge,xe),ns("design:type",Object)],gs.prototype,"$Zoom",void 0);class fs extends te{constructor(){super()}set PageMode(t){this.$PageMode=t}get PageMode(){return this.$PageMode}set PageLayout(t){this.$PageLayout=t}get PageLayout(){return this.$PageLayout}set TabDisplay(t){this.$TabDisplay=t}get TabDisplay(){return this.$TabDisplay}set HideToolbar(t){this.$HideToolbar=t}get HideToolbar(){return this.$HideToolbar}set HideMenubar(t){this.$HideMenubar=t}get HideMenubar(){return this.$HideMenubar}set HideWindowUI(t){this.$HideWindowUI=t}get HideWindowUI(){return this.$HideWindowUI}set ZoomChoice(t){this.$ZoomChoice=t}get ZoomChoice(){return this.$ZoomChoice}}is([$e(),ve(),be(ge,Ce,{default:"None"}),ns("design:type",String)],fs.prototype,"$PageMode",void 0),is([$e(),ve(),be(ge,Ce,{default:"OneColumn"}),ns("design:type",String)],fs.prototype,"$PageLayout",void 0),is([$e(),ve(),be(ge,Ce,{default:"DocTitle"}),ns("design:type",String)],fs.prototype,"$TabDisplay",void 0),is([$e(),ve(),be(ge,De,{default:!1}),ns("design:type",Object)],fs.prototype,"$HideToolbar",void 0),is([$e(),ve(),be(ge,De,{default:!1}),ns("design:type",Object)],fs.prototype,"$HideMenubar",void 0),is([$e(),ve(),be(ge,De,{default:!1}),ns("design:type",Object)],fs.prototype,"$HideWindowUI",void 0),is([$e(),ve(),be(ye,gs),ns("design:type",gs)],fs.prototype,"$ZoomChoice",void 0);class ys extends te{constructor(){super()}set Name(t){this.$Name=t}get Name(){return this.$Name}set Dest(t){this.$Dest=t}get Dest(){return this.$Dest}}is([$e(),ve(),be(fe,Ce,{required:!0}),ns("design:type",Object)],ys.prototype,"$Name",void 0),is([$e(),ve(),be(ge,Be,{required:!0}),ns("design:type",Be)],ys.prototype,"$Dest",void 0);class ms extends te{constructor(){super()}set Bookmark(t){this.$Bookmark=t}get Bookmark(){return this.$Bookmark}}is([$e(),ve(),be(ge,ys,{required:!0,multiple:!0}),ns("design:type",Object)],ms.prototype,"$Bookmark",void 0);let vs=class extends te{constructor(){super()}set CommonData(t){this.$CommonData=t}get CommonData(){return this.$CommonData}set Pages(t){this.$Pages=t}get Pages(){return this.$Pages}set Outlines(t){this.$Outlines=t}get Outlines(){return this.$Outlines}set Permissions(t){this.$Permissions=t}get Permissions(){return this.$Permissions}set Actions(t){this.$Actions=t}get Actions(){return this.$Actions}set VPreferences(t){this.$VPreferences=t}get VPreferences(){return this.$VPreferences}set Bookmarks(t){this.$Bookmarks=t}get Bookmarks(){return this.$Bookmarks}set Annotations(t){this.$Annotations=t}get Annotations(){return this.$Annotations}set CustomTags(t){this.$CustomTags=t}get CustomTags(){return this.$CustomTags}set Attachments(t){this.$Attachments=t}get Attachments(){return this.$Attachments}set Extensions(t){this.$Extensions=t}get Extensions(){return this.$Extensions}set PageForm(t){this.$PageForm=t}get PageForm(){return this.$PageForm}set Forms(t){this.$Forms=t}get Forms(){return this.$Forms}relateAnnotations(){return this.related()}relateCustomTags(){return this.related()}relateAttachments(){return this.related()}relateExtensions(){return this.related()}relatePageForm(){return this.related()}relateForms(){return this.related()}setUnitID(t){this._maxID=Ie.max(this._maxID,t)}identity(t=!0){var e,i,n,o;return os(this,void 0,void 0,(function*(){if(!this._identity){let r=null===(e=this.CommonData)||void 0===e?void 0:e.MaxUnitID;if(s(r)&&t){const t=null===(n=null===(i=this.Pages)||void 0===i?void 0:i.Page)||void 0===n?void 0:n.last();if(t){const e=yield t.relatePage().get(),i=t=>{const e=t.available();if(e)this.setUnitID(e.ID);else if(t.PageBlock){const e=t.PageBlock;this.setUnitID(e.ID),gn(e.GraphUnits,i)}};gn(null===(o=null==e?void 0:e.Content)||void 0===o?void 0:o.Layer,(t=>{this.setUnitID(t.ID),gn(t.GraphUnits,i)}))}r=this._maxID}this._identity=new Ie(r)}return this._identity}))}pageCount(){var t,e;return null!==(e=null===(t=this.Pages)||void 0===t?void 0:t.count())&&void 0!==e?e:0}pageAt(t){var e,i;return null===(i=null===(e=this.Pages)||void 0===e?void 0:e.Page)||void 0===i?void 0:i.get(t)}newPage(){return this.Pages||(this.Pages=this.makeModel(ls,!0)),this.Pages.newPage()}modify(){return this._modifier||(this._modifier=new $s(this)),this._modifier}};is([$e(),ve(),be(ge,ss,{required:!0}),ns("design:type",ss)],vs.prototype,"$CommonData",void 0),is([$e(),ve(),be(ge,ls,{required:!0}),ns("design:type",ls)],vs.prototype,"$Pages",void 0),is([$e(),ve(),be(ge,ds),ns("design:type",ds)],vs.prototype,"$Outlines",void 0),is([$e(),ve(),be(ge,ps),ns("design:type",ps)],vs.prototype,"$Permissions",void 0),is([$e(),ve(),be(ge,oi),ns("design:type",oi)],vs.prototype,"$Actions",void 0),is([$e(),ve(),be(ge,fs),ns("design:type",fs)],vs.prototype,"$VPreferences",void 0),is([$e(),ve(),be(ge,ms),ns("design:type",ms)],vs.prototype,"$Bookmarks",void 0),is([$e(),ve(),be(ge,Ce,{relative:es}),ns("design:type",Object)],vs.prototype,"$Annotations",void 0),is([$e(),ve(),be(ge,Ce,{relative:Nr}),ns("design:type",Object)],vs.prototype,"$CustomTags",void 0),is([$e(),ve(),be(ge,Ce,{relative:Gr}),ns("design:type",Object)],vs.prototype,"$Attachments",void 0),is([$e(),ve(),be(ge,Ce,{relative:Fr}),ns("design:type",Object)],vs.prototype,"$Extensions",void 0),is([$e(),ve(),be(ge,Ce,{relative:ar}),ns("design:type",Object)],vs.prototype,"$PageForm",void 0),is([$e(),ve(),be(ge,Ce,{relative:Pr}),ns("design:type",Object)],vs.prototype,"$Forms",void 0),is([we("Annotations"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],vs.prototype,"relateAnnotations",null),is([we("CustomTags"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],vs.prototype,"relateCustomTags",null),is([we("Attachments"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],vs.prototype,"relateAttachments",null),is([we("Extensions"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],vs.prototype,"relateExtensions",null),is([we("PageForm"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],vs.prototype,"relatePageForm",null),is([we("Forms"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",Object)],vs.prototype,"relateForms",null),vs=is([me("Document","/Doc_{index}/Document.xml"),ns("design:paramtypes",[])],vs);class $s{constructor(t){this.document=t}nextID(){return os(this,void 0,void 0,(function*(){return this.identity||(this.identity=(yield this.document.identity()).newStart()),this.identity.next()}))}addAttachment(t,e){var i,n,o;return os(this,void 0,void 0,(function*(){const r=yield Te.get(this.document.relateAttachments(),Gr),s=yield r.addAttachment(t);return s.ID=yield this.nextID(),s.Name=null!==(i=null==e?void 0:e.name)&&void 0!==i?i:"unknown",s.Format=null!==(n=null==e?void 0:e.format)&&void 0!==n?n:"unknown",s.Visible=null===(o=null==e?void 0:e.visible)||void 0===o||o,s.Usage=null==e?void 0:e.usage,s.CreationDate=Se.INSTANCE.persist(new Date),s}))}addAnnot(t,e,i,n){return os(this,void 0,void 0,(function*(){const o=this.document.pageAt(t);if(!o)return;const r=o.ID,s=yield Te.get(this.document.relateAnnotations(),es),a=vn(s.findPage(r,!0)),l=(yield Te.get(a.relatePageAnnot(),Zr)).newAnnot();if(l.ID=yield this.nextID(),l.Type=e,l.Print=!1,l.Creator=C()+"_DMA",l.LastModDate=Se.INSTANCE.persist(new Date),n)for(let t of Object.keys(n)){const e=n[t];l.addParameter(t,e)}const u=l.makeModel(Hr,!0);l.Appearance=u;const d=u.newBlock();return yield i(d),l}))}addMedia(t,e,i){var n,o;return os(this,void 0,void 0,(function*(){const r=null!==(n=this.document.CommonData)&&void 0!==n?n:this.document.makeModel(ss,!0);this.document.CommonData=r;const s=yield Te.get(r.relateDocumentResource(),nn,"Public"+en);s.BaseLoc||(s.BaseLoc="Res");const a=s.newMedia();a.ID=yield this.nextID(),a.Type=t,a.Format=null==i?void 0:i.format;const l=yield Re(e);return yield a.putData(`${je(l)}.${null!==(o=null==i?void 0:i.format)&&void 0!==o?o:"dat"}`,l),a}))}}class bs{constructor(t,...e){if(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,Array.isArray(t))[this.a,this.b,this.c,this.d,this.e,this.f]=t.map((t=>Number.parseFloat(t)));else switch(typeof t){case"number":this.a=t,[this.b,this.c,this.d,this.e,this.f]=e;break;case"object":for(let e of["a","b","c","d","e","f"]){const i=Number.parseFloat(t[e]);Number.isNaN(i)||(this[e]=i)}}}transform(t,e,i,n,o,r){const{a:s,b:a,c:l,d:u,e:d,f:c}=this;return new bs(s*t+l*e,a*t+u*e,s*i+l*n,a*i+u*n,s*o+l*r+d,a*o+u*r+c)}multiply(t){return this.transform(t.a,t.b,t.c,t.d,t.e,t.f)}inverse(){const{a:t,b:e,c:i,d:n,e:o,f:r}=this,s=t*n-e*i;return new bs(n/s,e/-s,i/-s,t/s,(n*o-i*r)/-s,(e*o-t*r)/s)}toDOM(){return new DOMMatrix([this.a,this.b,this.c,this.d,this.e,this.f])}applyToContext2D(t,e=!1){e?t.setTransform(this.a,this.b,this.c,this.d,this.e,this.f):t.transform(this.a,this.b,this.c,this.d,this.e,this.f)}applyToPoint(t,e){return this.calc(t,e)}calc(t,e){return[t*this.a+e*this.c+this.e,t*this.b+e*this.d+this.f]}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}equals(t){return this==t||this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.e==t.e}translate(t,e){return this.transform(1,0,0,1,t,e)}static translate(t,e){return(new bs).translate(t,e)}translateX(t){return this.transform(1,0,0,1,t,0)}translateY(t){return this.transform(1,0,0,1,0,t)}scale(t,e){return this.transform(t,0,0,null!=e?e:t,0,0)}static scale(t,e){return(new bs).scale(t,e)}scaleX(t){return this.transform(t,0,0,1,0,0)}getScaleX(){return Math.sqrt(this.a*this.a+this.b*this.b)}scaleY(t){return this.transform(1,0,0,t,0,0)}getScaleY(){return Math.sqrt(this.c*this.c+this.d*this.d)}skew(t,e){return this.transform(1,e,t,1,0,0)}skewX(t){return this.transform(1,0,t,1,0,0)}skewY(t){return this.transform(1,t,0,1,0,0)}flipX(){return this.transform(-1,0,0,1,0,0)}flipY(){return this.transform(1,0,0,-1,0,0)}rotate(t){const e=Math.cos(t),i=Math.sin(t);return this.transform(e,i,-i,e,0,0)}rotateDeg(t){return this.rotate(.017453292519943295*t)}isOnlyTranslate(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d}isDefault(){return bs.DEFAULT.equals(this)}}bs.DEFAULT=new bs;class ws{constructor(t,e){if("number"==typeof t)this.left=t,this.top=null!=e?e:0;else{if(!t||t.length<2)throw new RangeError("Point box length must >= 2");[this.left,this.top]=t}}get x(){return this.left}get y(){return this.top}}class xs{constructor(t,e){if("number"==typeof t)this.width=t,this.height=null!=e?e:0;else{if(!t||t.length<2)throw new RangeError("Size box length must >= 2");[this.width,this.height]=t}}toArray(){return[this.width,this.height]}}const Cs=Object.freeze({S:"M",M:"M",L:"L",Q:"Q",B:"C",A:"A",C:"Z"});class Ds{constructor(t,e){this.command=t,this.coords=e}clone(){return new Ds(this.command,[...this.coords])}abbreviate(t){return(this.command+" "+this.coords.map(t).join(" ")).trim()}toPathD(t){return(Cs[this.command]+" "+this.coords.map(t).join(" ")).trim()}}class Os extends Ds{constructor(t,e){super("M",[t,e])}}class Ps extends Ds{constructor(t,e){super("L",[t,e])}}class Ss extends Ds{constructor(t,e,i,n){super("Q",[t,e,i,n])}}class Is extends Ds{constructor(t,e,i,n,o,r){super("B",[t,e,i,n,o,r])}}class Ts extends Ds{constructor(t,e,i,n,o,r,s){super("A",[t,e,i,n?1:0,o?1:0,r,s])}}class Rs extends Ds{constructor(){super("C",[])}}var js;function As(t,e){if(e.isDefault())return[...t];const i=new Array;for(const n of t)switch(n.command){case"A":{const t=[...n.coords],o=e.toArray(),r=new js.Ellipse(t[0],t[1],t[2]).transform(o);o[0]*o[3]-o[1]*o[2]<0&&(t[4]=t[4]?0:1);const s=e.calc(t[5],t[6]);r.isDegenerate()?i.push(new Ds("L",s)):i.push(new Ds("A",[r.rx,r.ry,r.ax,t[3],t[4],s[0],s[1]]));break}default:{const t=[...n.coords];for(let i=0;i<t.length;i+=2){const n=e.calc(t[i],t[i+1]);t[i]=n[0],t[i+1]=n[1]}i.push(new Ds(n.command,t));break}}return i}!function(t){t.Ellipse=class{constructor(t,e,i){this.epsilon=1e-10,this.torad=Math.PI/180,this.rx=t,this.ry=e,this.ax=i}transform(t){const e=Math.cos(this.ax*this.torad),i=Math.sin(this.ax*this.torad),n=[this.rx*(t[0]*e+t[2]*i),this.rx*(t[1]*e+t[3]*i),this.ry*(-t[0]*i+t[2]*e),this.ry*(-t[1]*i+t[3]*e)],o=n[0]*n[0]+n[2]*n[2],r=n[1]*n[1]+n[3]*n[3];let s=((n[0]-n[3])*(n[0]-n[3])+(n[2]+n[1])*(n[2]+n[1]))*((n[0]+n[3])*(n[0]+n[3])+(n[2]-n[1])*(n[2]-n[1]));const a=(o+r)/2;if(s<this.epsilon*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;const l=n[0]*n[1]+n[2]*n[3];s=Math.sqrt(s);const u=a+s/2,d=a-s/2,c=Math.abs(l)>Math.abs(u-r)?(u-o)/l:l/(u-r);return this.ax=Math.abs(l)<this.epsilon&&Math.abs(u-r)<this.epsilon?90:Math.atan(c)/this.torad,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(d)):(this.ax+=90,this.rx=Math.sqrt(d),this.ry=Math.sqrt(u)),this}isDegenerate(){return this.rx<this.epsilon*this.ry||this.ry<this.epsilon*this.rx}};const e=2*Math.PI;function i(t,e,i,n){let o=t*i+e*n;return o>1&&(o=1),o<-1&&(o=-1),(t*n-e*i<0?-1:1)*Math.acos(o)}function n(t,e){const i=4/3*Math.tan(e/4),n=Math.cos(t),o=Math.sin(t),r=Math.cos(t+e),s=Math.sin(t+e);return[n,o,n-o*i,o+n*i,r+s*i,s-r*i,r,s]}t.toCurve=function(t,o,r,s,a,l,u,d,c){const h=Math.sin(c*e/360),p=Math.cos(c*e/360),g=p*(t-r)/2+h*(o-s)/2,f=-h*(t-r)/2+p*(o-s)/2;if(0===g&&0===f)return[];if(0===u||0===d)return[];u=Math.abs(u),d=Math.abs(d);const y=g*g/(u*u)+f*f/(d*d);y>1&&(u*=Math.sqrt(y),d*=Math.sqrt(y));const m=function(t,n,o,r,s,a,l,u,d,c){const h=c*(t-o)/2+d*(n-r)/2,p=-d*(t-o)/2+c*(n-r)/2,g=l*l,f=u*u,y=h*h,m=p*p;let v=g*f-g*m-f*y;v<0&&(v=0),v/=g*m+f*y,v=Math.sqrt(v)*(s===a?-1:1);const $=v*l/u*p,b=v*-u/l*h,w=c*$-d*b+(t+o)/2,x=d*$+c*b+(n+r)/2,C=(h-$)/l,D=(p-b)/u,O=(-h-$)/l,P=(-p-b)/u,S=i(1,0,C,D);let I=i(C,D,O,P);return 0===a&&I>0&&(I-=e),1===a&&I<0&&(I+=e),[w,x,S,I]}(t,o,r,s,a,l,u,d,h,p),v=[];let $=m[2],b=m[3];const w=Math.max(Math.ceil(Math.abs(b)/(e/4)),1);b/=w;for(let t=0;t<w;t++)v.push(n($,b)),$+=b;return v.map((function(t){for(let e=0;e<t.length;e+=2){let i=t[e+0],n=t[e+1];i*=u,n*=d;const o=p*i-h*n,r=h*i+p*n;t[e+0]=o+m[0],t[e+1]=r+m[1]}return t}))};t.Painter=class{constructor(t,e,i,n,o,r,s){this.rule="nonzero",this.cx=0,this.cy=0,this.rx=t,this.ry=e,this.angle=i,this.large=n?1:0,this.sweep=o?1:0,this.x=r,this.y=s}vectorMagnitude(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}vectorsRatio(t,e){return(t[0]*e[0]+t[1]*e[1])/(this.vectorMagnitude(t)*this.vectorMagnitude(e))}vectorsAngle(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(this.vectorsRatio(t,e))}paintTo2dBatik(t){}paint(t){let e=this.rx,i=this.ry,n=this.angle,o=this.large,r=this.sweep,s=this.x,a=this.y,l=this.cx,u=this.cy;if(e*i==0)return l=s,u=a,void t.lineTo(l,u);e=Math.abs(e),i=Math.abs(i);const d=new ws([l,u]),c=new ws([s,a]),h=n*(Math.PI/180),p=new ws([Math.cos(h)*(d.x-c.x)/2+Math.sin(h)*(d.y-c.y)/2,-Math.sin(h)*(d.x-c.x)/2+Math.cos(h)*(d.y-c.y)/2]),g=Math.pow(p.x,2)/Math.pow(e,2)+Math.pow(p.y,2)/Math.pow(i,2);g>1&&(e*=Math.sqrt(g),i*=Math.sqrt(g));let f=(o===r?-1:1)*Math.sqrt((Math.pow(e,2)*Math.pow(i,2)-Math.pow(e,2)*Math.pow(p.y,2)-Math.pow(i,2)*Math.pow(p.x,2))/(Math.pow(e,2)*Math.pow(p.y,2)+Math.pow(i,2)*Math.pow(p.x,2)));isNaN(f)&&(f=0);const y=new ws([f*e*p.y/i,f*-i*p.x/e]),m=new ws([(d.x+c.x)/2+Math.cos(h)*y.x-Math.sin(h)*y.y,(d.y+c.y)/2+Math.sin(h)*y.x+Math.cos(h)*y.y]),v=this.vectorsAngle([1,0],[(p.x-y.x)/e,(p.y-y.y)/i]),$=[(p.x-y.x)/e,(p.y-y.y)/i],b=[(-p.x-y.x)/e,(-p.y-y.y)/i];let w=this.vectorsAngle($,b);if(this.vectorsRatio($,b)<=-1&&(w=Math.PI),this.vectorsRatio($,b)>=1&&(w=0),isNaN(v)||isNaN(w))console.log("Draw command A failed");else{const n=e>i?e:i,o=e>i?1:e/i,s=e>i?i/e:1;try{t.translate(m.x,m.y),t.rotate(h),t.scale(o,s),t.arc(0,0,n,v,v+w,Boolean(1-r)),t.scale(1/o,1/s),t.rotate(-h),t.translate(-m.x,-m.y)}catch(t){console.log(t)}}}}}(js||(js={}));const Fs=t=>Number.isNaN(t)?"0":(Math.round(1e4*t)/1e4).toString();var Ms;!function(t){function e(t,e){t.minX>e?t.minX=e:t.maxX<e&&(t.maxX=e)}function i(t,e){t.minY>e?t.minY=e:t.maxY<e&&(t.maxY=e)}function n(t,e,i,n,o){const r=1-t;return r*r*r*e+3*r*r*t*i+3*r*t*t*n+t*t*t*o}function o(t,o,r,s,a,l,u,d){const c={minX:Math.min(t,u),minY:Math.min(o,d),maxX:Math.max(t,u),maxY:Math.max(o,d)},h=r-t,p=s-o,g=l-s,f=u-a,y=d-l;if(r<c.minX||r>c.maxX||a<c.minX||a>c.maxX){let i=a-r;h+f!==2*i&&(i+=1e-4);let o=2*(h-i),s=2*(h-2*i+f);0===s&&(s=1e-4);let l=(2*i-2*h)*(2*i-2*h)-2*h*s,d=Math.sqrt(l),p=(o+d)/s,g=(o-d)/s;0<p&&p<1&&e(c,n(p,t,r,a,u)),0<g&&g<1&&e(c,n(g,t,r,a,u))}if(s<c.minY||s>c.maxY||l<c.minY||l>c.maxY){let t=g;p+y!==2*t&&(t+=1e-4);let e=2*(p-t),r=2*(p-2*t+y);0===r&&(r=1e-4);let a=(2*t-2*p)*(2*t-2*p)-2*p*r,u=Math.sqrt(a),h=(e+u)/r,f=(e-u)/r;0<h&&h<1&&i(c,n(h,o,s,l,d)),0<f&&f<1&&i(c,n(f,o,s,l,d))}return[c.minX,c.minY,c.minX,c.maxY,c.maxX,c.maxY,c.maxX,c.minY]}t.calc=function(t,e){let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const a=function(t){t<i&&(i=t),t>n&&(n=t)},l=function(t){t<r&&(r=t),t>s&&(s=t)};let u=0,d=0;for(let i of function(t){const e=new Array;return function(t,e){let i=0,n=0,o=0,r=0,s=0;for(const a of t){if(!1===e(a,i++,n,o))break;switch(a.command){case"M":r=n=a.coords[0],s=o=a.coords[1];break;case"C":n=r,o=s;break;default:const t=a.coords;n=t[t.length-2],o=t[t.length-1]}}}(t,((t,i,n,o)=>{if("A"===t.command){const i=t.coords,r=i[5],s=i[6],a=js.toCurve(n,o,r,s,i[3],i[4],i[0],i[1],i[2]);0===a.length?e.push(new Ds("L",[r,s])):a.forEach((function(t){e.push(new Ds("B",[t[2],t[3],t[4],t[5],t[6],t[7]]))}))}else e.push(t)})),e}(t)){const t=i.coords;switch(i.command){case"B":for(let i=0;i<t.length;i+=6){if(e){const e=o(u,d,t[i],t[i+1],t[i+2],t[i+3],t[i+4],t[i+5]);a(e[0]),a(e[4]),l(e[1]),l(e[5])}else a(t[i]),l(t[i+1]),a(t[i+2]),l(t[i+3]),a(t[i+4]),l(t[i+5]);u=t[i+4],d=t[i+5]}break;case"Q":for(let i=0;i<t.length;i+=4){const n=u+2/3*(t[i]-u),r=d+2/3*(t[i+1]-d),s=t[i+2]+2/3*(t[i]-t[i+2]),c=t[i+3]+2/3*(t[i+1]-t[i+3]);if(e){const e=o(u,d,n,r,s,c,t[i+2],t[i+3]);a(e[0]),a(e[4]),l(e[1]),l(e[5])}else a(n),l(r),a(s),l(c),a(t[i+2]),l(t[i+3]);u=t[i+2],d=t[i+3]}break;default:if(t.length>1)for(let e=0;e<t.length;e+=2)u=t[e],d=t[e+1],a(u),l(d)}}return new Ls(i,r,n-i,s-r)}}(Ms||(Ms={}));class Bs{constructor(t="nonzero"){this.rule=t}paint(t,e){let i=this.segments();e&&!e.isDefault()&&(i=Bs.transform(i,e)),t.beginPath();let n=0,o=0,r=0,s=0;for(const e of i){const i=e.coords;switch(e.command){case"S":[n,o]=i,t.moveTo(n,o);break;case"M":[n,o]=[r,s]=i,t.moveTo(n,o);break;case"L":[n,o]=i,t.lineTo(n,o);break;case"Q":{const[e,n,o,r]=i;t.quadraticCurveTo(e,n,o,r);break}case"B":{const e=i.length;if(2==e)[n,o]=i,t.bezierCurveTo(n,o,n,o,n,o);else if(4==e){const[e,n,o,r]=i;t.bezierCurveTo(e,n,o,r,o,r)}else if(6==e){const[e,n,o,r,s,a]=i;t.bezierCurveTo(e,n,o,r,s,a)}else console.log("CubicBezier number invalid",i);break}case"A":{const[e,r]=i,s=new js.Painter(e,r,i[2],i[3],i[4],i[5],i[6]);s.cx=n,s.cy=o,s.paint(t),n=e,o=r;break}case"C":n=r,o=s,t.closePath()}}}bound(){return Ms.calc(this.segments(),!0)}static transform(t,e){return As(t,e)}abbreviate(t=Fs){return this.segments().map((e=>e.abbreviate(t))).join(" ")}toPathD(t=Fs){return this.segments().map((e=>e.toPathD(t))).join(" ")}}class ks extends Bs{constructor(t,e,i,n){super(),this.left=0,this.top=0,this.right=0,this.bottom=0,"number"==typeof t?(this.left=t,this.top=null!=e?e:0,this.right=null!=i?i:0,this.bottom=null!=n?n:0):t&&t.length>=4&&([this.left,this.top,this.right,this.bottom]=t)}segments(){const t=[];return t.push(new Os(this.left,this.top)),t.push(new Ps(this.right,this.bottom)),t}}class Ls extends Bs{constructor(t,e,i,n){super(),this.left=0,this.top=0,this.width=0,this.height=0,"number"==typeof t?(this.left=t,this.top=null!=e?e:0,this.width=null!=i?i:0,this.height=null!=n?n:0):t&&t.length>=4&&([this.left,this.top,this.width,this.height]=t)}static fromPoint(t,e,i,n){const o=Math.min(t,i),r=Math.min(e,n),s=Math.abs(t-i),a=Math.abs(e-n);return new Ls(o,r,s,a)}static fromObject(t){if("object"==typeof t){const e=t.get,i="function"==typeof e,n=n=>{let o;for(let r of n)if(i&&(o=e.call(t,r)),null==o&&(o=t[r]),null!=o)break;return o+""},o=[["left","x"],["top","y"],["width","w"],["height","h"]].map((t=>n(t))).map((t=>Number.parseFloat(t))).filter((t=>!Number.isNaN(t)));if(4===o.length)return new Ls(o)}return Ls.EMPTY}get x(){return this.left}get y(){return this.top}get right(){return this.left+this.width}get bottom(){return this.top+this.height}point(){return new ws(this.left,this.top)}size(){return new xs(this.width,this.height)}move(t,e){return new Ls(this.left+t,this.top+e,this.width,this.height)}moveTo(t,e){return new Ls(t,e,this.width,this.height)}resizeTo(t,e){return new Ls(this.left,this.top,t,e)}scale(t,e){return e=null!=e?e:t,new Ls(this.x*t,this.y*e,this.width*t,this.height*e)}boxWith(t){let e=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE,o=Number.MIN_VALUE;return[[this.left,this.top],[this.right,this.top],[this.right,this.bottom],[this.left,this.bottom]].map((e=>t.applyToPoint(e[0],e[1]))).forEach((t=>{e=Math.min(t[0],e),i=Math.min(t[1],i),n=Math.max(t[0],n),o=Math.max(t[1],o)})),new Ls(e,i,n-e,o-i)}intersect(t){if(!t)return new Ls(this.left,this.top,this.width,this.height);const e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.right,t.right),o=Math.min(this.bottom,t.bottom);return new Ls(e,i,Math.max(0,n-e),Math.max(0,o-i))}isIntersect(t){return!(t.left>this.right||t.right<this.left||t.top>this.bottom||t.bottom<this.top)}union(t){if(!t)return new Ls(this.left,this.top,this.width,this.height);let e=this.width,i=this.height;if((e|i)<0)return new Ls(t.left,t.top,t.width,t.height);let n=t.width,o=t.height;if((n|o)<0)return new Ls(this.left,this.top,this.width,this.height);let r=this.x,s=this.y;e+=r,i+=s;let a=t.x,l=t.y;return n+=a,o+=l,r>a&&(r=a),s>l&&(s=l),e<n&&(e=n),i<o&&(i=o),e-=r,i-=s,new Ls(r,s,e,i)}eqauls(t){return!!t&&(this.left==t.left&&this.top==t.top&&this.right==t.right&&this.bottom==t.bottom)}segments(){const t=new Array;return t.push(new Os(this.left,this.top)),t.push(new Ps(this.right,this.top)),t.push(new Ps(this.right,this.bottom)),t.push(new Ps(this.left,this.bottom)),t.push(new Ps(this.left,this.top)),t}asPath(){return new _s(this.segments())}toArray(){return[this.left,this.top,this.width,this.height]}hasNothing(){return this===Ls.EMPTY||0==this.width||0==this.height}contains(t,e=0){let i=0,n=0;return[i,n]="number"==typeof t?[t,e]:[t.x,t.y],!(i<this.x||i>this.right||n<this.y||n>this.bottom)}}Ls.EMPTY=new Ls(0,0,0,0);class Ns extends Ls{constructor(t,e,i){super(t),this.horizonalRadius=e,this.verticalRadius=null!=i?i:e}scale(t,e){return e=null!=e?e:t,new Ns([this.x*t,this.y*e,this.width*t,this.height*e],this.horizonalRadius*t,this.verticalRadius*e)}segments(){if(0==this.horizonalRadius&&0==this.verticalRadius)return super.segments();const t=Math.min(this.horizonalRadius,this.width/2),e=Math.min(this.verticalRadius,this.height/2),{left:i,top:n,right:o,bottom:r}=this,s=[];return s.push(new Os(i+t,n)),s.push(new Ps(o-t,n)),s.push(new Ts(t,e,0,0,1,o,n+e)),s.push(new Ps(o,r-e)),s.push(new Ts(t,e,0,0,1,o-t,r)),s.push(new Ps(i+t,r)),s.push(new Ts(t,e,0,0,1,i,r-e)),s.push(new Ps(i,n+e)),s.push(new Ts(t,e,0,0,1,i+t,n)),s}get rx(){return this.horizonalRadius}get ry(){return this.verticalRadius}}var Es;!function(t){let e;function i(t,i,n,o=!1){const r=new Array,s=new Array,a=()=>{if(s.length>0){const t=Number.parseFloat(s.join(""));return s.length=0,t}return Number.NaN};let l=i;for(;l<t.length;l++){const i=t.charAt(l);if(e.num.test(i))s.push(i);else if("."==i){if(s.includes(".")&&(r.push(a()),r.length>=n))break;s.push(i)}else if("-"==i||"+"==i){if(s.length>0&&(r.push(a()),r.length>=n))break;s.push(i)}else if(e.separator.test(i)){if(s.length>0&&r.push(a()),r.length>=n)break}else if(e.letter.test(i))break}if(s.length>0&&r.push(a()),r.length!=n&&!o)throw new RangeError(`Need ${n} numbers but only find ${r.length}`);return[l,r]}!function(t){t.num=/[0-9]/,t.separator=/[\s\,]/,t.letter=/[a-zA-Z]/}(e||(e={})),t.parseAbbreviatedData=function(t){const e=new Array;let n;for(let o=0;o<t.length;)switch(t.charAt(o)){case"S":n=i(t,o+1,2),o=n[0],e.push(new Ds("S",n[1]));break;case"M":n=i(t,o+1,2),o=n[0],e.push(new Ds("M",n[1]));break;case"L":n=i(t,o+1,2),o=n[0],e.push(new Ds("L",n[1]));break;case"Q":n=i(t,o+1,4),o=n[0],e.push(new Ds("Q",n[1]));break;case"B":n=i(t,o+1,6,!0),o=n[0],e.push(new Ds("B",n[1]));break;case"A":n=i(t,o+1,7),o=n[0],e.push(new Ds("A",n[1]));break;case"C":e.push(new Ds("C",[])),o++;break;default:o++}return e},t.parsePathD=function(t){const e=new Array;let n,o,r=0,s=0,a=0,l=0;const u=(t,e,i,n)=>{if(t.toLowerCase()!=t)return e;const o=[...e];for(let t=0;t<o.length;)o[t++]+=i,o[t++]+=n;return o};for(let d=0;d<t.length;){let c=t.charAt(d);switch(c){case"M":case"m":[d,n]=i(t,d+1,2),n=u(c,n,a,l),r=a=n[0],s=l=n[1],e.push(new Os(a,l));break;case"L":case"l":[d,n]=i(t,d+1,2),n=u(c,n,a,l),a=n[0],l=n[1],e.push(new Ps(a,l));break;case"H":case"h":[d,n]=i(t,d+1,1),n=u(c,[n[0],0],a,l),a=n[0],e.push(new Ps(a,l));break;case"V":case"v":[d,n]=i(t,d+1,1),n=u(c,[0,n[0]],a,l),l=n[1],e.push(new Ps(a,l));break;case"Q":case"q":[d,n]=i(t,d+1,4),n=u(c,n,a,l),a=n[2],l=n[3],e.push(new Ss(n[0],n[1],a,l));break;case"T":case"t":[d,n]=i(t,d+1,2),n=u(c,n,a,l),o=e[e.length-1],o&&"Q"==o.command?e.push(new Ss(2*a-o.coords[0],2*l-o.coords[1],n[0],n[1])):e.push(new Ss(a,l,n[0],n[1])),a=n[0],l=n[1];break;case"C":case"c":[d,n]=i(t,d+1,6),n=u(c,n,a,l),a=n[4],l=n[5],e.push(new Is(n[0],n[1],n[2],n[3],a,l));break;case"S":case"s":[d,n]=i(t,d+1,4),n=u(c,n,a,l),o=e[e.length-1],o&&"B"==o.command?e.push(new Is(2*a-o.coords[2],2*l-o.coords[3],n[0],n[1],n[2],n[3])):e.push(new Is(a,l,n[0],n[1],n[2],n[3])),a=n[2],l=n[3];break;case"A":[d,n]=i(t,d+1,7),a=n[5],l=n[6],e.push(new Ts(n[0],n[1],n[2],n[3],n[4],a,l));break;case"a":[d,n]=i(t,d+1,7),a+=n[5],l+=n[6],e.push(new Ts(n[0],n[1],n[2],n[3],n[4],a,l));break;case"Z":case"z":[a,l]=[r,s],e.push(new Rs),d++;break;default:d++}}return e}}(Es||(Es={}));class _s extends Bs{constructor(t,e="nonzero"){super(e),this.segment=[...t]}static parse(t,e){const i=Es.parseAbbreviatedData(e);return new _s(i,t)}static fromPathD(t){const e=Es.parsePathD(t);return new _s(e)}segments(){return[...this.segment]}transform(t){const e=As(this.segment,t);return new _s(e,this.rule)}}const Vs={x:0,y:0};function qs(t,e,i,n,o,r){let s=0,a=0,l=0,u=0,d=0,c=0;return"number"==typeof t?(s=t,a=null!=e?e:0,l=null!=i?i:0,u=null!=n?n:0,d=null!=o?o:0,c=null!=r?r:0):(s=t.x,a=t.y,l=(null!=e?e:Vs).x,u=(null!=e?e:Vs).y,d=(null!=i?i:Vs).x,c=(null!=i?i:Vs).y),[s,a,l,u,d,c]}class Gs extends Bs{constructor(t="nonzero"){super(t),this.segment=new Array}isEmpty(){return 0==this.segment.length}moveTo(t,e){const[i,n]=qs(t,e);return this.segment.push(new Os(i,n)),this}lineTo(t,e){const[i,n]=qs(t,e);return this.segment.push(new Ps(i,n)),this}quadTo(t,e,i,n){const[o,r,s,a]=qs(t,e,i,n);return this.segment.push(new Ss(o,r,s,a)),this}curveTo(t,e,i,n,o,r){const[s,a,l,u,d,c]=qs(t,e,i,n,o,r);return this.segment.push(new Is(s,a,l,u,d,c)),this}cubicTo(t,e,i,n,o,r){const[s,a,l,u,d,c]=qs(t,e,i,n,o,r);return this.curveTo(s,a,l,u,d,c)}close(){return this.segment.push(new Rs),this}append(...t){return null==t||t.forEach((t=>{this.segment.push(...t.segments())})),this}add(...t){return this.segment.push(...t),this}segments(){return[...this.segment]}toPath(){return new _s(this.segment,this.rule)}}function zs(t){return 90*Math.round(function(t){for(;t<0;)t+=360;for(;t>=360;)t-=360;return t}(t)/90)}var Us,Ws=i(73148),Hs=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};function Ys(t){return t instanceof Uint8Array&&!Ct.isBuffer(t)?t:new Uint8Array(t)}!function(t){const e={size:0,init:()=>Hs(this,void 0,void 0,(function*(){return!0})),read:(t,e)=>Hs(this,void 0,void 0,(function*(){return new Uint8Array})),close:()=>{}},i=new Map;for(let t of Object.keys(e))i.set(t,typeof e[t]);t.is=function(t){if("object"!=typeof t)return!1;for(let[e,n]of i)if(typeof t[e]!==n)return!1;return!0},t.toUint8Array=function(t){return Hs(this,void 0,void 0,(function*(){if(yield t.init()){const e=yield t.read(0,t.size);return t.close(),e}return new Uint8Array(0)}))}}(Us||(Us={}));var Xs=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Zs=pt.getLogger("Package");class Ks extends Ws.Ej{constructor(t){super(t),this._readable=t,this.size=0}init(){return Xs(this,void 0,void 0,(function*(){yield this._readable.init(),this.size=this._readable.size}))}readUint8Array(t,e){return Xs(this,void 0,void 0,(function*(){return this._readable.read(t,e).then((t=>Ys(t)))}))}close(){this._readable.close()}}class Qs extends Ws.QV{constructor(t){super(),this._writable=t}init(){return Xs(this,void 0,void 0,(function*(){yield this._writable.init()}))}writeUint8Array(t){return this._writable.write(t)}getData(){return Promise.resolve(this._writable)}close(){this._writable.close()}}class Js extends Ws.QV{constructor(t){super(),this.size=0,this.h=t,this.okay=!0}init(){return Xs(this,void 0,void 0,(function*(){this.okay=this.h.init()}))}writeUint8Array(t){return Xs(this,void 0,void 0,(function*(){this.okay=this.okay&&this.h.update(Ct.from(t))}))}getData(){return Xs(this,void 0,void 0,(function*(){return this.okay}))}}class ta{constructor(t){this.entry=t,this.data=new v((()=>this.entry.getUint8Array()),6e4)}name(){return this.entry.getFullname()}asBuffer(){return Xs(this,void 0,void 0,(function*(){return this.data.get()}))}hash(t){return Xs(this,void 0,void 0,(function*(){if(this.data.isAlive()){const e=yield this.data.get(),i=ce(t,Ct.from(e));if(i)return i}else{if(yield this.entry.getData(new Js(t))){const e=t.final();if(e)return e}}return Ct.alloc(0)}))}close(){this.data.dispose()}}class ea{constructor(t){this.modified=!1;const e=new p;this.zfs=e.promise,t?this.loadData(t,e):e.resolve(this.make())}get name(){return this._name}isOpen(){return Xs(this,void 0,void 0,(function*(){return this.zfs.then((t=>!!t)).catch((t=>(Zs.warn(t.message),!1)))}))}make(){return new Ws.fs.FS}loadData(t,e){Promise.resolve(t).then((i=>{const n=this.make(),o=n.root;let r;const s={useWebWorkers:M.webwork,filenameEncoding:"gb18030"};if(o&&"importZip"in o){let t;Us.is(i)?(this.readable=i,this._name=i.name,t=new Ks(i)):"string"==typeof i?t=!0===M.httpRangeRequest?new Ws.R(i,{useRangeHeader:!0,preventHeadRequest:!0,forceRangeRequests:!0,mode:"cors"}):new Ws.pE(i):i instanceof Blob?(t=new Ws.Nt(i),i instanceof File&&(this._name=i.name)):(i instanceof ArrayBuffer||i instanceof Uint8Array)&&(t=new Ws.I8(Ys(i))),t&&(r=o.importZip(t,s))}else Us.is(i)?(this.readable=i,this._name=i.name,r=n.importZip(new Ks(i),s)):"string"==typeof i?r=n.importHttpContent(i,{useRangeHeader:!0,preventHeadRequest:!0,forceRangeRequests:!0,mode:"cors"},s):i instanceof Blob?(r=n.importBlob(i,s),i instanceof File&&(this._name=i.name)):i instanceof ArrayBuffer?r="importUint8Array"in n?n.importUint8Array(Ys(i),s):n.importBlob(new Blob([Ys(i)]),s):i instanceof Uint8Array&&(r="importUint8Array"in n?n.importUint8Array(Ys(i),s):n.importBlob(new Blob([i]),s));r?r.then((()=>e.resolve(n))).catch((t=>e.reject(t))):e.reject("Not support source type "+typeof t)}))}normalize(t,e=!0){const i=St.normalize(t,e);if(""===i)throw new Q(It.EntryNameInvalid.code);return i}loadEntries(){return Xs(this,void 0,void 0,(function*(){if(this.entries&&!this.modified)return this.entries;const t=new Map,e=i=>{if(i&&i.length)for(const n of i)if(n instanceof Ws.fs.ZipDirectoryEntry)e(n.children);else{const e=this.normalize(n.getFullname());t.set(e,new ta(n))}};return e((yield this.zfs).children),this.modified=!1,this.entries=t,this.entries}))}names(){return Xs(this,void 0,void 0,(function*(){return[...(yield this.loadEntries()).values()].map((t=>t.name()))}))}has(t){return Xs(this,void 0,void 0,(function*(){if(t&&t.length){const e=yield this.loadEntries(),i=this.normalize(t);return e.has(i)}return!1}))}entry(t){return Xs(this,void 0,void 0,(function*(){Zs.debug(`Load entry ${t}`);const e=yield this.get(t);if(e)return e;throw new Q(It.EntryNotFound.code).set("name",t)}))}get(t){return Xs(this,void 0,void 0,(function*(){const e=this.normalize(t);if(e.length>0){return(yield this.loadEntries()).get(e)}}))}put(t,e){return Xs(this,void 0,void 0,(function*(){Zs.debug(`Put entry ${t}`);const i=this.normalize(t,!1),n=yield this.zfs,o=yield this.get(t);"string"==typeof e?o?o.entry.replaceText(e):n.addText(i,e):o?o.entry.replaceUint8Array(Ys(e)):"addUint8Array"in n?n.addUint8Array(i,Ys(e)):n.root.addUint8Array(i,Ys(e)),this.modified=!0}))}remove(t){return Xs(this,void 0,void 0,(function*(){Zs.debug(`Remove entry ${t}`);const e=yield this.get(t);e&&((yield this.zfs).remove(e.entry),this.modified=!0)}))}flush(t,e){return Xs(this,void 0,void 0,(function*(){const i=yield this.zfs,n={bufferedWrite:!0,useWebWorkers:M.webwork,level:M.zipLevel};if("arraybuffer"===t||"buffer"===t){let e;return e="exportUint8Array"in i?yield i.exportUint8Array(n):yield i.root.exportUint8Array(n),"arraybuffer"===t?(o=e).buffer.slice(o.byteOffset,o.byteOffset+o.byteLength):e}if("blob"===t)return yield i.exportBlob(n);if("writer"===t&&e){const t=e,o=new Qs(t);return"exportZip"in i?yield i.exportZip(o,n):yield i.root.exportZip(o,n),o.close(),t}var o;return null}))}copyTo(t){return Xs(this,void 0,void 0,(function*(){const e=yield this.loadEntries();for(const i of e.values())try{const e=yield i.asBuffer();yield t.put(i.name(),e)}catch(t){Zs.error("fail copy to target",i.name(),t)}}))}equals(t){return Xs(this,void 0,void 0,(function*(){return this===t}))}close(){var t,e;if(null===(t=this.readable)||void 0===t||t.close(),this.entries)for(const t of null===(e=this.entries)||void 0===e?void 0:e.values())t.close()}}var ia=new class{open(t){return Xs(this,void 0,void 0,(function*(){return new ea(t)}))}create(){return Xs(this,void 0,void 0,(function*(){return new ea}))}},na=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};function oa(){return r(x.packageFactory)?x.packageFactory():ia}function ra(t){return na(this,void 0,void 0,(function*(){return oa().open(t)}))}var sa=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const aa=t=>Ql.open(t),la=(t,e=!1)=>Ql.open(t,{type:"web",fetchURL:e}),ua=t=>{var e;null===(e=null==t?void 0:t.parentUntil(Ql))||void 0===e||e.close()},da=(t,e)=>sa(void 0,void 0,void 0,(function*(){var i;const n=null===(i=t.DocBody)||void 0===i?void 0:i.get(e);if(n)try{const t=n.Versions;if(t&&t.Version)for(let e of t.Version)if(!0===(null==e?void 0:e.Current)){const t=yield e.relateVersion().get();return yield null==t?void 0:t.relateDocument().get()}return yield n.relateDocument().get()}catch(t){throw new Q(It.DocumentOpenFailed.code,t)}})),ca=(t,e)=>sa(void 0,void 0,void 0,(function*(){const i=yield(n=t,sa(void 0,void 0,void 0,(function*(){return"string"==typeof n?la(n,!0):aa(n)})));var n;if(i)return da(i,e)})),ha=t=>{var e,i,n,o,r,s,a,l;const u=t.parentUntil(vs),d=t.Area,c=null===(e=u.CommonData)||void 0===e?void 0:e.PageArea,h=null!==(n=null!==(i=null==d?void 0:d.Rotate)&&void 0!==i?i:null==c?void 0:c.Rotate)&&void 0!==n?n:0;return{PhysicalBox:null!==(o=null==d?void 0:d.PhysicalBox)&&void 0!==o?o:null==c?void 0:c.PhysicalBox,ApplicationBox:null!==(r=null==d?void 0:d.ApplicationBox)&&void 0!==r?r:null==c?void 0:c.ApplicationBox,ContentBox:null!==(s=null==d?void 0:d.ContentBox)&&void 0!==s?s:null==c?void 0:c.ContentBox,BleedBox:null!==(a=null==d?void 0:d.BleedBox)&&void 0!==a?a:null==c?void 0:c.BleedBox,CropBox:null!==(l=null==d?void 0:d.CropBox)&&void 0!==l?l:null==c?void 0:c.CropBox,Rotate:zs(h)}},pa=t=>{var e,i;if(t){const n=t.parentUntil(vs),o=t.Area,r=null===(e=n.CommonData)||void 0===e?void 0:e.PageArea;let s;for(const t of[null==o?void 0:o.CropBox,null==r?void 0:r.CropBox])t&&(s=s?s.intersect(new Ls(t)):new Ls(t));if(s)return s;const a=null!==(i=null==o?void 0:o.PhysicalBox)&&void 0!==i?i:null==r?void 0:r.PhysicalBox;if(a)return new Ls(a)}return Ls.EMPTY};var ga;pt.getLogger("Renders");const fa=96,ya=Math.PI/180,ma=400,va=k;var $a,ba,wa,xa;!function(t){const e=(t,e)=>{const i=W.store.get(t);return"number"==typeof i?i:(W.store.set(t,e),e)};t.RENDER_CACHE=e("_render_cache_limit",50),t.IMAGE_CACHE=e("_image_cache_limit",100),t.GLYPH_CACHE=e("_glyph_cache_limit",800)}($a||($a={})),function(t){t.DPI="dpi",t.RATIO="ratio",t.ROTATE="rotate",t.BOUND="bound",t.PAGE_PREFIX="p_",t.MAIN="main",t.PRESSED="ts_pressed",t.START="ts_start",t.X0Y0="ts_x0y0",t.RECT="ts_rect",t.MODE="ts_mode",t.BODY="ts_body",t.MIME_TEXT="text/plain"}(ba||(ba={})),function(t){t.CanvasNotReady=Q.register(new Y(H.Render+1,"Canvas must init first"))}(wa||(wa={})),(xa||(xa={})).get=(()=>{const t="_config",e=W.store.get(t);if(e)return e;{const e={debug:{background:"",id:!1,boundary:!1,grid:!1,placeholder:!1}};return W.store.set(t,e),e}})();const Ca=25.4,Da=(t,e=96)=>t*e/Ca,Oa=(t,e=96)=>t*Ca/e,Pa=zs,Sa=(t,e)=>function(t,e,i){return zs(i)%180==0?[t,e]:[e,t]}(e[0],e[1],t),Ia=gn,Ta=fn,Ra=U.canvas.make,ja=null!==(ga=Ra(1,1).getContext("2d"))&&void 0!==ga?ga:new CanvasRenderingContext2D;var Aa=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Fa=pt.getLogger("FormTransfer",lt.INFO);class Ma{trParameters(t,e){var i,n,o;const r=e.Parameters=null!==(i=e.Parameters)&&void 0!==i?i:e.makeModel(Pn),s=r.Parameter=null!==(n=r.Parameter)&&void 0!==n?n:r.makeList();gn(null===(o=t.Parameters)||void 0===o?void 0:o.Parameter,(t=>{const e=r.makeModel(On);s.add(e),e.Name=t.Name,e.Value=t.Value}));const a=r.makeModel(On);s.add(a),a.Name="source",a.Value=`id[${t.ID}]`}trLayout(t,e){const i=e.makeModel(Un);i.CharSpacing=t.LetterSpacing,i.HorizontalAlign=t.HorizontalAlign,i.VerticalAlign=t.VerticalAlign,i.CharDirection=t.CharDirection,i.ReadDirection=t.ReadDirection,i.Indent=t.Indent,e.Layout=i;const n=t.Layout;if(!n)return;i.ENCharLength=n.ENCharLength,i.CNCharLength=n.CNCharLength,i.LineBreak=n.NewlineCharacter;const o=n.Choice;if(o)if(o.Cutoff){const t=o.Cutoff,e=(i.CT_LayoutChoice=i.makeModel(zn)).Cutoff=i.makeModel(Nn);e.Length=t.Length,e.Suffix=t.Suffix}else if(o.Wrap){const t=o.Wrap,e=(i.CT_LayoutChoice=i.makeModel(zn)).Wrap=i.makeModel(En);e.Length=t.Length,i.LineSpacing=t.LineSpace,e.AverageRows=t.AverageLines,i.MaxRows=t.MaxRowCount}else if(o.Rules){const t=o.Rules,e=(i.CT_LayoutChoice=i.makeModel(zn)).SizeShiftRules=i.makeModel(Vn);i.MaxRows=t.MaxRowCount;const n=e.Rule=e.makeList();gn(t.Rule,(t=>{const i=e.makeModel(_n);n.add(i),i.Min=t.Min,i.Max=t.Max,i.FontSize=t.FontSize}))}else if(o.AutoGroup){const t=o.AutoGroup,e=(i.CT_LayoutChoice=i.makeModel(zn)).TableLayout=i.makeModel(qn);i.LineSpacing=t.LineSpace,e.CellSeparator=t.Separator,e.MinColSpace=t.MinColSpace}else if(o.FitBoundary){const t=o.FitBoundary,e=(i.CT_LayoutChoice=i.makeModel(zn)).Adaptive=i.makeModel(Gn);e.MinFontSize=t.MinFontSize,e.DeltaSize=t.DeltaSize,e.ReduceFontFirst=t.ResizeFontFirst,i.LineSpacing=t.LineSpace,i.MaxRows=t.MaxRowCount}e.Layout=i}trLine(t,e){e.LineWidth=t.LineWidth,e.LineType=t.LineType,e.Color=t.Color}trEscape(t,e,i,n){var o;const r=i.DataList=null!==(o=i.DataList)&&void 0!==o?o:i.makeList(),s=i.makeModel(Cr);r.add(s),s.ID=n.next(),e.DataListID=s.ID;const a=s.Option=s.makeList();gn(t.Escape,(t=>{s.Name=t.Name;const e=s.makeModel(Zn);e.Text=t.Value,e.Value=t.Name,a.add(e)}))}trXxxfix(t,e,i,n){var o;if(t.DataRef&&t.DataRef.length?(e.ValueType="DataRef",e.Value=t.DataRef):(e.ValueType="Value",e.Value=t.Content),t.Escapes&&(null===(o=t.Escapes.Escape)||void 0===o?void 0:o.isNotEmpty())){const o=e.Escape=e.makeModel(xn);this.trEscape(t.Escapes,o,i,n)}}trCommonField(t,e,i,n){void 0!==t.ReadOnly&&(e.ReadOnly=t.ReadOnly),e.Visible=t.Visible,e.Printable=t.Printable,e.DataRef=t.DataRef,e.Boundary=t.Boundary,t.Padding&&t.Boundary&&(e.Padding=[t.Padding[0],t.Padding[1],t.Boundary[2]-t.Padding[0]-t.Padding[2],t.Boundary[3]-t.Padding[1]-t.Padding[3]]),e.CustomTagName=t.CustomTagName,e.CustomTagNameRef=t.CustomTagNameRef,this.trParameters(t,e);let o=e.getStyle();const r=t.FieldBoundary;if(r&&(r.Stroke||r.Fill)){o||(o=i.newStyle(),o.ID=n.next(),e.StyleID=o.ID);const t=o.Border=o.makeModel(Yn);switch(t.LineWidth=r.LineWidth,r.LineType){case"SolidLine":break;case"DashLine":t.DashPattern=[5,1];break;case"DotLine":t.DashPattern=[2,1];break;case"DashDotLine":t.DashPattern=[5,1,2,1];break;case"DashDotDotLine":t.DashPattern=[5,1,2,1,2,1]}t.BorderColor=r.StrokeColor,o.Background=r.FillColor}}trTextField(t,e,i,n){var o,r,s,a,l,u,d,c,h,p;this.trCommonField(t,e,i,n);let g=e.getStyle();g||(g=i.newStyle(),g.ID=n.next(),e.StyleID=g.ID);const f=g.Font=null!==(o=g.Font)&&void 0!==o?o:g.makeModel(Hn);f.FontName=null!==(r=t.FontName)&&void 0!==r?r:"",f.FontSize=null!==(s=t.FontSize)&&void 0!==s?s:9*Ca/72,f.Weight=t.Weight,f.Italic=t.Italic;const y=null===(a=t.ExtendFonts)||void 0===a?void 0:a.Font;if(y){let e=t.makeList();for(const i of y){const n=t.makeModel(Sr,!0);n.Charset=i.CharSet,n.Value=i.Value,e.add(n)}f.ShiftFontName=e}t.CheckBox&&(e.Type="Checkbox"),e.CustomDataName=t.CustomDataName,f.Color=t.Color;const m=t.Format;if(m&&m.Value){(e.Format=null!==(l=e.Format)&&void 0!==l?l:e.makeModel(Dn)).CustomFormat=m.Value}this.trLayout(t,g),e.Value=t.Value;const v=t.UnderLine;if(v){const t=g.UnderLine=g.makeModel(Ln);this.trLine(v,t)}const $=t.DeleteLine;if($){const t=g.DeleteLine=g.makeModel(Ln);this.trLine($,t)}const b=t.Escapes;if(b&&(null===(u=b.Escape)||void 0===u?void 0:u.isNotEmpty())){const t=e.Format=null!==(d=e.Format)&&void 0!==d?d:e.makeModel(Dn),o=t.Escape=t.makeModel(xn);this.trEscape(b,o,i,n)}const w=t.TextSeparator;if(w){const t=e.Format=null!==(c=e.Format)&&void 0!==c?c:e.makeModel(Dn);(t.TextSeparator=t.makeModel(wn)).EachLength=w.EachLength}const x=t.Prefix;if(x){const t=e.Format=null!==(h=e.Format)&&void 0!==h?h:e.makeModel(Dn),o=t.Prefix=t.makeModel(Cn);this.trXxxfix(x,o,i,n)}const C=t.Suffix;if(C){const t=e.Format=null!==(p=e.Format)&&void 0!==p?p:e.makeModel(Dn),o=t.Suffix=t.makeModel(Cn);this.trXxxfix(C,o,i,n)}}trImageField(t,e,i,n){var o;this.trCommonField(t,e,i,n);const r=t.Format;if(r&&r.length){(e.Format=null!==(o=e.Format)&&void 0!==o?o:e.makeModel(Dn)).CustomFormat=r}e.ValueType=t.ValueType,e.ImageLayoutMode=t.TileMode,e.Value=t.Value,"URI"===e.ValueType&&(e.ValueType=void 0),t.ImageDarken&&(e.BlendMode="Darken")}trField(t,e,i,n,o){var r,s,a,l,u,d,c,h;let p=null!==(s=null!==(r=t.FieldName)&&void 0!==r?r:t.Name)&&void 0!==s?s:"";switch(t.name()){case"TextBox":{0==p.length&&(p=` ${o}`),e.Type="Text";const r=t;this.trTextField(r,e,i,n);break}case"NumberBox":{0==p.length&&(p=` ${o}`),e.Type="Number";const r=t;if(this.trTextField(r,e,i,n),r.RoundMode){const t=e.Format=null!==(a=e.Format)&&void 0!==a?a:e.makeModel(Dn);switch(r.RoundMode){case"Floor":t.RoundMode="Floor";break;case"HalfUp":t.RoundMode="Ceil";break;case"HalfDown":t.RoundMode="Round"}}if(r.DisplayFormat&&r.DisplayFormat.length){const t=e.Format=null!==(l=e.Format)&&void 0!==l?l:e.makeModel(Dn);Fa.warn(r.DisplayFormat),t.NumberFormat=r.DisplayFormat}if(r.Format&&r.Format.Value){(e.Format=null!==(u=e.Format)&&void 0!==u?u:e.makeModel(Dn)).CustomFormat=r.Format.Value,e.setParam("FormatType","Custom")}if(r.DataRef){const t=r.DataRef.match(/^(sw:Sum(Page|Up|Total))\((.*)\)$/);if(t){t[1];const i=t[3];e.setParam("SubType","SumUp"),e.setParam("SumFieldID",i)}}break}case"DateBox":{0==p.length&&(p=` ${o}`),e.Type="DateTime";const r=t;if(this.trTextField(r,e,i,n),r.DisplayFormat){const t=e.Format=null!==(d=e.Format)&&void 0!==d?d:e.makeModel(Dn);t.NumberFormat=r.DisplayFormat,t.DateTimeFormat=null===(c=r.Format)||void 0===c?void 0:c.Value}if(r.InputFormat&&r.InputFormat.length){(e.Format=null!==(h=e.Format)&&void 0!==h?h:e.makeModel(Dn)).DateTimeInputFormat=r.InputFormat}break}case"ImageBox":{0==p.length&&(p=` ${o}`),e.Type="Image";const r=t;this.trImageField(r,e,i,n);break}case"BarcodeBox":{0==p.length&&(p=` ${o}`),e.Type="Barcode";const r=t;if(this.trImageField(r,e,i,n),r.Generator)switch(r.Generator){case"Common":e.Type="QRCode";break;case"GM":e.Type="GMCode";break;case"None":e.Type="Barcode"}r.SubType;break}case"SealBox":{0==p.length&&(p=` ${o}`),e.Type="Seal";const r=t;this.trImageField(r,e,i,n),e.SignatureID=r.SealID;break}case"OFDBox":{0==p.length&&(p=`OFD ${o}`),e.Type="OFD";const r=t;this.trImageField(r,e,i,n);break}default:return Fa.warn(`unsupport v1 field type ${t.name()}`),!1}return e.Name=p,!0}trGroups(t,e,i,n){const o=new Map;gn(t.Group,(t=>{const r=e.makeModel(pr);r.ID=n.next(),o.set(t.ID,r.ID);const s=r.makeList();if(gn(t.Field,(t=>{const e=t.ID,n=i.get(e);if(void 0!==n){const t=r.makeModel(Rn);t.ObjectID=n,s.add(t)}else Fa.warn(`group field ${e} not found mapping`)})),s.isNotEmpty()){r.FormObject=s,e.Group||(e.Group=e.makeList()),e.Group.add(r);const i=t.Extend;if(i){switch(i.Direction){case"top":r.Direction="Up";break;case"right":r.Direction="Right";break;case"bottom":r.Direction="Down";break;case"left":r.Direction="Left"}r.ItemSpace=i.LineSpace,r.MaxItemCount=i.MaxRowCount,r.ItemCustomTagName=i.GroupTagName}}r.GroupType=t.Type,t.SubGroupID&&(r.SubGroupID=t.SubGroupID)})),gn(e.Group,(t=>{t.SubGroupID&&(t.SubGroupID=o.get(+t.SubGroupID))}))}translate(t,e){var i;return Aa(this,void 0,void 0,(function*(){const n=e.parentUntil(vs);if(!n)return Fa.warn("Forms not found parent Document"),!1;const o=yield n.identity(),r=e.Form=null!==(i=e.Form)&&void 0!==i?i:e.makeList(),s=e.makeModel(Or);r.add(s),s.ID=o.next();const a=s.makeModel(Dr);a.ID=o.next(),a.Name="fromV1",yield s.relateForm().set(a);const l=a.makeList();let u=1;return yield fn(t.Page,(t=>Aa(this,void 0,void 0,(function*(){var i,n,r,s,d,c;const h=yield t.relatePageForm().get();if(!h||!h.Field)return;const p=new Map;if(gn(h.Field.toArray().sort(((t,e)=>{var i,n,o,r;return(null!==(n=null===(i=t.available())||void 0===i?void 0:i.ZIndex)&&void 0!==n?n:0)-(null!==(r=null===(o=e.available())||void 0===o?void 0:o.ZIndex)&&void 0!==r?r:0)})),(i=>{const n=i.available();if(!n)return;const r=a.makeModel(hr);r.PageID=t.PageID,r.ID=o.next(),this.trField(n,r,e,o,u++)&&(p.set(n.ID,r.ID),l.add(r))})),this.trGroups(h,a,p,o),h.CustomDatas&&(null===(i=h.CustomDatas.CustomData)||void 0===i?void 0:i.isNotEmpty())){const t=e.CustomDatas=null!==(n=e.CustomDatas)&&void 0!==n?n:e.makeModel(eo),i=t.CustomData=null!==(r=t.CustomData)&&void 0!==r?r:t.makeList();gn(h.CustomDatas.CustomData,(e=>{const n=t.makeModel(to);n.ID=o.next(),n.CustomDataName=e.CustomDataName,i.add(n)}))}if(h.CustomTags){const t=e.CustomTags=null!==(s=e.CustomTags)&&void 0!==s?s:e.makeModel(no),i=t.CustomTag=null!==(d=t.CustomTag)&&void 0!==d?d:t.makeList();gn(h.CustomTags.CustomTag,(e=>{const n=t.makeModel(io);n.ID=o.next(),n.CustomTagName=e.CustomTagName,n.CustomTagNameRef=e.CustomTagNameRef,i.add(n)}))}if(h.ContinuationPage){const i=e.ContinuationPage=null!==(c=e.ContinuationPage)&&void 0!==c?c:e.makeList(),n=e.makeModel(so);i.add(n),n.PageID=t.PageID;const o=h.ContinuationPage.NextPage;if(o){const t=n.makeModel(oo);n.NextPage=t,t.Type=o.Type,t.PageRef=o.PageRef,t.AutoHide=o.AutoHide,t.HomePageInstructions=o.HomePageInstructions}const r=h.ContinuationPage.EndPage;if(r){const t=n.makeModel(ro);n.EndPage=t,t.Type=r.Type,t.PageRef=r.PageRef,t.TailDataToEndTemplate=r.TailDataToEndTemplate}}})))),l.isNotEmpty()&&(a.FormObject=l),!0}))}}var Ba=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};var ka=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const La=pt.getLogger("HTTP");var Na,Ea;(Ea=Na||(Na={})).header=(t,e)=>{for(let[i,n]of t)if(i==e||i.toLowerCase()==e.toLowerCase())return n},Ea.toRange=(t,e)=>["Range",`bytes=${t}-${t+e-1}`],Ea.parseRange=t=>{const e=/(\w+)\s+(\d+)-(\d+)\/(\*|\d+)/.exec(t);if(e&&"bytes"==e[1]){const t=e[2],i=e[3],n=e[4],o=Number.parseInt(t),r=Number.parseInt(i);return"*"==n?[o,r,-1]:[o,r,Number.parseInt(n)]}return[0,0,0]};const _a=[];function Va(t){var e;return ka(this,void 0,void 0,(function*(){const i=Object.assign({},t);return i.headers=(null!==(e=i.headers)&&void 0!==e?e:[]).concat(_a),i.url.startsWith("file:")?function(t){return new Promise(((e,i)=>{const n=new XMLHttpRequest;if(n.open(t.method,t.url,!0),"json"==t.type?n.responseType="json":"binary"==t.type&&(n.responseType="arraybuffer"),Array.isArray(t.headers))for(let[e,i]of t.headers)n.setRequestHeader(e,i);t.cors,n.onerror=t=>{i(t)},n.onabort=t=>{i(t)},n.ontimeout=t=>{i(t)},n.onreadystatechange=()=>{if(n.readyState==XMLHttpRequest.DONE){const t=n.status;if(0===t||t>=200&&t<400){const i=new Array;let o=-1;const r=n.getAllResponseHeaders();r&&r.trim().split(/[\r\n]+/).forEach((t=>{const e=t.split(": "),n=e.shift();if(n){const t=e.join(": ");i.push([n,t]),"Content-Length"!=n&&"content-length"!=n.toLowerCase()||(o=Number.parseInt(t),Number.isNaN(o)&&(o=-1))}})),e({status:t,result:Promise.resolve(n.response),length:o,headers:i})}else i(t)}},n.send(t.data)}))}(i):function(t){return ka(this,void 0,void 0,(function*(){const e=new Headers;if(Array.isArray(t.headers))for(let[i,n]of t.headers)e.set(i,n);"json"==t.type?e.append("Accept","application/json"):t.type;const i={method:t.method,headers:e,body:t.data};!0===t.cors&&(i.mode="cors");const n=new Request(t.url,i);return fetch(n).then((e=>{const i=e.status;if(i<200||i>400)return{status:i,result:e.text(),length:-1,headers:[]};if(i>=200&&i<400){let n;n="json"==t.type?e.json():"binary"==t.type?e.arrayBuffer():e.text();const o=e.headers,r=new Array;let s=-1;return o.forEach(((t,e)=>{t&&(r.push([e.toLowerCase(),t]),"Content-Length"!=e&&"content-length"!=e.toLowerCase()||(s=Number.parseInt(t),Number.isNaN(s)&&(s=-1)))})),{status:i,result:n,length:s,headers:r}}throw new Error(`Reqeust ${t.url} status = ${e.status}(${e.statusText})`)}))}))}(i)}))}function qa(t,e){return ka(this,void 0,void 0,(function*(){return Va({url:t,method:"POST",type:"json",data:JSON.stringify(e)}).then((t=>t.result))}))}var Ga=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class za{constructor(t,e){this._name=t,this._data=e}name(){return this._name}asBuffer(){return Ga(this,void 0,void 0,(function*(){return this._data}))}hash(t){var e;return Ga(this,void 0,void 0,(function*(){return null!==(e=ce(t,this._data))&&void 0!==e?e:Ct.alloc(0)}))}close(){}asText(){return this._data.toString("utf8")}}const Ua=new za("",Ct.alloc(0));class Wa{constructor(t){this.name=t,this.entries=new Map}normalize(t,e=!0){return St.normalize(t,e)}isOpen(){return Ga(this,void 0,void 0,(function*(){return!0}))}names(){return Ga(this,void 0,void 0,(function*(){return[...this.entries.values()].map((t=>t.name()))}))}has(t){return Ga(this,void 0,void 0,(function*(){return this.entries.has(this.normalize(t))}))}entry(t){var e;return Ga(this,void 0,void 0,(function*(){return null!==(e=this.entries.get(this.normalize(t)))&&void 0!==e?e:Ua}))}put(t,e){return Ga(this,void 0,void 0,(function*(){let i;i="string"==typeof e?Ct.from(e,"utf8"):Ct.from(e),this.entries.set(this.normalize(t),new za(this.normalize(t,!1),i))}))}remove(t){return Ga(this,void 0,void 0,(function*(){this.entries.delete(null!=t?t:"")}))}flush(t,e){return Ga(this,void 0,void 0,(function*(){throw new Error("Memory not support flush")}))}copyTo(t){return Ga(this,void 0,void 0,(function*(){for(const e of this.entries.values())yield t.put(e.name(),yield e.asBuffer())}))}equals(t){return Ga(this,void 0,void 0,(function*(){return this===t}))}close(){this.entries.clear()}}var Ha=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ya=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class Xa extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}Ha([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Ya("design:type",Object)],Xa.prototype,"$ID",void 0),Ha([$e(),ve(),be(ge,Ce,{required:!0}),Ya("design:type",Object)],Xa.prototype,"$$Value",void 0);class Za extends te{constructor(){super()}set File(t){this.$File=t}get File(){return this.$File}}Ha([$e(),ve(),be(ge,Xa,{required:!0,multiple:!0}),Ya("design:type",Object)],Za.prototype,"$File",void 0);let Ka=class extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Version(t){this.$Version=t}get Version(){return this.$Version}set Name(t){this.$Name=t}get Name(){return this.$Name}set CreationDate(t){this.$CreationDate=t}get CreationDate(){return this.$CreationDate}set FileList(t){this.$FileList=t}get FileList(){return this.$FileList}set DocRoot(t){this.$DocRoot=t}get DocRoot(){return this.$DocRoot}relateDocument(){return this.related()}};Ha([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Ya("design:type",Object)],Ka.prototype,"$ID",void 0),Ha([$e(),ve(),be(fe,Ce),Ya("design:type",Object)],Ka.prototype,"$Version",void 0),Ha([$e(),ve(),be(fe,Ce),Ya("design:type",Object)],Ka.prototype,"$Name",void 0),Ha([$e(),ve(),be(fe,Ce),Ya("design:type",Object)],Ka.prototype,"$CreationDate",void 0),Ha([$e(),ve(),be(ge,Za,{required:!0}),Ya("design:type",Za)],Ka.prototype,"$FileList",void 0),Ha([$e(),ve(),be(ge,Ce,{required:!0,relative:vs}),Ya("design:type",Object)],Ka.prototype,"$DocRoot",void 0),Ha([we("DocRoot"),Ya("design:type",Function),Ya("design:paramtypes",[]),Ya("design:returntype",Object)],Ka.prototype,"relateDocument",null),Ka=Ha([me("DocVersion","Version_{index}.xml"),Ya("design:paramtypes",[])],Ka);var Qa=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ja=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},tl=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class el extends te{constructor(){super()}set ProviderName(t){this.$ProviderName=t}get ProviderName(){return this.$ProviderName}set Version(t){this.$Version=t}get Version(){return this.$Version}set Company(t){this.$Company=t}get Company(){return this.$Company}}Qa([$e(),ve(),be(fe,Ce,{required:!0}),Ja("design:type",Object)],el.prototype,"$ProviderName",void 0),Qa([$e(),ve(),be(fe,Ce),Ja("design:type",Object)],el.prototype,"$Version",void 0),Qa([$e(),ve(),be(fe,Ce),Ja("design:type",Object)],el.prototype,"$Company",void 0);class il extends te{constructor(){super()}set FileRef(t){this.$FileRef=t}get FileRef(){return this.$FileRef}set CheckValue(t){this.$CheckValue=t}get CheckValue(){return this.$CheckValue}}Qa([$e(),ve(),be(fe,Ce,{required:!0}),Ja("design:type",Object)],il.prototype,"$FileRef",void 0),Qa([$e(),ve(),be(ge,Ce,{required:!0}),Ja("design:type",Object)],il.prototype,"$CheckValue",void 0);class nl extends te{constructor(){super()}set CheckMethod(t){this.$CheckMethod=t}get CheckMethod(){return this.$CheckMethod}set Reference(t){this.$Reference=t}get Reference(){return this.$Reference}}Qa([$e(),ve(),be(fe,Ce,{default:"MD5"}),Ja("design:type",Object)],nl.prototype,"$CheckMethod",void 0),Qa([$e(),ve(),be(ge,il,{required:!0,multiple:!0}),Ja("design:type",Object)],nl.prototype,"$Reference",void 0);class ol extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set PageRef(t){this.$PageRef=t}get PageRef(){return this.$PageRef}set Boundary(t){this.$Boundary=t}get Boundary(){return this.$Boundary}set Clip(t){this.$Clip=t}get Clip(){return this.$Clip}}Qa([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Ja("design:type",Object)],ol.prototype,"$ID",void 0),Qa([$e(),ve(),be(fe,xe,{required:!0}),Ja("design:type",Object)],ol.prototype,"$PageRef",void 0),Qa([$e(),ve(),be(fe,Oe,{required:!0}),Ja("design:type",Object)],ol.prototype,"$Boundary",void 0),Qa([$e(),ve(),be(fe,Oe),Ja("design:type",Object)],ol.prototype,"$Clip",void 0);class rl extends te{constructor(){super()}set BaseLoc(t){this.$BaseLoc=t}get BaseLoc(){return this.$BaseLoc}}Qa([$e(),ve(),be(ge,Ce,{required:!0}),Ja("design:type",Object)],rl.prototype,"$BaseLoc",void 0);class sl extends te{constructor(){super()}set Provider(t){this.$Provider=t}get Provider(){return this.$Provider}set SignatureMethod(t){this.$SignatureMethod=t}get SignatureMethod(){return this.$SignatureMethod}set SignatureDateTime(t){this.$SignatureDateTime=t}get SignatureDateTime(){return this.$SignatureDateTime}set References(t){this.$References=t}get References(){return this.$References}set StampAnnot(t){this.$StampAnnot=t}get StampAnnot(){return this.$StampAnnot}set Seal(t){this.$Seal=t}get Seal(){return this.$Seal}}Qa([$e(),ve(),be(ge,el,{required:!0}),Ja("design:type",el)],sl.prototype,"$Provider",void 0),Qa([$e(),ve(),be(ge,Ce),Ja("design:type",Object)],sl.prototype,"$SignatureMethod",void 0),Qa([$e(),ve(),be(ge,Ce),Ja("design:type",Object)],sl.prototype,"$SignatureDateTime",void 0),Qa([$e(),ve(),be(ge,nl,{required:!0}),Ja("design:type",nl)],sl.prototype,"$References",void 0),Qa([$e(),ve(),be(ge,ol,{multiple:!0}),Ja("design:type",Object)],sl.prototype,"$StampAnnot",void 0),Qa([$e(),ve(),be(ge,rl),Ja("design:type",rl)],sl.prototype,"$Seal",void 0);let al=class extends te{constructor(){super()}set SignedInfo(t){this.$SignedInfo=t}get SignedInfo(){return this.$SignedInfo}set SignedValue(t){this.$SignedValue=t}get SignedValue(){return this.$SignedValue}rawData(){return tl(this,void 0,void 0,(function*(){return this._entry?yield this.loadEntry(this.location(this._entry)).then((t=>t.asBuffer())):Promise.reject("Loc is empty?")}))}eslData(){var t,e;return tl(this,void 0,void 0,(function*(){const i=null===(e=null===(t=this.SignedInfo)||void 0===t?void 0:t.Seal)||void 0===e?void 0:e.BaseLoc;return i?yield this.loadEntry(this.location(i)).then((t=>t.asBuffer())):Promise.reject("Seal is empty")}))}essData(){return tl(this,void 0,void 0,(function*(){return this.SignedValue?yield this.loadEntry(this.location(this.SignedValue)).then((t=>t.asBuffer())):Promise.reject("SignedValue is empty")}))}};Qa([$e(),ve(),be(ge,sl,{required:!0}),Ja("design:type",sl)],al.prototype,"$SignedInfo",void 0),Qa([$e(),ve(),be(ge,Ce,{required:!0}),Ja("design:type",Object)],al.prototype,"$SignedValue",void 0),al=Qa([me("Signature",""),Ja("design:paramtypes",[])],al);var ll=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const ul=pt.getLogger("SWASM"),dl="SWASM",cl=dl.toLowerCase(),hl=()=>{const t=i.g,e=t[dl];let n=x[cl];if(n)return n.module;const o=e=>e({locateFile:function(e){var i;const n=null!==(i=t._WASM_DIR_)&&void 0!==i?i:".";return n.endsWith("/")?n+e:n+"/"+e},onReady:()=>ul.debug(`${dl} ready`)}),s=()=>{var t,e;null===(e=null===(t=x[cl])||void 0===t?void 0:t.module)||void 0===e||e.then((t=>{t.copyright(!0)})).catch((t=>ul.warn(t)))};if(r(e)){const t={module:Promise.resolve(o(e)),copyright:s};return x[cl]=t,t.module}const a=new p;n=x[cl]={module:a.promise,copyright:s};const l=t.document;if(l){let e=l.querySelector("script.swasm");e||(ul.info("Try load swasm..."),e=l.createElement("script"),e.src="swasm.js",e.classList.add("swasm"),l.head.appendChild(e)),e.addEventListener("load",(()=>{const e=t[dl];r(e)?a.resolve(o(e)):a.reject("Not found swasm module")})),e.addEventListener("error",(()=>{a.reject("swasm load failed")}))}else a.reject("Not in real browser?");return n.module},pl=(t,e)=>ll(void 0,void 0,void 0,(function*(){const i=yield hl(),n=i[t];if(r(n))return n.apply(i,e)}));class gl{constructor(t,e){this.module=t,this.origin=e,this.closed=!1}close(){if(this.isValid()){const t=this.origin.delete;r(t)&&t.call(this.origin)}this.closed=!0}isValid(){if(this.closed||s(this.origin))return!1;const t=this.origin.isDeleted;return!r(t)||!0!==t.call(this.origin)}invoke(t,...e){if(this.isValid())return this.module.embCall(this.origin,t,e)}vectorToArray(t){return this.module.v2a(t)}}var fl,yl,ml,vl;!function(t){t.copyright=(t=!1)=>pl("copyright",[t]),t.uuid=()=>pl("uuid")}(fl||(fl={})),(ml=yl||(yl={})).encrypt=t=>pl("encrypt",[t]),ml.activation=(t,e,i)=>pl("activation",[t,e,i]),ml.checkActive=t=>pl("checkActive",[t]),ml.isExpiration=t=>pl("isExpiration",[t]),function(t){t.LICENSE_NORAML=0,t.LICENSE_EXPIRED=-19,t.check=(t,e,i,n,o,r)=>pl("checkLicense1",[t,e,i,n,o,r]),t.checkByHost=(t,e,i,n)=>pl("checkLicense2",[t,e,i,n])}(vl||(vl={}));var $l,bl=i(48834).Buffer,wl=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};!function(t){function e(t,e){e instanceof Uint8Array&&t.free(e.byteOffset)}class i extends gl{constructor(t,e,i){super(t,e),this.name=i}init(t){return void 0===this.inited&&(this.inited=this.origin.init()),this.inited}update(t){const e=this.origin.update.bind(this.origin);return this.module.shareMemoryCall(e,t)}final(t){const i=this.origin.final.bind(this.origin),n=this.module.shareMemoryCall(i,null!=t?t:bl.allocUnsafe(0));try{return bl.from(n)}finally{e(this.module,n)}}rawName(){return this.origin.name()}oid(){return this.origin.oid()}}t.sha256=function(t){return wl(this,void 0,void 0,(function*(){return hl().then((i=>{const n=i.shareMemoryCall(i.sha256,t);try{return bl.from(n)}finally{e(i,n)}})).catch((t=>(console.warn("sha256 error:",t),null)))}))},t.make=function(t){return wl(this,void 0,void 0,(function*(){return hl().then((e=>[e,e.makeHash(t)])).then((([e,n])=>new i(e,n,t))).catch((t=>(console.warn("make hash error:",t),null)))}))}}($l||($l={}));var xl,Cl=i(48834).Buffer,Dl=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};!function(t){t.OIDToName=function(t){return Dl(this,void 0,void 0,(function*(){return hl().then((e=>e.OID2Name(t))).catch((t=>(console.warn("oid to name error:",t),"")))}))},t.verify=function(t,e){return Dl(this,void 0,void 0,(function*(){const i=yield o(t);if(i){const t=i.verify(e);return i.close(),t}return{code:-1,message:"make oes failed"}}))},t.OK=0;class e extends gl{constructor(t,e){super(t,e)}get width(){return this.origin.width()}get height(){return this.origin.height()}get type(){return this.origin.type()}data(){return this.origin.data()}}t.Image=e;class i extends gl{constructor(t,e){super(t,e)}get SealId(){return this.origin.SealId}get SealName(){return this.origin.SealName}get SealType(){return this.origin.SealType}get SealVersion(){return this.origin.SealVersion}get SealSignMethod(){return this.origin.SealSignMethod}get SealSignature(){var t;const e=this.origin.SealSignature;return null!==(t=this.toDate(e))&&void 0!==t?t:e}get SignVersion(){return this.origin.SignVersion}get SignMethod(){return this.origin.SignMethod}toDate(t){const e=/(\d{4})\/(\d{2})\/(\d{2})\s+(\d{2}):(\d{2}):(\d{2})/g.exec(t.trim());if(e){const[t,i,n,o,r,s]=e.slice(1).map((t=>Number.parseInt(t)));return new Date(t,i-1,n,o,r,s)}return null}decode(t){return t.startsWith("b;")?Cl.from(t.substring(2),"base64"):t}get SignedDate(){var t;const e=this.origin.SignedDate;return null!==(t=this.toDate(e))&&void 0!==t?t:e}get Signature(){const t=this.origin.Signature;return this.decode(t)}get SignerName(){const t=this.origin.SignerName;return this.decode(t)}get VenderId(){return this.origin.VenderId}get ValidStart(){var t;const e=this.origin.ValidStart;return null!==(t=this.toDate(e))&&void 0!==t?t:e}get ValidEnd(){var t;const e=this.origin.ValidEnd;return null!==(t=this.toDate(e))&&void 0!==t?t:e}get TimeInfo(){var t;const e=this.origin.TimeInfo;return null!==(t=this.toDate(e))&&void 0!==t?t:e}get Property(){return this.origin.Property}get DataHash(){const t=this.origin.DataHash;return this.decode(t)}get Cert(){const t=this.origin.Cert;return this.decode(t)}get CertInfo(){const t=this.origin.CertInfo;return this.decode(t)}}t.Info=i;class n extends gl{constructor(t,e){super(t,e)}image(){const t=this.origin.image();return t?new e(this.module,t):null}info(){const t=this.origin.info();if(""!=t){const e=JSON.parse(t);if(e)return new i(this.module,e)}return null}verify(t){const e=this.module.shareMemoryCall(this.origin.verify.bind(this.origin),t).split(":");return{code:Number.parseInt(e[0]),message:e.slice(1).join(":")}}}function o(t){return Dl(this,void 0,void 0,(function*(){return hl().then((e=>new n(e,e.shareMemoryCall(e.makeOES,t)))).catch((t=>(console.warn("make oes error:",t),null)))}))}t.Core=n,t.makeOES=o}(xl||(xl={}));var Ol=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Pl=pt.getLogger("OES");function Sl(t){return Ol(this,void 0,void 0,(function*(){const e=yield $l.make(t);return(null==e?void 0:e.init())?e:null}))}function Il(t,e){return Ol(this,void 0,void 0,(function*(){let i=!1,n="";try{const o=t.SignedInfo;if(!o)return n="No SignedInfo",{okay:i,message:n};const r=o.Provider;r&&Pl.debug(`It's from ${r.ProviderName}@${r.Company}, version = ${r.Version}`);const s=o.References;if(!s)return n="No SignedInfo.References",{okay:i,message:n};const a=s.Reference;if(!a||a.isEmpty())return n="Protectd nothing?",{okay:i,message:n};let l="MD5";const u=s.CheckMethod;u&&(l=yield function(t){return Ol(this,void 0,void 0,(function*(){return/^([1-9]\d*|0)(\.[1-9]\d*|\.0)*$/.test(t)?xl.OIDToName(t):t}))}(u));const d=yield Sl(l);if(!d)return n=l+" degist init failed",{okay:i,message:n};const c=yield t.rawData(),h=ce(d,Ct.from(c));if(!h)return n=l+" degist result failed",{okay:i,message:n};const p=yield t.essData();if(e){const t=e.verify(h);if(0!=t.code)return{okay:i,message:t.message}}else{const t=yield xl.verify(Ct.from(p),h);if(0!=t.code)return{okay:i,message:t.message}}const g=t.package;for(const t of a){const e=t.CheckValue,o=t.FileRef;if(!o)return n="Entry FileRef missing",{okay:i,message:n};{const t=yield Sl(l);if(e!=(yield g.entry(o).then((e=>e.hash(t))).then((t=>Ct.from(t).toString("base64")))))return n=`Entry ${o} digest check falied`,{okay:i,message:n}}}return{okay:!0,message:""}}catch(t){Pl.warn(t),n=t.message}return{okay:i,message:n}}))}class Tl extends T{constructor(t){super(),this.raw=t}get type(){return Number.parseInt(this.raw.SealType)}get name(){return this.raw.SealName}get createDate(){const t=this.raw.SignedDate;if(t instanceof Date)return t;throw new Error("unknown time "+t)}get validStart(){const t=this.raw.ValidStart;if(t instanceof Date)return t;throw new Error("unknown time "+t)}get validEnd(){const t=this.raw.ValidEnd;if(t instanceof Date)return t;throw new Error("unknown time "+t)}doClose(){}}class Rl extends T{constructor(t){super(),this.raw=t}get type(){return this.raw.type}get width(){return this.raw.width}get height(){return this.raw.height}get data(){const t=this.raw.data();return Ct.isBuffer(t)?t:Ct.from(t)}doClose(){this.raw.close()}}class jl extends T{constructor(t){super(),this.model=t}init(){return Ol(this,void 0,void 0,(function*(){if(!this.oc){const t=yield this.model.essData();if(t){const e=yield xl.makeOES(Ct.from(t));e&&(this.oc=e)}}return!!this.oc}))}verify(t=!1){var e;return Ol(this,void 0,void 0,(function*(){return!t&&this.vr||(yield this.init())&&this.oc&&(this.vr=Il(this.model,this.oc)),null!==(e=this.vr)&&void 0!==e?e:{okay:!1,message:"oes init failed"}}))}property(){return Ol(this,void 0,void 0,(function*(){if((yield this.init())&&this.oc){const t=this.oc.info();if(t)return new Tl(t)}return null}))}picture(){return Ol(this,void 0,void 0,(function*(){if((yield this.init())&&this.oc){const t=this.oc.image();if(t)return new Rl(t)}return null}))}doClose(){var t;null===(t=this.oc)||void 0===t||t.close()}}var Al=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Fl=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ml=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Bl=pt.getLogger("Model");class kl extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Type(t){this.$Type=t}get Type(){return this.$Type}set BaseLoc(t){this.$BaseLoc=t}get BaseLoc(){return this.$BaseLoc}relateSignature(){return this.related()}}Al([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Fl("design:type",Object)],kl.prototype,"$ID",void 0),Al([$e(),ve(),be(fe,Ce,{default:"Seal"}),Fl("design:type",String)],kl.prototype,"$Type",void 0),Al([$e(),ve(),be(fe,Ce,{required:!0,relative:al}),Fl("design:type",Object)],kl.prototype,"$BaseLoc",void 0),Al([we("BaseLoc"),Fl("design:type",Function),Fl("design:paramtypes",[]),Fl("design:returntype",Object)],kl.prototype,"relateSignature",null);let Ll=class extends te{constructor(){super()}set MaxSignId(t){this.$MaxSignId=t}get MaxSignId(){return this.$MaxSignId}set Signature(t){this.$Signature=t}get Signature(){return this.$Signature}relateAllSignature(){return Ml(this,void 0,void 0,(function*(){const t=new Nl;if(this.Signature)for(const e of this.Signature)try{const i=yield null==e?void 0:e.relateSignature().get();i&&t.add(i)}catch(t){Bl.info(t)}return this.willClose(t),t}))}};Al([$e(),ve(),be(ge,xe),Fl("design:type",Object)],Ll.prototype,"$MaxSignId",void 0),Al([$e(),ve(),be(ge,kl,{multiple:!0}),Fl("design:type",Object)],Ll.prototype,"$Signature",void 0),Ll=Al([me("Signatures","/Doc_{docIndex}/Signatures.xml"),Fl("design:paramtypes",[])],Ll);class Nl extends T{constructor(){super(),this.signatures=new Array,this.cache=new Map}doClose(){this.cache.clear()}add(t){this.signatures.push(t)}find(t){var e;return Ml(this,void 0,void 0,(function*(){const i=new Array;if(!t)return i;for(const n of this.signatures){const o=null===(e=n.SignedInfo)||void 0===e?void 0:e.StampAnnot;if(o)for(let e of o){if(!e||e.PageRef!=t)continue;let o=this.cache.get(n);if(o||(o=new jl(n),(yield o.init())?this.cache.set(n,o):Bl.warn("sign helper init failed")),o){const t=yield o.picture();i.push({boundary:e.Boundary,clip:e.Clip,picture:t})}}}return i}))}}var El,_l=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Vl=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ql=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Gl=pt.getLogger("Model");class zl extends te{constructor(){super()}set Keyword(t){this.$Keyword=t}get Keyword(){return this.$Keyword}}_l([$e(),ve(),be(ge,Ce,{required:!0,multiple:!0}),Vl("design:type",Object)],zl.prototype,"$Keyword",void 0);class Ul extends te{constructor(){super()}set Name(t){this.$Name=t}get Name(){return this.$Name}set Value(t){this.$$Value=t}get Value(){return this.$$Value}}_l([$e(),ve(),be(fe,Ce,{required:!0}),Vl("design:type",Object)],Ul.prototype,"$Name",void 0),_l([$e(),ve(),be(ge,Ce,{required:!0}),Vl("design:type",Object)],Ul.prototype,"$$Value",void 0);class Wl extends te{constructor(){super()}set CustomData(t){this.$CustomData=t}get CustomData(){return this.$CustomData}}_l([$e(),ve(),be(ge,Ul,{required:!0,multiple:!0}),Vl("design:type",Object)],Wl.prototype,"$CustomData",void 0);class Hl extends te{constructor(){super()}set DocID(t){this.$DocID=t}get DocID(){return this.$DocID}set Title(t){this.$Title=t}get Title(){return this.$Title}set Author(t){this.$Author=t}get Author(){return this.$Author}set Subject(t){this.$Subject=t}get Subject(){return this.$Subject}set Abstract(t){this.$Abstract=t}get Abstract(){return this.$Abstract}set CreationDate(t){this.$CreationDate=t}get CreationDate(){return this.$CreationDate}set ModDate(t){this.$ModDate=t}get ModDate(){return this.$ModDate}set DocUsage(t){this.$DocUsage=t}get DocUsage(){return this.$DocUsage}set Cover(t){this.$Cover=t}get Cover(){return this.$Cover}set Keywords(t){this.$Keywords=t}get Keywords(){return this.$Keywords}set Creator(t){this.$Creator=t}get Creator(){return this.$Creator}set CreatorVersion(t){this.$CreatorVersion=t}get CreatorVersion(){return this.$CreatorVersion}set CustomDatas(t){this.$CustomDatas=t}get CustomDatas(){return this.$CustomDatas}}_l([$e(),ve(),be(ge,Ce,{required:!0}),Vl("design:type",Object)],Hl.prototype,"$DocID",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$Title",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$Author",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$Subject",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$Abstract",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$CreationDate",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$ModDate",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$DocUsage",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$Cover",void 0),_l([$e(),ve(),be(ge,zl),Vl("design:type",zl)],Hl.prototype,"$Keywords",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$Creator",void 0),_l([$e(),ve(),be(ge,Ce),Vl("design:type",Object)],Hl.prototype,"$CreatorVersion",void 0),_l([$e(),ve(),be(ge,Wl),Vl("design:type",Wl)],Hl.prototype,"$CustomDatas",void 0);class Yl extends te{constructor(){super()}set ID(t){this.$ID=t}get ID(){return this.$ID}set Index(t){this.$Index=t}get Index(){return this.$Index}set Current(t){this.$Current=t}get Current(){return this.$Current}set BaseLoc(t){this.$BaseLoc=t}get BaseLoc(){return this.$BaseLoc}relateVersion(){return this.related()}}_l([$e(),ve(),be(fe,xe,{required:!0,ID:!0}),Vl("design:type",Object)],Yl.prototype,"$ID",void 0),_l([$e(),ve(),be(fe,xe,{required:!0}),Vl("design:type",Object)],Yl.prototype,"$Index",void 0),_l([$e(),ve(),be(fe,De,{default:!1}),Vl("design:type",Object)],Yl.prototype,"$Current",void 0),_l([$e(),ve(),be(fe,Ce,{required:!0,relative:Ka}),Vl("design:type",Object)],Yl.prototype,"$BaseLoc",void 0),_l([we("BaseLoc"),Vl("design:type",Function),Vl("design:paramtypes",[]),Vl("design:returntype",Object)],Yl.prototype,"relateVersion",null);class Xl extends te{constructor(){super()}set Version(t){this.$Version=t}get Version(){return this.$Version}}_l([$e(),ve(),be(ge,Yl,{multiple:!0}),Vl("design:type",Object)],Xl.prototype,"$Version",void 0);class Zl extends te{constructor(){super()}set DocInfo(t){this.$DocInfo=t}get DocInfo(){return this.$DocInfo}set DocRoot(t){this.$DocRoot=t}get DocRoot(){return this.$DocRoot}set Versions(t){this.$Versions=t}get Versions(){return this.$Versions}set Signatures(t){this.$Signatures=t}get Signatures(){return this.$Signatures}relateDocument(){return this.related()}relateSignatures(){return this.related()}}_l([$e(),ve(),be(ge,Hl,{required:!0}),Vl("design:type",Hl)],Zl.prototype,"$DocInfo",void 0),_l([$e(),ve(),be(ge,Ce,{required:!0,relative:vs}),Vl("design:type",Object)],Zl.prototype,"$DocRoot",void 0),_l([$e(),ve(),be(ge,Xl),Vl("design:type",Xl)],Zl.prototype,"$Versions",void 0),_l([$e(),ve(),be(ge,Ce,{relative:Ll}),Vl("design:type",Object)],Zl.prototype,"$Signatures",void 0),_l([we("DocRoot"),Vl("design:type",Function),Vl("design:paramtypes",[]),Vl("design:returntype",Object)],Zl.prototype,"relateDocument",null),_l([we("Signatures"),Vl("design:type",Function),Vl("design:paramtypes",[]),Vl("design:returntype",Object)],Zl.prototype,"relateSignatures",null);const Kl="OFD.xml";let Ql=El=class extends te{constructor(){super(),this.guid=c(),this._attaches=new rt}set Version(t){this.$Version=t}get Version(){return this.$Version}set DocType(t){this.$DocType=t}get DocType(){return this.$DocType}set DocBody(t){this.$DocBody=t}get DocBody(){return this.$DocBody}get fileName(){return this._fileName}static open(t,e={type:"file"}){return ql(this,void 0,void 0,(function*(){let i,n;if("file"==e.type)t instanceof File?n=t.name:"string"==typeof t&&(t.includes(":")?Gl.error("Is it URL, is not base64",t):(o=t,t=Ct.from(o,"base64").buffer)),i=yield ra(t);else if("web"==e.type)try{if(e.fetchURL){const e=yield function(t){return ka(this,void 0,void 0,(function*(){return Va({url:t,method:"GET",type:"binary"}).then((e=>{var i,n;let o=Na.header(e.headers,"Content-Disposition");if(La.debug("content-disposition",o),o){const t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(o);La.debug("matches",t),null!=t&&t[1]&&(o=t[1].replace(/['"]/g,""))}return{data:e.result,name:null!==(n=null!=o?o:null===(i=t.split("/").pop())||void 0===i?void 0:i.split("#")[0].split("?")[0])&&void 0!==n?n:""}}))}))}(t+"");n=e.name,i=yield ra(yield e.data)}else i=yield ra(t)}catch(e){if(e instanceof Q)throw e;throw new Q(he.FetchFailed.code,e).set("url",t)}var o;if(i){const t=new Wa;(yield function(t,e){return Ba(this,void 0,void 0,(function*(){const i=yield Ql.fromPackage(t);try{const n=yield da(i,0);if(!n)return console.warn(`open OFD ${t} failed`),!1;if(n.PageForm){const t=yield n.relatePageForm().get();if(t){const o=new Ma,r=n.makeModel(Pr);if(n.relateForms().set(r),yield o.translate(t,r))return n.handleField(["PageForm"],"delete"),yield i.saveAs(e,{replace:!1}),!0}}return!1}finally{i.close()}}))}(i,t))&&(i=t)}return El.fromPackage(i,n)}))}static fromPackage(t,e){return ql(this,void 0,void 0,(function*(){if(!t||!(yield t.isOpen()))return Promise.reject("Not open package");const i=yield t.entry(Kl),n=yield i.asBuffer(),o=$t().read(n,El);return o.package=t,o._entry=Zt+Kl,o._fileName=null!=e?e:t.name,o}))}static new(t){return ql(this,void 0,void 0,(function*(){const e=new El;return e.package=null!=t?t:yield function(){return na(this,void 0,void 0,(function*(){return oa().create()}))}(),e._entry=Zt+Kl,e.data().isNew=!0,e}))}addBody(){this.DocBody||(this.DocBody=this.makeList());const t=this.makeModel(Zl,!0);return this.DocBody.add(t),t}saveAs(t,e){return ql(this,void 0,void 0,(function*(){const i=this.package;if(yield i.equals(t))return this.save(null==e?void 0:e.callback);{yield i.copyTo(t);const n=yield this.saveTo(t);return!1!==(null==e?void 0:e.replace)&&(this.package=t,i.close()),(null==e?void 0:e.callback)&&e.callback(t,n),t}}))}save(t){return ql(this,void 0,void 0,(function*(){const e=this.package,i=yield this.saveTo(e);return t&&t(e,i),e}))}doClose(){this._attaches.clear(),this.package.close()}attach(t,e){return this._attaches.safeGet(t,(()=>{const t=e(this);return I.is(t)&&this.willClose(t),t}))}static make(t,e){var i,n,o,s,a,l,u;return ql(this,void 0,void 0,(function*(){const d=yield El.new(),h=null!==(i=null==e?void 0:e.size)&&void 0!==i?i:k;d.Version="1.2";const p=d.addBody(),g=p.makeModel(Hl,!0);g.DocID=c(),g.CreationDate=Se.INSTANCE.persist(new Date),g.Creator=C(),g.CreatorVersion=D(),r(null===(n=null==e?void 0:e.modifier)||void 0===n?void 0:n.info)&&(yield null===(o=null==e?void 0:e.modifier)||void 0===o?void 0:o.info(g)),p.DocInfo=g;const f=p.makeModel(vs,!0);yield p.relateDocument().set(f);const y=yield f.identity(!1),m=f.makeModel(ss,!0),v=m.makeModel(Me,!0);v.PhysicalBox=[0,0,...h],m.PageArea=v,f.CommonData=m;for(let i=0;i<t;i++){const t=f.newPage();t.ID=y.next();const n=t.makeModel(hn,!0);n.ID=t.ID,yield t.relatePage().set(n);const o=n.makeModel(Me,!0);n.Area=o,o.PhysicalBox=v.PhysicalBox,r(null===(s=null==e?void 0:e.modifier)||void 0===s?void 0:s.page)&&(yield null===(a=null==e?void 0:e.modifier)||void 0===a?void 0:a.page(n,i))}return r(null===(l=null==e?void 0:e.modifier)||void 0===l?void 0:l.document)&&(yield null===(u=null==e?void 0:e.modifier)||void 0===u?void 0:u.document(f)),d}))}};_l([$e(),ve(),be(fe,Ce,{required:!0,default:"1.0"}),Vl("design:type",Object)],Ql.prototype,"$Version",void 0),_l([$e(),ve(),be(fe,Ce,{required:!0,default:"OFD"}),Vl("design:type",Object)],Ql.prototype,"$DocType",void 0),_l([$e(),ve(),be(ge,Zl,{required:!0,multiple:!0}),Vl("design:type",Object)],Ql.prototype,"$DocBody",void 0),Ql=El=_l([me("OFD",Kl),Vl("design:paramtypes",[])],Ql);var Jl=i(41427);class tu{constructor(t=0){this.elements=new Array,this.maxCount=Math.max(0,t)}floor(){return this.elements[0]}push(t){this.elements.push(t),this.maxCount>0&&this.size()>this.maxCount&&this.elements.shift()}peek(){return this.elements[this.size()-1]}pop(){return this.elements.pop()}has(t){return this.elements.includes(t)}size(){return this.elements.length}clear(){this.elements.length=0}isEmpty(){return 0==this.size()}isNotEmpty(){return 0!=this.size()}}var eu=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const iu=pt.getLogger("ModelSDK");var nu,ou;!function(t){function e(t,i,n,o,a){var l,u,d,c;return eu(this,void 0,void 0,(function*(){if(!t||t.isEmpty())return;const h=new Set(i.types);for(const p of t)if(p)if(p.TextObject)h.has("TextObject")&&(yield n(p.TextObject));else if(p.PathObject)h.has("PathObject")&&(yield n(p.PathObject));else if(p.ImageObject)h.has("ImageObject")&&(yield n(p.ImageObject));else if(p.VideoObject)h.has("VideoObject")&&(yield n(p.VideoObject));else if(p.CompositeObject){const t=p.CompositeObject.ResourceID;if(s(t))continue;if(o.has(t))continue;if(i.resource&&r(i.resource)){const r=i.resource(),s=null==r?void 0:r.composite(t),c=null===(l=null==s?void 0:s.Content)||void 0===l?void 0:l.GraphUnits;c&&c.isNotEmpty()&&(null!==(u=null==s?void 0:s.Width)&&void 0!==u?u:0)>0&&(null!==(d=null==s?void 0:s.Height)&&void 0!==d?d:0)>0&&(o.push(t),yield e(c,i,n,o,a+1),o.pop())}}else p.PageBlock&&(yield e(null===(c=p.PageBlock)||void 0===c?void 0:c.GraphUnits,i,n,o,a+1))}))}function i(t,i,n){return eu(this,void 0,void 0,(function*(){if(!t||t.isEmpty()||0==i.types.length||!r(n))return;const o=new tu;yield e(t,i,n,o,0)}))}let n;function o(t,e){var i;return eu(this,void 0,void 0,(function*(){const o=null!=e?e:t.parentUntil(vs),r=new Array;return yield fn(t.Template,(t=>eu(this,void 0,void 0,(function*(){var e,i;const s=null===(e=o.CommonData)||void 0===e?void 0:e.findTemplate(t.TemplateID);if(s){const e=yield s.relatePage().get();e&&r.push([{item:e,type:"template"},n.of(null!==(i=t.ZOrder)&&void 0!==i?i:s.ZOrder)])}else iu.warn(`Not found TemplatePage[${t.TemplateID}]`)})))),gn(null===(i=t.Content)||void 0===i?void 0:i.Layer,(t=>{r.push([{item:t,type:"common"},n.of(t.Type)])})),n.flatSort(r)}))}t.openURL=function(t){return eu(this,void 0,void 0,(function*(){return la(t,!0).catch((t=>(iu.warn(t),null)))}))},t.openFile=function(t){return eu(this,void 0,void 0,(function*(){return aa(t).catch((t=>(iu.warn(t),null)))}))},t.openBlob=function(t){return eu(this,void 0,void 0,(function*(){return aa(t).catch((t=>(iu.warn(t),null)))}))},t.openBuffer=function(t){return eu(this,void 0,void 0,(function*(){return aa(t).catch((t=>(iu.warn(t),null)))}))},t.close=function(t){te.is(t)&&ua(t)},t.document=function(t,e=0){return eu(this,void 0,void 0,(function*(){const i=yield da(t,e);return null!=i?i:null}))},t.walk=i,function(t){t[t.BackgroundTemplate=0]="BackgroundTemplate",t[t.Background=1]="Background",t[t.BodyTemplate=2]="BodyTemplate",t[t.Body=3]="Body",t[t.ForegroundTemplate=4]="ForegroundTemplate",t[t.Foreground=5]="Foreground"}(n=t.Order||(t.Order={})),function(t){function e(t){const e=new Array;return gn(t,(t=>e.push(t))),e.sort(((t,e)=>t[1]-e[1])),e.map((t=>t[0]))}t.of=function(e,i=!1){switch(null!=e?e:"Body"){case"Background":return i?t.BackgroundTemplate:t.Background;case"Foreground":return i?t.ForegroundTemplate:t.Foreground;default:return i?t.BodyTemplate:t.Body}},t.flatSort=e,t.sort=function(t,i){const n=new Array;return gn(t,(t=>n.push([t,i(t)]))),e(n)}}(n=t.Order||(t.Order={})),t.orderItems=o,t.walkPage=function t(e,s,a){var l;return eu(this,void 0,void 0,(function*(){if(e&&0!=s.types.length&&r(a))if(!0===s.withTemplate){const n=yield o(e);yield fn(n,(e=>eu(this,void 0,void 0,(function*(){const n=e.item;n instanceof un?yield i(n.GraphUnits,s,a):yield t(n,Object.assign({},s,{withTemplate:!1}),a)}))))}else yield fn(n.sort(null===(l=e.Content)||void 0===l?void 0:l.Layer,(t=>n.of(t.Type))),(t=>eu(this,void 0,void 0,(function*(){yield i(t.GraphUnits,s,a)}))))}))}}(nu||(nu={})),(ou||(ou={})).toArray=function(t){var e;return eu(this,void 0,void 0,(function*(){if(!t||!(null===(e=t.CustomTag)||void 0===e?void 0:e.size()))return[];function i(e,i){var n,o,r,s,a,l;return eu(this,void 0,void 0,(function*(){const u=t.parentUntil(Ql),d=yield null===(o=null===(n=null==u?void 0:u.DocBody)||void 0===n?void 0:n.first())||void 0===o?void 0:o.relateDocument().get(),c=null===(r=null==d?void 0:d.Pages)||void 0===r?void 0:r.Page,h=yield null===(s=null==c?void 0:c.toArray().filter((t=>t.ID===e)).pop())||void 0===s?void 0:s.relatePage().get(),p=null===(a=null==h?void 0:h.Content)||void 0===a?void 0:a.Layer;let g,f=new Ls(0,0,0,0);if(!p||0===p.size())return f.toArray();for(const t of p)null===(l=t.GraphUnits)||void 0===l||l.forEach((t=>{const e=t.available();e&&e.ID===i&&(g=e)}));if(g){const t=g.Boundary;return t&&(f=new Ls(t)),f.toArray()}return f.toArray()}))}function n(t){return eu(this,void 0,void 0,(function*(){if(t.children.some((t=>t.name.toLowerCase().includes("objectref")))){const e=[];for(const n of t.children){const t=+n.text,o=+n.attributes.PageRef;e.push({id:t,page:o,target:yield i(o,t)})}return{name:t.name,refer:e}}const e=[];for(const i of t.children){const t=yield n(i);e.push(t)}return{name:t.name,children:e}}))}const o=[];for(let e of t.CustomTag){const t=yield e.relateCustom().get(),i=yield n(t.node.element);o.push(i)}return o}))};var ru,su=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};function au(t,e,i){return Math.min(i,Math.max(e,t))}function lu(t){return"number"==typeof t&&!Number.isNaN(t)}!function(t){function e(t){switch(t){case"Direct":return 0;case"Repeat":return 1;case"Reflect":return 2}}class i{constructor(){this.cache=[]}prepare(){return su(this,void 0,void 0,(function*(){return this.module=yield hl(),!!this.module}))}toDoubleVector(t){var e;return null===(e=this.module)||void 0===e?void 0:e.na2v(t,"Float64")}willFree(t){t&&this.cache.push(t)}close(){var t;for(let e of this.cache)null===(t=this.module)||void 0===t||t.free(e)}}t.Base=i;t.Axial=class extends i{constructor(){super()}calculate(t,i,n,o,s,a,l,u){const d=this.module;if(d){const c=d.axialShading;if(r(c)){const r=this.toDoubleVector([a.x,a.y,l.x,l.y]),h=this.toDoubleVector(u.reduce(((t,e)=>t.concat([e.position,e.color.red,e.color.green,e.color.blue,e.color.alpha])),new Array)),p=c(t,i,e(n),o,s,r,h);return this.willFree(p),d.free(r),d.free(h),p}}return null}};t.Radial=class extends i{constructor(){super()}calculate(t,i,n,o,s,a,l,u,d,c,h,p){const g=this.module;if(g){const f=g.radialShading;if(r(f)){const r=this.toDoubleVector([c.x,c.y,h.x,h.y]),y=this.toDoubleVector(p.reduce(((t,e)=>t.concat([e.position,e.color.red,e.color.green,e.color.blue,e.color.alpha])),new Array)),m=f(t,i,e(n),o,s,a,l,u,d,r,y);return this.willFree(m),g.free(r),g.free(y),m}}return null}};t.Gouraud=class extends i{constructor(){super()}calculate(t,e,i,n,o){const s=this.module;if(s){const a=s.gouraudShading;if(r(a)){const r=this.toDoubleVector(n.reduce(((t,e)=>t.concat([e.x,e.y,e.edge,e.color.red,e.color.green,e.color.blue,e.color.alpha])),new Array)),l=this.toDoubleVector(o?[o.red,o.green,o.blue,o.alpha]:[]),u=a(t,e,i,r,l);return this.willFree(u),s.free(r),s.free(l),u}}return null}};t.LaGouraud=class extends i{constructor(){super()}calculate(t,e,i,n,o,s){const a=this.module;if(a){const l=a.laGouraudShading;if(r(l)){const r=this.toDoubleVector(o.reduce(((t,e)=>t.concat([e.x,e.y,e.color.red,e.color.green,e.color.blue,e.color.alpha])),new Array)),u=this.toDoubleVector(s?[s.red,s.green,s.blue,s.alpha]:[]),d=l(t,e,i,n,r,u);return this.willFree(d),a.free(r),a.free(u),d}}return null}}}(ru||(ru={}));class uu{constructor(t,e,i,n=255){this.R=au(t,0,255),this.G=au(e,0,255),this.B=au(i,0,255),this.A=au(n,0,255)}get red(){return this.R}get green(){return this.G}get blue(){return this.B}get alpha(){return this.A}equal(t){return this.R==t.R&&this.G==t.G&&this.B==t.B&&this.A==t.A}toCSS(){return`rgba(${this.R},${this.G},${this.B},${Math.round(100*this.A/255)/100})`}toARGB(){return this.A<<24|this.R<<16|this.G<<8|this.B}toRGBA(){return this.R<<24|this.G<<16|this.B<<8|this.A}static random(t=[0,255],e=!1){const i=()=>Math.floor(Math.random()*(t[1]+1-t[0]))+t[0];return new uu(i(),i(),i(),e?i():void 0)}static fromARGB(t){return new uu(t>>16&255,t>>8&255,255&t,t>>24&255)}static fromRGBA(t){return new uu(t>>24&255,t>>16&255,t>>8&255,255&t)}static parseHex(t){const e=t.substring(1),i=e.length<=4?e.match(/.{1}/g):e.match(/.{2}/g);if(i){const[t,e,n,o]=i.map((t=>t.trim())).map((t=>Number.parseInt(1==t.length?t+t:t,16)));if(Number.isInteger(t)&&Number.isInteger(e)&&Number.isInteger(n))return new uu(t,e,n,Number.isInteger(o)?o:255)}return null}static parseRGB(t){const e=t.substring(t.indexOf("(")+1,t.indexOf(")")),[i,n,o,r]=e.split(/[,\s\/]+/).map((t=>t.trim())).map((t=>t.endsWith("%")?-1*Math.round(255*Number.parseFloat(t)/100):Number.parseFloat(t)));if(lu(i)&&lu(n)&&lu(o)){let t=255;return lu(r)&&(t=r<0?Math.abs(r):Math.round(255*r)),new uu(Math.abs(i),Math.abs(n),Math.abs(o),t)}return null}static parseCSS(t){if(t&&t.length){const e=t.trim().toLowerCase();if(e.startsWith("#"))return uu.parseHex(e);if(e.startsWith("rgb(")||e.startsWith("rgba("))return uu.parseRGB(e)}return null}}uu.BLACK=new uu(0,0,0),uu.WHITE=new uu(255,255,255),uu.TRANSPARENT=new uu(0,0,0,0);var du,cu=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};!function(t){class e extends gl{constructor(t,e){super(t,e)}get index(){var t;return null!==(t=this.origin.index)&&void 0!==t?t:0}get width(){var t;return null!==(t=this.origin.width)&&void 0!==t?t:0}get height(){var t;return null!==(t=this.origin.height)&&void 0!==t?t:0}get components(){var t;return null!==(t=this.origin.components)&&void 0!==t?t:0}data(){const t=this.origin.data();if(t){const e=new Uint8ClampedArray(4*t.length);let i=0;for(let n of t)e[i++]=n>>24&255,e[i++]=n>>16&255,e[i++]=n>>8&255,e[i++]=255&n;return e}return null}}t.Page=e;class i extends gl{constructor(t,e){super(t,e)}open(){return this.origin.open()}count(){const t=this.origin.pageCount();return null!=t?t:0}at(t=0){const i=this.invoke("pageAt",t);return i?new e(this.module,i):null}}t.Decoder=i,t.decode=function(t){return cu(this,void 0,void 0,(function*(){return hl().then((e=>{const n=e.decodeImage(t);return n?new i(e,n):null}))}))}}(du||(du={}));const hu=1,pu=5,gu=hu;function fu(t){gu>=pu&&console.log(`Info: ${t}`)}class yu{constructor(t){this.constructor===yu&&(!function(t){throw new Error(t)}("Cannot initialize BaseException."),this.message=t,this.name=this.constructor.name)}}function mu(t){return t<=0?0:Math.ceil(Math.log2(t))}function vu(t,e){return t[e]<<24>>24}function $u(t,e){return t[e]<<8|t[e+1]}function bu(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function wu(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!1}),i}const xu=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];class Cu{constructor(t,e,i){this.data=t,this.bp=e,this.dataEnd=i,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const t=this.data;let e=this.bp;255===t[e]?t[e+1]>143?(this.clow+=65280,this.ct=8):(e++,this.clow+=t[e]<<9,this.ct=7,this.bp=e):(e++,this.clow+=e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(t,e){let i=t[e]>>1,n=1&t[e];const o=xu[i],r=o.qe;let s,a=this.a-r;if(this.chigh<r)a<r?(a=r,s=n,i=o.nmps):(a=r,s=1^n,1===o.switchFlag&&(n=s),i=o.nlps);else{if(this.chigh-=r,0!=(32768&a))return this.a=a,n;a<r?(s=1^n,1===o.switchFlag&&(n=s),i=o.nlps):(s=n,i=o.nmps)}do{0===this.ct&&this.byteIn(),a<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&a));return this.a=a,t[e]=i<<1|n,s}}const Du=-1,Ou=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],Pu=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],Su=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],Iu=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],Tu=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],Ru=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];class ju{constructor(t,e){if(!t||"function"!=typeof t.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=t,this.eof=!1,this.encoding=e.K||0,this.eoline=e.EndOfLine||!1,this.byteAlign=e.EncodedByteAlign||!1,this.columns=e.Columns||1728,this.rows=e.Rows||0;let i,n=e.EndOfBlock;for(null==n&&(n=!0),this.eoblock=n,this.black=e.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(i=this._lookBits(12));)this._eatBits(1);1===i&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}readNextChar(){if(this.eof)return-1;const t=this.refLine,e=this.codingLine,i=this.columns;let n,o,r,s,a;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;let r,a,l;if(this.err=!1,this.nextLine2D){for(s=0;e[s]<i;++s)t[s]=e[s];for(t[s++]=i,t[s]=i,e[0]=0,this.codingPos=0,n=0,o=0;e[this.codingPos]<i;)switch(r=this._getTwoDimCode(),r){case 0:this._addPixels(t[n+1],o),t[n+1]<i&&(n+=2);break;case 1:if(r=a=0,o){do{r+=l=this._getBlackCode()}while(l>=64);do{a+=l=this._getWhiteCode()}while(l>=64)}else{do{r+=l=this._getWhiteCode()}while(l>=64);do{a+=l=this._getBlackCode()}while(l>=64)}for(this._addPixels(e[this.codingPos]+r,o),e[this.codingPos]<i&&this._addPixels(e[this.codingPos]+a,1^o);t[n]<=e[this.codingPos]&&t[n]<i;)n+=2;break;case 7:if(this._addPixels(t[n]+3,o),o^=1,e[this.codingPos]<i)for(++n;t[n]<=e[this.codingPos]&&t[n]<i;)n+=2;break;case 5:if(this._addPixels(t[n]+2,o),o^=1,e[this.codingPos]<i)for(++n;t[n]<=e[this.codingPos]&&t[n]<i;)n+=2;break;case 3:if(this._addPixels(t[n]+1,o),o^=1,e[this.codingPos]<i)for(++n;t[n]<=e[this.codingPos]&&t[n]<i;)n+=2;break;case 2:if(this._addPixels(t[n],o),o^=1,e[this.codingPos]<i)for(++n;t[n]<=e[this.codingPos]&&t[n]<i;)n+=2;break;case 8:if(this._addPixelsNeg(t[n]-3,o),o^=1,e[this.codingPos]<i)for(n>0?--n:++n;t[n]<=e[this.codingPos]&&t[n]<i;)n+=2;break;case 6:if(this._addPixelsNeg(t[n]-2,o),o^=1,e[this.codingPos]<i)for(n>0?--n:++n;t[n]<=e[this.codingPos]&&t[n]<i;)n+=2;break;case 4:if(this._addPixelsNeg(t[n]-1,o),o^=1,e[this.codingPos]<i)for(n>0?--n:++n;t[n]<=e[this.codingPos]&&t[n]<i;)n+=2;break;case Du:this._addPixels(i,0),this.eof=!0;break;default:fu("bad 2d code"),this._addPixels(i,0),this.err=!0}}else for(e[0]=0,this.codingPos=0,o=0;e[this.codingPos]<i;){if(r=0,o)do{r+=l=this._getBlackCode()}while(l>=64);else do{r+=l=this._getWhiteCode()}while(l>=64);this._addPixels(e[this.codingPos]+r,o),o^=1}let u=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(r=this._lookBits(12),this.eoline)for(;r!==Du&&1!==r;)this._eatBits(1),r=this._lookBits(12);else for(;0===r;)this._eatBits(1),r=this._lookBits(12);1===r?(this._eatBits(12),u=!0):r===Du&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&u&&this.byteAlign){if(r=this._lookBits(12),1===r){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(s=0;s<4;++s)r=this._lookBits(12),1!==r&&fu("bad rtc code: "+r),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(r=this._lookBits(13),r===Du)return this.eof=!0,-1;if(r>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&r))}e[0]>0?this.outputBits=e[this.codingPos=0]:this.outputBits=e[this.codingPos=1],this.row++}if(this.outputBits>=8)a=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&e[this.codingPos]<i&&(this.codingPos++,this.outputBits=e[this.codingPos]-e[this.codingPos-1]);else{r=8,a=0;do{this.outputBits>r?(a<<=r,1&this.codingPos||(a|=255>>8-r),this.outputBits-=r,r=0):(a<<=this.outputBits,1&this.codingPos||(a|=255>>8-this.outputBits),r-=this.outputBits,this.outputBits=0,e[this.codingPos]<i?(this.codingPos++,this.outputBits=e[this.codingPos]-e[this.codingPos-1]):r>0&&(a<<=r,r=0))}while(r)}return this.black&&(a^=255),a}_addPixels(t,e){const i=this.codingLine;let n=this.codingPos;t>i[n]&&(t>this.columns&&(fu("row is wrong length"),this.err=!0,t=this.columns),1&n^e&&++n,i[n]=t),this.codingPos=n}_addPixelsNeg(t,e){const i=this.codingLine;let n=this.codingPos;if(t>i[n])t>this.columns&&(fu("row is wrong length"),this.err=!0,t=this.columns),1&n^e&&++n,i[n]=t;else if(t<i[n]){for(t<0&&(fu("invalid code"),this.err=!0,t=0);n>0&&t<i[n-1];)--n;i[n]=t}this.codingPos=n}_findTableCode(t,e,i,...n){const o=n||0;for(let n=t;n<=e;++n){let t=this._lookBits(n);if(t===Du)return[!0,1,!1];if(n<e&&(t<<=e-n),!o||t>=o){const e=i[t-o];if(e[0]===n)return this._eatBits(n),[!0,e[1],!0]}}return[!1,0,!1]}_getTwoDimCode(){let t,e=0;if(this.eoblock){if(e=this._lookBits(7),t=Ou[e],t&&t[0]>0)return this._eatBits(t[0]),t[1]}else{const t=this._findTableCode(1,7,Ou);if(t[0]&&t[2])return t[1]}return fu("Bad two dim code"),Du}_getWhiteCode(){let t,e=0;if(this.eoblock){if(e=this._lookBits(12),e===Du)return 1;if(t=e>>5==0?Pu[e]:Su[e>>3],t[0]>0)return this._eatBits(t[0]),t[1]}else{let t=this._findTableCode(1,9,Su);if(t[0])return t[1];if(t=this._findTableCode(11,12,Pu),t[0])return t[1]}return fu("bad white code"),this._eatBits(1),1}_getBlackCode(){let t,e;if(this.eoblock){if(t=this._lookBits(13),t===Du)return 1;if(e=t>>7==0?Iu[t]:t>>9==0&&t>>7!=0?Tu[(t>>1)-64]:Ru[t>>7],e[0]>0)return this._eatBits(e[0]),e[1]}else{let t=this._findTableCode(2,6,Ru);if(t[0])return t[1];if(t=this._findTableCode(7,12,Tu,64),t[0])return t[1];if(t=this._findTableCode(10,13,Iu),t[0])return t[1]}return fu("bad black code"),this._eatBits(1),1}_lookBits(t){let e;for(;this.inputBits<t;){if(-1===(e=this.source.next()))return 0===this.inputBits?Du:this.inputBuf<<t-this.inputBits&65535>>16-t;this.inputBuf=this.inputBuf<<8|e,this.inputBits+=8}return this.inputBuf>>this.inputBits-t&65535>>16-t}_eatBits(t){(this.inputBits-=t)<0&&(this.inputBits=0)}}class Au{}class Fu{}class Mu{}class Bu{}class ku{}class Lu{}class Nu{}class Eu{constructor(t,e){this.width=bu(t,e),this.height=bu(t,e+4),this.resolutionX=bu(t,e+8),this.resolutionY=bu(t,e+12)}}class _u extends yu{constructor(t){super(`JBIG2 error: ${t}`)}}class Vu{getContexts(t){return t in this?this.id:this.id=new Int8Array(65536)}}class qu{constructor(t,e,i){this.data=t,this.start=e,this.end=i}get decoder(){return wu(this,"decoder",new Cu(this.data,this.start,this.end))}get contextCache(){return wu(this,"contextCache",new Vu)}}function Gu(t,e,i){const n=t.getContexts(e);let o=1;function r(t){let e=0;for(let r=0;r<t;r++){const t=i.readBit(n,o);o=o<256?o<<1|t:511&(o<<1|t)|256,e=e<<1|t}return e>>>0}const s=r(1),a=r(1)?r(1)?r(1)?r(1)?r(1)?r(32)+4436:r(12)+340:r(8)+84:r(6)+20:r(4)+4:r(2);return 0===s?a:a>0?-a:null}function zu(t,e,i){const n=t.getContexts("IAID");let o=1;for(let t=0;t<i;t++){o=o<<1|e.readBit(n,o)}return i<31?o&(1<<i)-1:2147483647&o}const Uu=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],Wu=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],Hu=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],Yu=[39717,1941,229,405],Xu=[32,8];function Zu(t,e,i,n,o,r,s,a){if(t){return gd(new cd(a.data,a.start,a.end),e,i,!1)}if(0===n&&!r&&!o&&4===s.length&&3===s[0].x&&-1===s[0].y&&-3===s[1].x&&-1===s[1].y&&2===s[2].x&&-2===s[2].y&&-2===s[3].x&&-2===s[3].y)return function(t,e,i){const n=i.decoder,o=i.contextCache.getContexts("GB");let r,s,a,l,u,d,c;const h=[];for(s=0;s<e;s++)for(u=h[s]=new Uint8Array(t),d=s<1?u:h[s-1],c=s<2?u:h[s-2],r=c[0]<<13|c[1]<<12|c[2]<<11|d[0]<<7|d[1]<<6|d[2]<<5|d[3]<<4,a=0;a<t;a++)u[a]=l=n.readBit(o,r),r=(31735&r)<<1|(a+3<t?c[a+3]<<11:0)|(a+4<t?d[a+4]<<4:0)|l;return h}(e,i,a);const l=!!r,u=Wu[n].concat(s);u.sort((function(t,e){return t.y-e.y||t.x-e.x}));const d=u.length,c=new Int8Array(d),h=new Int8Array(d),p=[];let g,f,y=0,m=0,v=0,$=0;for(f=0;f<d;f++)c[f]=u[f].x,h[f]=u[f].y,m=Math.min(m,u[f].x),v=Math.max(v,u[f].x),$=Math.min($,u[f].y),f<d-1&&u[f].y===u[f+1].y&&u[f].x===u[f+1].x-1?y|=1<<d-1-f:p.push(f);const b=p.length,w=new Int8Array(b),x=new Int8Array(b),C=new Uint16Array(b);for(g=0;g<b;g++)f=p[g],w[g]=u[f].x,x[g]=u[f].y,C[g]=1<<d-1-f;const D=-m,O=-$,P=e-v,S=Yu[n];let I=new Uint8Array(e);const T=[],R=a.decoder,j=a.contextCache.getContexts("GB");let A,F,M,B,k,L=0,N=0;for(let t=0;t<i;t++){if(o){if(L^=R.readBit(j,S),L){T.push(I);continue}}for(I=new Uint8Array(I),T.push(I),A=0;A<e;A++){if(l&&r[t][A]){I[A]=0;continue}if(A>=D&&A<P&&t>=O)for(N=N<<1&y,f=0;f<b;f++)F=t+x[f],M=A+w[f],B=T[F][M],B&&(B=C[f],N|=B);else for(N=0,k=d-1,f=0;f<d;f++,k--)M=A+c[f],M>=0&&M<e&&(F=t+h[f],F>=0&&(B=T[F][M],B&&(N|=B<<k)));const i=R.readBit(j,N);I[A]=i}}return T}function Ku(t,e,i,n,o,r,s,a,l){let u=Hu[i].coding;0===i&&(u=u.concat([a[0]]));const d=u.length,c=new Int32Array(d),h=new Int32Array(d);let p;for(p=0;p<d;p++)c[p]=u[p].x,h[p]=u[p].y;let g=Hu[i].reference;0===i&&(g=g.concat([a[1]]));const f=g.length,y=new Int32Array(f),m=new Int32Array(f);for(p=0;p<f;p++)y[p]=g[p].x,m[p]=g[p].y;const v=n[0].length,$=n.length,b=Xu[i],w=[],x=l.decoder,C=l.contextCache.getContexts("GR");let D=0;for(let i=0;i<e;i++){if(s){if(D^=x.readBit(C,b),D)throw console.log("++++++++++++++++++++++++"),new _u("prediction is not supported")}const e=new Uint8Array(t);w.push(e);for(let s=0;s<t;s++){let a,l,u=0;for(p=0;p<d;p++)a=i+h[p],l=s+c[p],a<0||l<0||l>=t?u<<=1:u=u<<1|w[a][l];for(p=0;p<f;p++)a=i+m[p]-r,l=s+y[p]-o,a<0||a>=$||l<0||l>=v?u<<=1:u=u<<1|n[a][l];const g=x.readBit(C,u);e[s]=g}}return w}function Qu(t,e,i,n,o,r,s,a,l,u,d,c,h,p,g,f,y,m,v){if(t&&e)throw console.log("++++++++++++++++++++++++"),new _u("refinement with Huffman is not supported");const $=[];let b,w;for(b=0;b<n;b++){if(w=new Uint8Array(i),o)for(let t=0;t<i;t++)w[t]=o;$.push(w)}const x=y.decoder,C=y.contextCache;let D=t?-p.tableDeltaT.decode(v):-Gu(C,"IADT",x),O=0;for(b=0;b<r;){D+=t?p.tableDeltaT.decode(v):Gu(C,"IADT",x);O+=t?p.tableFirstS.decode(v):Gu(C,"IAFS",x);let n=O;for(;;){let o=0;s>1&&(o=t?v.readBits(m):Gu(C,"IAIT",x));const r=s*D+o,O=t?p.symbolIDTable.decode(v):zu(C,x,l),P=e&&(t?v.readBit():Gu(C,"IARI",x));let S=a[O],I=S[0].length,T=S.length;if(P){const t=Gu(C,"IARDW",x),e=Gu(C,"IARDH",x);I+=t,T+=e,S=Ku(I,T,g,S,(t>>1)+Gu(C,"IARDX",x),(e>>1)+Gu(C,"IARDY",x),!1,f,y)}const R=r-(1&c?0:T-1),j=n-(2&c?I-1:0);let A,F,M;if(u){for(A=0;A<T;A++){if(w=$[j+A],!w)continue;M=S[A];const t=Math.min(i-R,I);switch(h){case 0:for(F=0;F<t;F++)w[R+F]|=M[F];break;case 2:for(F=0;F<t;F++)w[R+F]^=M[F];break;default:throw console.log("++++++++++++++++++++++++"),new _u(`operator ${h} is not supported`)}}n+=T-1}else{for(F=0;F<T;F++)if(w=$[R+F],w)switch(M=S[F],h){case 0:for(A=0;A<I;A++)w[j+A]|=M[A];break;case 2:for(A=0;A<I;A++)w[j+A]^=M[A];break;default:throw console.log("++++++++++++++++++++++++"),new _u(`operator ${h} is not supported`)}n+=I-1}b++;const B=t?p.tableDeltaS.decode(v):Gu(C,"IADS",x);if(null===B)break;n+=B+d}}return $}function Ju(t,e){const i=new Au;i.number=bu(t,e);const n=t[e+4],o=63&n;if(!Uu[o])throw console.log("++++++++++++++++++++++++"),new _u("invalid segment type: "+o);i.type=o,i.typeName=Uu[o],i.deferredNonRetain=!!(128&n);const r=!!(64&n),s=t[e+5];let a=s>>5&7;const l=[31&s];let u=e+6;if(7===s){a=536870911&bu(t,u-1),u+=3;let e=a+7>>3;for(l[0]=t[u++];--e>0;)l.push(t[u++])}else if(5===s||6===s)throw console.log("++++++++++++++++++++++++"),new _u("invalid referred-to flags");i.retainBits=l;let d=4;i.number<=256?d=1:i.number<=65536&&(d=2);const c=[];let h,p;for(h=0;h<a;h++){let e;e=1===d?t[u]:2===d?$u(t,u):bu(t,u),c.push(e),u+=d}if(i.referredTo=c,r?(i.pageAssociation=bu(t,u),u+=4):i.pageAssociation=t[u++],i.length=bu(t,u),u+=4,4294967295===i.length){if(38!==o)throw console.log("++++++++++++++++++++++++"),new _u("invalid unknown segment length");{const e=ed(t,u),n=!!(1&t[u+id]),o=6,r=new Uint8Array(o);for(n||(r[0]=255,r[1]=172),r[2]=e.height>>>24&255,r[3]=e.height>>16&255,r[4]=e.height>>8&255,r[5]=255&e.height,h=u,p=t.length;h<p;h++){let e=0;for(;e<o&&r[e]===t[h+e];)e++;if(e===o){i.length=h+o;break}}if(4294967295===i.length)throw console.log("++++++++++++++++++++++++"),new _u("segment end was not found")}}return i.headerEnd=u,i}function td(t,e,i,n){const o=[];let r=i;for(;r<n;){const s=Ju(e,r);r=s.headerEnd;const a={header:s,data:e,start:i,end:n};if(t.randomAccess||(a.start=r,r+=s.length,a.end=r),o.push(a),51===s.type)break}if(t.randomAccess)for(let t=0,e=o.length;t<e;t++)o[t].start=r,r+=o[t].header.length,o[t].end=r;return o}function ed(t,e){return{width:bu(t,e),height:bu(t,e+4),x:bu(t,e+8),y:bu(t,e+12),combinationOperator:7&t[e+16]}}const id=17;function nd(t,e){const i=t.header,n=t.data,o=t.end;let r,s,a,l,u=t.start;switch(i.type){case 0:const t=new Mu,e=$u(n,u);if(t.huffman=!!(1&e),t.refinement=!!(2&e),t.huffmanDHSelector=e>>2&3,t.huffmanDWSelector=e>>4&3,t.bitmapSizeSelector=e>>6&1,t.aggregationInstancesSelector=e>>7&1,t.bitmapCodingContextUsed=!!(256&e),t.bitmapCodingContextRetained=!!(512&e),t.template=e>>10&3,t.refinementTemplate=e>>12&1,u+=2,!t.huffman){for(l=0===t.template?4:1,s=[],a=0;a<l;a++)s.push({x:vu(n,u),y:vu(n,u+1)}),u+=2;t.at=s}if(t.refinement&&!t.refinementTemplate){for(s=[],a=0;a<2;a++)s.push({x:vu(n,u),y:vu(n,u+1)}),u+=2;t.refinementAt=s}t.numberOfExportedSymbols=bu(n,u),u+=4,t.numberOfNewSymbols=bu(n,u),u+=4,r=[t,i.number,i.referredTo,n,u,o];break;case 6:case 7:const d=new Bu;d.info=ed(n,u),u+=id;const c=$u(n,u);if(u+=2,d.huffman=!!(1&c),d.refinement=!!(2&c),d.logStripSize=c>>2&3,d.stripSize=1<<d.logStripSize,d.referenceCorner=c>>4&3,d.transposed=!!(64&c),d.combinationOperator=c>>7&3,d.defaultPixelValue=c>>9&1,d.dsOffset=c<<17>>27,d.refinementTemplate=c>>15&1,d.huffman){const t=$u(n,u);u+=2,d.huffmanFS=3&t,d.huffmanDS=t>>2&3,d.huffmanDT=t>>4&3,d.huffmanRefinementDW=t>>6&3,d.huffmanRefinementDH=t>>8&3,d.huffmanRefinementDX=t>>10&3,d.huffmanRefinementDY=t>>12&3,d.huffmanRefinementSizeSelector=!!(16384&t)}if(d.refinement&&!d.refinementTemplate){for(s=[],a=0;a<2;a++)s.push({x:vu(n,u),y:vu(n,u+1)}),u+=2;d.refinementAt=s}d.numberOfSymbolInstances=bu(n,u),u+=4,r=[d,i.referredTo,n,u,o];break;case 16:const h=new ku,p=n[u++];h.mmr=!!(1&p),h.template=p>>1&3,h.patternWidth=n[u++],h.patternHeight=n[u++],h.maxPatternIndex=bu(n,u),u+=4,r=[h,i.number,n,u,o];break;case 22:case 23:const g=new Lu;g.info=ed(n,u),u+=id;const f=n[u++];g.mmr=!!(1&f),g.template=f>>1&3,g.enableSkip=!!(8&f),g.combinationOperator=f>>4&7,g.defaultPixelValue=f>>7&1,g.gridWidth=bu(n,u),u+=4,g.gridHeight=bu(n,u),u+=4,g.gridOffsetX=4294967295&bu(n,u),u+=4,g.gridOffsetY=4294967295&bu(n,u),u+=4,g.gridVectorX=$u(n,u),u+=2,g.gridVectorY=$u(n,u),u+=2,r=[g,i.referredTo,n,u,o];break;case 38:case 39:const y=new Nu;y.info=ed(n,u),u+=id;const m=n[u++];if(y.mmr=!!(1&m),y.template=m>>1&3,y.prediction=!!(8&m),!y.mmr){for(l=0===y.template?4:1,s=[],a=0;a<l;a++)s.push({x:vu(n,u),y:vu(n,u+1)}),u+=2;y.at=s}r=[y,n,u,o];break;case 48:const v=new Eu(n,u);4294967295===v.height&&delete v.height;const $=n[u+16];$u(n,u+17),v.lossless=!!(1&$),v.refinement=!!(2&$),v.defaultPixelValue=$>>2&1,v.combinationOperator=$>>3&3,v.requiresBuffer=!!(32&$),v.combinationOperatorOverride=!!(64&$),r=[v];break;case 49:case 50:case 51:case 62:break;case 53:r=[i.number,n,u,o];break;default:throw console.log("++++++++++++++++++++++++"),new _u(`segment type ${i.typeName}(${i.type}) is not implemented`)}const d="on"+i.typeName;d in e&&e[d].apply(e,r)}function od(t,e){for(let i=0,n=t.length;i<n;i++)nd(t[i],e)}class rd{onPageInformation(t){this.currentPageInfo=t;const e=t.width+7>>3,i=new Uint8ClampedArray(e*t.height);if(t.defaultPixelValue)for(let t=0,e=i.length;t<e;t++)i[t]=255;this.buffer=i}drawBitmap(t,e){const i=this.currentPageInfo,n=t.width,o=t.height,r=i.width+7>>3,s=i.combinationOperatorOverride?t.combinationOperator:i.combinationOperator,a=this.buffer,l=128>>(7&t.x);let u,d,c,h,p=t.y*r+(t.x>>3);switch(s){case 0:for(u=0;u<o;u++){for(c=l,h=p,d=0;d<n;d++)e[u][d]&&(a[h]|=c),c>>=1,c||(c=128,h++);p+=r}break;case 2:for(u=0;u<o;u++){for(c=l,h=p,d=0;d<n;d++)e[u][d]&&(a[h]^=c),c>>=1,c||(c=128,h++);p+=r}break;default:throw console.log("++++++++++++++++++++++++"),new _u(`operator ${s} is not supported`)}}onImmediateGenericRegion(t,e,i,n){const o=t.info,r=new qu(e,i,n),s=Zu(t.mmr,o.width,o.height,t.template,t.prediction,null,t.at,r);this.drawBitmap(o,s)}onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion.apply(this,rd.arguments)}onSymbolDictionary(t,e,i,n,o,r){let s,a;t.huffman&&(s=function(t,e,i){let n,o,r,s,a=0;switch(t.huffmanDHSelector){case 0:case 1:n=dd(t.huffmanDHSelector+4);break;case 3:n=hd(a,e,i),a++;break;default:throw console.log("++++++++++++++++++++++++"),new _u("invalid Huffman DH selector")}switch(t.huffmanDWSelector){case 0:case 1:o=dd(t.huffmanDWSelector+2);break;case 3:o=hd(a,e,i),a++;break;default:throw console.log("++++++++++++++++++++++++"),new _u("invalid Huffman DW selector")}t.bitmapSizeSelector?(r=hd(a,e,i),a++):r=dd(1);s=t.aggregationInstancesSelector?hd(a,e,i):dd(1);return{tableDeltaHeight:n,tableDeltaWidth:o,tableBitmapSize:r,tableAggregateInstances:s}}(t,i,this.customTables),a=new cd(n,o,r));let l=this.symbols;l||(this.symbols=l={});let u=[];for(let t=0,e=i.length;t<e;t++){const e=l[i[t]];e&&(u=u.concat(e))}const d=new qu(n,o,r);l[e]=function(t,e,i,n,o,r,s,a,l,u,d,c){if(t&&e)throw console.log("++++++++++++++++++++++++"),new _u("symbol refinement with Huffman is not supported");const h=[];let p=0,g=mu(i.length+n);const f=d.decoder,y=d.contextCache;let m,v;for(t&&(m=dd(1),v=[],g=Math.max(g,1));h.length<n;){p+=t?r.tableDeltaHeight.decode(c):Gu(y,"IADH",f);let n=0,o=0;const m=t?v.length:0;for(;;){const m=t?r.tableDeltaWidth.decode(c):Gu(y,"IADW",f);if(null===m)break;let $;if(n+=m,o+=n,e){const o=Gu(y,"IAAI",f);if(o>1)$=Qu(t,e,n,p,0,o,1,i.concat(h),g,0,0,1,0,r,l,u,d,0,c);else{const t=zu(y,f,g),e=Gu(y,"IARDX",f),o=Gu(y,"IARDY",f);$=Ku(n,p,l,t<i.length?i[t]:h[t-i.length],e,o,!1,u,d)}h.push($)}else t?v.push(n):($=Zu(!1,n,p,s,!1,null,a,d),h.push($))}if(t&&!e){const t=r.tableBitmapSize.decode(c);let e;if(c.byteAlign(),0===t)e=pd(c,o,p);else{const i=c.end,n=c.position+t;c.end=n,e=gd(c,o,p,!1),c.end=i,c.position=n}const i=v.length;if(m===i-1)h.push(e);else{let t,n,o,r,s,a=0;for(t=m;t<i;t++){for(r=v[t],o=a+r,s=[],n=0;n<p;n++)s.push(e[n].subarray(a,o));h.push(s),a=o}}}}const $=[],b=[];let w=!1;const x=i.length+n;for(;b.length<x;){let e=t?m.decode(c):Gu(y,"IAEX",f);for(;e--;)b.push(w);w=!w}let C,D,O;for(C=0,O=i.length;C<O;C++)b[C]&&$.push(i[C]);for(D=0;D<n;C++,D++)b[C]&&$.push(h[D]);return $}(t.huffman,t.refinement,u,t.numberOfNewSymbols,t.numberOfExportedSymbols,s,t.template,t.at,t.refinementTemplate,t.refinementAt,d,a)}onImmediateTextRegion(t,e,i,n,o){const r=t.info;let s,a;const l=this.symbols;let u=[];for(let t=0,i=e.length;t<i;t++){const i=l[e[t]];i&&(u=u.concat(i))}const d=mu(u.length);t.huffman&&(a=new cd(i,n,o),s=function(t,e,i,n,o){const r=[];for(let t=0;t<=34;t++){const e=o.readBits(4);r.push(new sd([t,e,0,0]))}const s=new ld(r,!1);r.length=0;for(let t=0;t<n;){const e=s.decode(o);if(e>=32){let i,n,s;switch(e){case 32:if(0===t)throw console.log("++++++++++++++++++++++++"),new _u("no previous value in symbol ID table");n=o.readBits(2)+3,i=r[t-1].prefixLength;break;case 33:n=o.readBits(3)+3,i=0;break;case 34:n=o.readBits(7)+11,i=0;break;default:throw console.log("++++++++++++++++++++++++"),new _u("invalid code length in symbol ID table")}for(s=0;s<n;s++)r.push(new sd([t,i,0,0])),t++}else r.push(new sd([t,e,0,0])),t++}o.byteAlign();const a=new ld(r,!1);let l,u,d,c=0;switch(t.huffmanFS){case 0:case 1:l=dd(t.huffmanFS+6);break;case 3:l=hd(c,e,i),c++;break;default:throw console.log("++++++++++++++++++++++++"),new _u("invalid Huffman FS selector")}switch(t.huffmanDS){case 0:case 1:case 2:u=dd(t.huffmanDS+8);break;case 3:u=hd(c,e,i),c++;break;default:throw console.log("++++++++++++++++++++++++"),new _u("invalid Huffman DS selector")}switch(t.huffmanDT){case 0:case 1:case 2:d=dd(t.huffmanDT+11);break;case 3:d=hd(c,e,i),c++;break;default:throw console.log("++++++++++++++++++++++++"),new _u("invalid Huffman DT selector")}if(t.refinement)throw console.log("++++++++++++++++++++++++"),new _u("refinement with Huffman is not supported");return{symbolIDTable:a,tableFirstS:l,tableDeltaS:u,tableDeltaT:d}}(t,e,this.customTables,u.length,a));const c=new qu(i,n,o),h=Qu(t.huffman,t.refinement,r.width,r.height,t.defaultPixelValue,t.numberOfSymbolInstances,t.stripSize,u,d,t.transposed,t.dsOffset,t.referenceCorner,t.combinationOperator,s,t.refinementTemplate,t.refinementAt,c,t.logStripSize,a);this.drawBitmap(r,h)}onImmediateLosslessTextRegion(){this.onImmediateTextRegion.apply(this,rd.arguments)}onPatternDictionary(t,e,i,n,o){let r=this.patterns;r||(this.patterns=r={});const s=new qu(i,n,o);r[e]=function(t,e,i,n,o,r){const s=[];t||(s.push({x:-e,y:0}),0===o&&(s.push({x:-3,y:-1}),s.push({x:2,y:-2}),s.push({x:-2,y:-2})));const a=Zu(t,(n+1)*e,i,o,!1,null,s,r),l=[];for(let t=0;t<=n;t++){const n=[],o=e*t,r=o+e;for(let t=0;t<i;t++)n.push(a[t].subarray(o,r));l.push(n)}return l}(t.mmr,t.patternWidth,t.patternHeight,t.maxPatternIndex,t.template,s)}onImmediateHalftoneRegion(t,e,i,n,o){const r=this.patterns[e[0]],s=t.info,a=new qu(i,n,o),l=function(t,e,i,n,o,r,s,a,l,u,d,c,h,p,g){if(s)throw console.log("++++++++++++++++++++++++"),new _u("skip is not supported");if(0!==a)throw console.log("++++++++++++++++++++++++"),new _u("operator "+a+" is not supported in halftone region");const f=[];let y,m,v;for(y=0;y<o;y++){if(v=new Uint8Array(n),r)for(m=0;m<n;m++)v[m]=r;f.push(v)}const $=e.length,b=e[0],w=b[0].length,x=b.length,C=mu($),D=[];t||(D.push({x:i<=1?3:2,y:-1}),0===i&&(D.push({x:-3,y:-1}),D.push({x:2,y:-2}),D.push({x:-2,y:-2})));const O=[];let P,S,I,T,R,j,A,F,M,B,k;for(t&&(P=new cd(g.data,g.start,g.end)),y=C-1;y>=0;y--)S=t?gd(P,l,u,!0):Zu(!1,l,u,i,!1,null,D,g),O[y]=S;for(I=0;I<u;I++)for(T=0;T<l;T++){for(R=0,j=0,m=C-1;m>=0;m--)R=O[m][I][T]^R,j|=R<<m;if(A=e[j],F=d+I*p+T*h>>8,M=c+I*h-T*p>>8,F>=0&&F+w<=n&&M>=0&&M+x<=o)for(y=0;y<x;y++)for(k=f[M+y],B=A[y],m=0;m<w;m++)k[F+m]|=B[m];else{let t,e;for(y=0;y<x;y++)if(e=M+y,!(e<0||e>=o))for(k=f[e],B=A[y],m=0;m<w;m++)t=F+m,t>=0&&t<n&&(k[t]|=B[m])}}return f}(t.mmr,r,t.template,s.width,s.height,t.defaultPixelValue,t.enableSkip,t.combinationOperator,t.gridWidth,t.gridHeight,t.gridOffsetX,t.gridOffsetY,t.gridVectorX,t.gridVectorY,a);this.drawBitmap(s,l)}onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,rd.arguments)}onTables(t,e,i,n){let o=this.customTables;o||(this.customTables=o={}),o[t]=function(t,e,i){const n=t[e],o=4294967295&bu(t,e+1),r=4294967295&bu(t,e+5),s=new cd(t,e+9,i),a=1+(n>>1&7),l=1+(n>>4&7),u=[];let d,c,h=o;do{d=s.readBits(a),c=s.readBits(l),u.push(new sd([h,d,c,0])),h+=1<<c}while(h<r);d=s.readBits(a),u.push(new sd([o-1,d,32,0,"lower"])),d=s.readBits(a),u.push(new sd([r,d,32,0])),1&n&&(d=s.readBits(a),u.push(new sd([d,0])));return new ld(u,!1)}(e,i,n)}}class sd{constructor(t){2===t.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=t[0],this.rangeLength=0,this.prefixCode=t[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=t[0],this.prefixLength=t[1],this.rangeLength=t[2],this.prefixCode=t[3],this.isLowerRange="lower"===t[4])}}class ad{constructor(t){this.children=[],t?(this.isLeaf=!0,this.rangeLength=t.rangeLength,this.rangeLow=t.rangeLow,this.isLowerRange=t.isLowerRange,this.isOOB=t.isOOB):this.isLeaf=!1}buildTree(t,e){const i=t.prefixCode>>e&1;if(e<=0)this.children[i]=new ad(t);else{let n=this.children[i];n||(this.children[i]=n=new ad(null)),n.buildTree(t,e-1)}}decodeNode(t){if(this.isLeaf){if(this.isOOB)return null;const e=t.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-e:e)}const e=this.children[t.readBit()];if(!e)throw console.log("++++++++++++++++++++++++"),new _u("invalid Huffman data");return e.decodeNode(t)}}class ld{constructor(t,e){e||this.assignPrefixCodes(t),this.rootNode=new ad(null);for(let e=0,i=t.length;e<i;e++){const i=t[e];i.prefixLength>0&&this.rootNode.buildTree(i,i.prefixLength-1)}}decode(t){return this.rootNode.decodeNode(t)}assignPrefixCodes(t){const e=t.length;let i=0;for(let n=0;n<e;n++)i=Math.max(i,t[n].prefixLength);const n=new Uint32Array(i+1);for(let i=0;i<e;i++)n[t[i].prefixLength]++;let o,r,s,a=1,l=0;for(n[0]=0;a<=i;){for(l=l+n[a-1]<<1,o=l,r=0;r<e;)s=t[r],s.prefixLength===a&&(s.prefixCode=o,o++),r++;a++}}}const ud={};function dd(t){let e,i=ud[t];if(i)return i;switch(t){case 1:e=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:e=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:e=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:e=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:e=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:e=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:e=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:e=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:e=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:e=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:e=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:e=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:e=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:e=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:e=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw console.log("++++++++++++++++++++++++"),new _u(`standard table B.${t} does not exist`)}for(let t=0,i=e.length;t<i;t++)e[t]=new sd(e[t]);return i=new ld(e,!0),ud[t]=i,i}class cd{constructor(t,e,i){this.shift=-1,this.currentByte=0,this.data=t,this.start=e,this.end=i,this.position=e}readBit(){if(this.shift<0){if(this.position>=this.end)throw console.log("++++++++++++++++++++++++"),new _u("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const t=this.currentByte>>this.shift&1;return this.shift--,t}readBits(t){let e,i=0;for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i}byteAlign(){this.shift=-1}next(){return this.position>=this.end?-1:this.data[this.position++]}}function hd(t,e,i){let n=0;for(let o=0,r=e.length;o<r;o++){const r=i[e[o]];if(r){if(t===n)return r;n++}}throw console.log("++++++++++++++++++++++++"),new _u("can't find custom Huffman table")}function pd(t,e,i){const n=[];for(let o=0;o<i;o++){const i=new Uint8Array(e);n.push(i);for(let n=0;n<e;n++)i[n]=t.readBit();t.byteAlign()}return n}function gd(t,e,i,n){const o=new ju(t,{K:-1,Columns:e,Rows:i,BlackIs1:!0,EndOfBlock:n}),r=[];let s,a=!1;for(let t=0;t<i;t++){const t=new Uint8Array(e);r.push(t);let i=-1;for(let n=0;n<e;n++)i<0&&(s=o.readNextChar(),-1===s&&(s=0,a=!0),i=7),t[n]=s>>i&1,i--}if(n&&!a){const t=5;for(let e=0;e<t&&-1!==o.readNextChar();e++);}return r}class fd{parseChunks(t){return function(t){const e=new rd;for(let i=0,n=t.length;i<n;i++){const n=t[i];od(td(new Fu,n.data,n.start,n.end),e)}return e.buffer}(t)}parse(t){const{imgData:e,width:i,height:n}=function(t){const e=t.length;let i=0;if(151!==t[i]||74!==t[i+1]||66!==t[i+2]||50!==t[i+3]||13!==t[i+4]||10!==t[i+5]||26!==t[i+6]||10!==t[i+7])throw console.log("++++++++++++++++++++++++"),new _u("parseJbig2 - invalid header.");const n=Object.create(null);i+=8;const o=t[i++];n.randomAccess=!(1&o),2&o||(n.numberOfPages=bu(t,i),i+=4);const r=td(n,t,i,e),s=new rd;od(r,s);const{width:a,height:l}=s.currentPageInfo,u=s.buffer,d=new Uint8ClampedArray(a*l);let c=0,h=0;for(let t=0;t<l;t++){let t,e=0;for(let i=0;i<a;i++)e||(e=128,t=u[h++]),d[c++]=t&e?0:255,e>>=1}return{imgData:d,width:a,height:l}}(t);return this.width=i,this.height=n,e}}var yd=i(1707),md=i(48834).Buffer,vd=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const $d=pt.getLogger("Image");var bd;function wd(t){return vd(this,void 0,void 0,(function*(){const e=new Blob([t]),i=W.url.create(e);return U.util.loadImage(i).then((t=>(W.url.revoke(i),t))).catch((t=>(W.url.revoke(i),t)))}))}function xd(t){return Ra(t.width,t.height,(e=>{const i=e.getContext("2d");i&&i.putImageData(t,0,0)}))}!function(t){t[t.jpeg=0]="jpeg",t[t.png=1]="png",t[t.gif=2]="gif",t[t.bmp=3]="bmp",t[t.tiff=4]="tiff",t[t.jpeg2000=5]="jpeg2000",t[t.jbig2=6]="jbig2",t[t.ofd=7]="ofd",t[t.unknown=8]="unknown"}(bd||(bd={}));const Cd={jpeg:wd,png:wd,gif:wd,bmp:wd,jpeg2000:function(t){return vd(this,void 0,void 0,(function*(){const e=yield du.decode(t);if(e&&e.open()&&e.count()>0){const t=e.at(0);if(t)try{const e=t.width,i=t.height;if(e>0&&i>0){const n=t.data();if(n){return xd(new ImageData(n,e,i))}}}finally{t.close()}}return null}))},tiff:function(t){return vd(this,void 0,void 0,(function*(){const e=yd.decode(md.from(t));if(e&&e.length>0){const i=e[0];if(yd.decodeImage(t,i),i.width>0&&i.height>0){$d.debug(`It is tiff, total ${e.length} pages`);const t=yd.toRGBA8(i);return xd(new ImageData(new Uint8ClampedArray(t),i.width,i.height))}}return null}))},jbig2:function(t){return vd(this,void 0,void 0,(function*(){const e=new fd,i=e.parse(t),n=e.width,o=e.height,r=new ImageData(n,o),s=r.data;for(let t=0,e=0,r=n*o*4;t<r;)s[t++]=i[e],s[t++]=i[e],s[t++]=i[e++],s[t++]=255;return xd(r)}))}};function Dd(t,e){return vd(this,void 0,void 0,(function*(){const i=function(t){const e=md.from(t).toString("hex",0,12).toUpperCase();return e.startsWith("FFD8FF")?bd.jpeg:e.startsWith("89504E47")?bd.png:e.startsWith("47494638")?bd.gif:e.startsWith("424D")?bd.bmp:e.startsWith("974A42320D0A1A0A")?bd.jbig2:e.startsWith("4949")||e.startsWith("4D4D")?bd.tiff:e.startsWith("0000000C6A5020200D0A870A")||e.startsWith("0D0A870A")||e.startsWith("FF4FFF51")?bd.jpeg2000:e.startsWith("504B")?bd.ofd:bd.unknown}(t),n=bd[i];$d.debug("Image format is "+n);const o=Cd[n];if(r(o)){let n;n=t instanceof ArrayBuffer?new Uint8Array(t):t;try{const t=yield o(n,e);return new Od(t,i,e)}catch(t){return $d.warn("Decode image failed",t),null}}return $d.warn(`Not found decoder of image format ${n}`),null}))}class Od{constructor(t,e,i=0){this.image=t,this.format=e,this.dpi=i}}var Pd,Sd=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};!function(t){const e="FontEngine";class i extends gl{constructor(t,e){super(t,e),this.flags=this.vectorToArray(this.origin.flag),this.points=this.vectorToArray(this.origin.point)}each(t){if(this.flags&&this.points){let e=0;for(const n of this.flags)switch(n){case this.module.FONT_PATH_FLAG_MOVE:t(i.MOVE,this.points.slice(e,e+2)),e+=2;break;case this.module.FONT_PATH_FLAG_LINE:t(i.LINE,this.points.slice(e,e+2)),e+=2;break;case this.module.FONT_PATH_FLAG_CUBIC:t(i.CUBIC,this.points.slice(e,e+6)),e+=6}}}}i.MOVE="M",i.LINE="L",i.CUBIC="B",t.Path=i;class n extends gl{constructor(t,e){super(t,e)}name(){const t=this.origin.fullName(2052),e=this.vectorToArray(t);return wt().decode(Ct.of(...e),"utf16be")}family(){return this.origin.familyName}ascent(){return this.origin.ascent}descent(){return this.origin.descent}height(){return this.origin.height}chars(){const t=this.origin.chars();return this.vectorToArray(t)}glyphIndex(t){var e;return null!==(e=this.origin.glyphIndex(t))&&void 0!==e?e:0}glyphPath(t,e=400,n=!1){const o=this.invoke("glyphPath",t,e,n);return o?new i(this.module,o):null}charPath(t,e=400,i=!1){const n=this.glyphIndex(t);return this.glyphPath(n,e,i)}glyphBox(t){const e=this.origin.glyphBox(t),i=this.vectorToArray(e).map((t=>t/1e3));return new Ls(i[0],i[1],i[2]-i[0],i[3]-i[1]).scale(1,-1)}}t.Face=n;class o extends gl{constructor(t){super(t,new t[e])}static new(){return Sd(this,void 0,void 0,(function*(){return hl().then((t=>r(t[e])?new o(t):null)).catch((t=>(console.warn("SWASM error:",t),null)))}))}openPath(t,e=0){const i=this.invoke("openPath",t,e);return i?new n(this.module,i):null}openBuffer(t,e=0){const i=this.invoke("openBuffer",t,e);return i?new n(this.module,i):null}}t.Engine=o}(Pd||(Pd={}));const Id=r(String.prototype.codePointAt),Td=r(String.fromCodePoint);class Rd{constructor(t){this.origin=null!=t?t:""}static fromCode(t){let e;if(e=Array.isArray(t)?[...t]:[t],Td)return new Rd(String.fromCodePoint(...e));{const t=new Array;for(const i of e){if(i<0&&i>1114111)throw new RangeError("Invalid code point");if(i<65535)t.push(String.fromCharCode(i));else{const e=i-65536,n=55296+(e>>>10),o=56320+(1023&e);t.push(String.fromCharCode(n)),t.push(String.fromCharCode(o))}}return new Rd(t.join())}}get length(){return this.toChars().length}toChars(){return this.uchars||(this.uchars=[...this.origin]),[...this.uchars]}charAt(t){return this.toChars()[t]}codeAt(t){const e=this.charAt(t);return e?Rd.codeOf(e):Number.NaN}toCodes(){return this.toChars().map(Rd.codeOf)}static codeOf(t){var e;if(Id)return null!==(e=t.codePointAt(0))&&void 0!==e?e:Number.NaN;{let e=t.charCodeAt(0);if(55296<=e&&e<=56319){e=1024*(e-55296)+(t.charCodeAt(1)-56320)+65536}return e}}toString(){return this.toChars().map((t=>`\\u{${Rd.codeOf(t)}}`)).join()}escape(){return this.toChars().map((t=>`&#${Rd.codeOf(t)};`)).join()}[Symbol.iterator](){const t=this.toChars();let e=0;return{next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0}}}}}var jd=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Ad=pt.getLogger("Font"),Fd=(new bs).skewX(-12*Math.PI/180),Md=[...Di].sort(((t,e)=>t-e)),Bd=t=>s(t)||Number.isNaN(t)?ma:Md.includes(t)?t:t<Md[0]||t>Md[Md.length-1]?ma:100*Math.round(t/100);var kd;!function(t){t.FontNameDifferent=Q.register(new Y(H.Render+100,"%source% can not merge with %target%")),t.GlyphNotFound=Q.register(new Y(t.FontNameDifferent.code+1,"Not found glyph of %c%[%u%] at font %name%"))}(kd||(kd={}));class Ld{close(){}paintPath(t,e,i,n){t.save(),i.paint(t,n),e.fill&&t.fill(),e.stroke&&t.stroke(),t.restore()}}class Nd extends Ld{constructor(t,e,i){super(),this.c=e,this.font=t,this.fixedWidth=i}set weight(t){this.font.weight!=t&&(this.font=new Wd(this.font.name,this.font.family,t))}paint(t,e,i=1){var n,o;t.save();const r=this.font.toCSS(e.size*i,null!==(n=e.italic)&&void 0!==n&&n,e.weight,this.fixedWidth);t.font=r;const s=null!==(o=e.matrix)&&void 0!==o?o:bs.DEFAULT;if(e.fill)if("object"==typeof t.fillStyle&&e.bound)if(s.isOnlyTranslate())t.fillText(this.c,s.e,s.f);else{const i=Ra(e.bound.width,e.bound.height,(e=>{const i=e.getContext("2d");i&&(i.fillStyle="#FFFFFF",i.save(),s.applyToContext2D(i),i.font=t.font,i.fillText(this.c,0,0),i.restore(),i.globalCompositeOperation="source-in",i.fillStyle=t.fillStyle,i.fillRect(0,0,e.width,e.height))}));t.drawImage(i,0,0)}else t.save(),s.applyToContext2D(t),t.fillText(this.c,0,0),t.restore();if(e.stroke)if("object"==typeof t.strokeStyle&&e.bound)if(s.isOnlyTranslate())t.strokeText(this.c,s.e,s.f);else{const i=Ra(e.bound.width,e.bound.height,(e=>{const i=e.getContext("2d");i&&(i.strokeStyle="#FFFFFF",i.save(),s.applyToContext2D(i),i.font=t.font,i.strokeText(this.c,0,0),i.restore(),i.globalCompositeOperation="source-in",i.fillStyle=t.strokeStyle,i.fillRect(0,0,e.width,e.height))}));t.drawImage(i,0,0)}else t.save(),s.applyToContext2D(t),t.strokeText(this.c,0,0),t.restore();t.restore()}}class Ed{constructor(t,e){this.origin=t,this.fixedWidth=null!=e&&e}type(){return"local"}close(){}glyph(t){if("string"==typeof t)return new Nd(this.origin,t,this.fixedWidth);Ad.warn("Local glyph unsupport char index "+t)}bbox(t,e){var i;if("number"==typeof t)return Ls.EMPTY;s(this.bboxCache)&&(this.bboxCache=new Jl.LRUMap($a.GLYPH_CACHE));const n=200;s(this.g)&&(this.g=null!==(i=Ra(1,1).getContext("2d"))&&void 0!==i?i:new CanvasRenderingContext2D,this.g.textBaseline="alphabetic",this.g.font=this.origin.toCSS(n,!1));let o=this.bboxCache.get(t);if(s(o)){const e=this.g.measureText(t),i=e.width;let r=0,a=0,l=n;U.canvas.metrics.actualAscent&&U.canvas.metrics.actualDescent?(a=-e.actualBoundingBoxAscent,l=e.actualBoundingBoxAscent+e.actualBoundingBoxDescent):(s(this.m)&&(this.m=Qd(this.origin.family,this.origin.weight)),a=-this.m.ascent*n),o=new Ls(r,a,i,l),this.bboxCache.set(t,o)}return o.scale(e/n)}}class _d extends Ld{constructor(t,e){super(),this.path=t,this.zoom=e}paint(t,e,i=1){var n;let o=null!==(n=e.matrix)&&void 0!==n?n:bs.DEFAULT;e.italic&&(o=o.multiply(Fd)),o=o.scale(e.size*this.zoom*i),this.paintPath(t,e,this.path,o)}}class Vd{constructor(t,e,i,n,o,r){this.url=t,this.name=e,this.family=i,this.weight=n,this.unicodes=o?new Map(o):new Map,this.glyphs=r?new Map([...r].map((([t,e])=>[t,_s.parse("nonzero",e)]))):new Map}type(){return"remote"}close(){this.unicodes.clear(),this.glyphs.clear()}merge(t){if(this.name!=t.name)throw new Q(kd.FontNameDifferent.code).set("source",this.name).set("target",t.name);for(const[e,i]of t.unicodes)this.unicodes.set(e,i);for(const[e,i]of t.glyphs)this.glyphs.set(e,i)}replenish(t){var e,i;return jd(this,void 0,void 0,(function*(){const n={unicode:[],glyph:[]};if(t.unicode&&t.unicode.forEach((t=>{var e;this.unicodes.has(t)||null===(e=n.unicode)||void 0===e||e.push(t)})),t.glyph&&t.glyph.forEach((t=>{var e;this.glyphs.has(t)||null===(e=n.glyph)||void 0===e||e.push(t)})),0==(null===(e=n.unicode)||void 0===e?void 0:e.length)&&0==(null===(i=n.glyph)||void 0===i?void 0:i.length))return;const o=new Map;o.set(this.weight,n);const r=yield qa(this.url,[{name:this.name,family:this.family,weights:o}]);if(Array.isArray(r)&&r.length>0){const t=r[0].weights;for(const[e,i]of Object.entries(t)){if(Number.parseInt(e)==this.weight){Object.entries(i.unicode).forEach((([t,e])=>{this.unicodes.set(Number.parseInt(t),Number.parseInt(e))})),Object.entries(i.glyph).forEach((([t,e])=>{this.glyphs.set(Number.parseInt(t),_s.parse("nonzero",e.path+""))}));break}}}}))}glyph(t){if("string"==typeof t){const e=Rd.codeOf(t),i=this.unicodes.get(e);if(i)return this.glyph(i);throw new Q(kd.GlyphNotFound.code).set("c",t).set("u",e).set("name",this.name)}{const e=this.glyphs.get(t);if(e)return new _d(e,.01);throw new Q(kd.GlyphNotFound.code).set("c"," ").set("u",t).set("name",this.name)}}bbox(t,e){return Ls.EMPTY}}class qd extends Ld{constructor(t,e){super(),this.fgp=t,this.index=e}paint(t,e,i){var n;let o=null!==(n=e.matrix)&&void 0!==n?n:bs.DEFAULT;o=o.scale(e.size*i);const r=this.fgp.path(this.index,e.weight,e.italic);this.paintPath(t,e,r,o)}}class Gd{constructor(t,e){this.face=t.openBuffer(e),this.giMapping=new rt,this.pathCache=new Jl.LRUMap($a.GLYPH_CACHE)}name(){var t,e;return null!==(e=null===(t=this.face)||void 0===t?void 0:t.name())&&void 0!==e?e:""}type(){return"embed"}close(){var t,e;null===(t=this.face)||void 0===t||t.close(),this.face=null,this.giMapping.clear(),this.pathCache.clear(),null===(e=this.bboxCache)||void 0===e||e.clear()}glyph(t){var e,i;if(this.face){if("string"==typeof t){const n=this.gi(t);if(n<=0){const n=this.name(),o=null!==(i=null===(e=this.face)||void 0===e?void 0:e.family())&&void 0!==i?i:"";return Ad.debug(`Use local ${n}[${o}] font instead`),new Nd(new Wd(n,o,ma),t,!1)}return new qd(this,n)}return new qd(this,t)}}gi(t){return this.giMapping.safeGet(t,(()=>{var e,i;const n=Rd.codeOf(t),o=null!==(i=null===(e=this.face)||void 0===e?void 0:e.glyphIndex(n))&&void 0!==i?i:0;return 0==o&&Ad.warn(`${t}[${n}] return glyph index 0`),o}))}path(t,e=400,i=!1){var n;const o=`${t}_${Math.round(e/100)}_${i?1:0}`;let r=this.pathCache.get(o);if(s(r)){const s=null===(n=this.face)||void 0===n?void 0:n.glyphPath(t,e,i);r=this.toPath(s),this.pathCache.set(o,r)}return r}toPath(t){const e=new Array;return t&&(t.each(((t,i)=>{e.push(new Ds(t,i))})),t.close()),new _s(e)}bbox(t,e){if(this.face){s(this.bboxCache)&&(this.bboxCache=new Jl.LRUMap($a.GLYPH_CACHE));let i=0;i="string"==typeof t?this.gi(t):t;let n=this.bboxCache.get(i);return s(n)&&(n=this.face.glyphBox(i),this.bboxCache.set(i,n)),n.scale(e)}return Ls.EMPTY}}const zd="__unknownFont",Ud="__unknownFamily";class Wd{constructor(t,e,i,n){this.name=t,this.weight=i,"string"==typeof e?(this._gp=new Ed(this,n),this.family=e):(this._gp=e,this.family="")}type(){return this._gp.type()}close(){this._gp.close()}isEmbed(){return"embed"==this._gp.type()}isRemote(){return"remote"==this._gp.type()}isLocal(){return"local"==this._gp.type()}replenish(t){return jd(this,void 0,void 0,(function*(){if(this.isRemote())return this._gp.replenish(t)}))}mergeRemote(t){this.isRemote()&&t.isRemote()&&this._gp.merge(t._gp)}cssNames(){if(this.cssName)return this.cssName;const t=new Set([this.name]);d(this.family)||Ud==this.family||t.add(this.family);const e=this.name.toLowerCase(),i=(...e)=>{e.forEach((e=>t.add(e)))};return e.includes("roman")?i("Times New Roman","times"):e.includes("")||e.includes("")?i("","SimSun","simsun"):e.includes("")?i("","SimHei","simhei"):e.includes("")?i("","KaiTi","kaiti"):e.includes("")?i("","FangSong","fangsong"):e.includes("")&&i("","STCaiyun","stcaiyun"),this.cssName=[...t],this.cssName}toCSS(t,e,i,n){const o=null!=i?i:this.weight,r=`${e?"italic":"normal"} ${Bd(o)} ${t}px `,s=this.cssNames();n&&s.push("Courier","Courier New");return r+s.map((t=>`"${t}"`)).join(",")}glyph(t){let e;return e=this._gp.glyph(t),e instanceof Nd&&(e.weight=this.weight),e}bbox(t,e){return this._gp.bbox(t,e)}}const Hd=t=>{const e={};if(t&&t.size>0)for(const[i,n]of t)e[i+""]=n;return e};class Yd{constructor(){this.mapping=new Map}close(){for(let[t,e]of this.mapping)for(let[t,i]of e)i.close();this.mapping.clear()}byId(t){let e=this.mapping.get(t);return e||(e=new Map,this.mapping.set(t,e)),e}getFont(t,e){return this.byId(t).get(e)}defalut(t){return new Wd("arial","Arial",t)}put(t,e,i){const n=this.byId(t);if(e.isEmbed())for(const t of Di)n.set(t,e);else if(e.isRemote())if(s(i))Ad.warn("Remote font need weight");else{const n=this.getFont(t,i);n?n.isRemote()?n.mergeRemote(e):Ad.warn("Only RemoteData can merge"):this.byId(t).set(i,e)}else n.set(null!=i?i:e.weight,e);return this}find(t,e=400){return this.getFont(t,e)}merge(t){if(t)for(const[e,i]of t.mapping)for(const[t,n]of i)this.put(e,n,t);return this}prepare(t,e){var i,n,o,r;return jd(this,void 0,void 0,(function*(){if((t=>!s(t.data))(t)){if((null!==(n=null===(i=this.mapping.get(t.id))||void 0===i?void 0:i.size)&&void 0!==n?n:0)>0)return!0;const e=yield t.data,o=yield Pd.Engine.new();let r;if(!o)return Ad.warn("Freetype is invalid?"),!1;r=new Gd(o,e);const s=new Wd(t.name,r,400);return this.put(t.id,s),!0}if(s(e)){let e=[...null!==(r=null===(o=t.weights)||void 0===o?void 0:o.keys())&&void 0!==r?r:[]];0==e.length&&(e=[...Di]);for(const i of e)this.put(t.id,new Wd(t.name,t.family,i,t.fixedWidth))}else this.merge(yield Yd.remote([t],e));return!0}))}static remote(t,e){const i=t.filter((t=>t.weights&&t.weights.size>0)).map((t=>Object.assign({},t,{weights:Hd(t.weights)})));return 0==i.length?Promise.resolve(new Yd):qa(e,i).then((i=>{const n=new Yd;if(Array.isArray(i))for(const o of i){const i=o.name,r=o.weights;for(const[o,s]of Object.entries(r)){const r=new Map(Object.entries(s.unicode).map((([t,e])=>[Number.parseInt(t),Number.parseInt(e)]))),a=new Map(Object.entries(s.glyph).map((([t,e])=>[Number.parseInt(t),e.path+""]))),l=Number.parseInt(o);for(const{id:o,name:s,family:u}of t)if(s==i){const t=new Wd(i,new Vd(e,i,u,l,r,a),l);n.put(o,t,l);break}}}return n}))}static loadRemote(t,e){return jd(this,void 0,void 0,(function*(){const i=[];return t.length>0&&e&&e.length>0&&i.push(Yd.remote(t,e)),Promise.all(i).then((t=>t.reduce(((t,e)=>t.merge(e)),new Yd)))}))}}const Xd={capHeight:"S",baseline:"n",xHeight:"x",descent:"p",ascent:"h",tittle:"i"};class Zd{constructor(t,e,i){this.family=t,this.size=e,this.weight=i,this.padding=.5*this.size,this.canvas=Ra(2*this.size,2*this.size+this.padding);const n=this.canvas.getContext("2d");if(!n)throw new Error("get CanvasRenderingContext2D failed");n.font=this.toCSS(),n.textBaseline="top",n.textAlign="center",this.g=n}toCSS(){return`${this.weight} ${this.size}px ${this.family}`}setAlignment(t="top"){const e="bottom"===t?this.canvas.height:0;this.g.setTransform(1,0,0,1,0,e),this.g.textBaseline=t}updateText(t){this.g.clearRect(0,0,this.canvas.width,this.canvas.height),this.g.fillText(t,this.canvas.width/2,this.padding,this.canvas.width)}computeLineHeight(){this.setAlignment("bottom");const t=this.canvas.height-this.measureBottom("A");return this.setAlignment("top"),this.measureBottom("A")+t}measureTop(t){return this.getFirstIndex(this.getPixels(t))/this.canvas.width-this.padding}measureBottom(t){return this.getLastIndex(this.getPixels(t))/this.canvas.width-this.padding}getFirstIndex(t){for(let e=3,i=t.length;e<i;e+=4)if(t[e]>0)return(e-3)/4;return t.length}getLastIndex(t){for(let e=t.length-1;e>=3;e-=4)if(t[e]>0)return e/4;return 0}getPixels(t){return this.updateText(t),this.g.getImageData(0,0,this.canvas.width,this.canvas.height).data}calc(t="baseline"){const e=Xd,i={capHeight:this.measureTop(e.capHeight),baseline:this.measureBottom(e.baseline),xHeight:this.measureTop(e.xHeight),descent:this.measureBottom(e.descent),bottom:this.computeLineHeight(),ascent:this.measureTop(e.ascent),tittle:this.measureTop(e.tittle),top:0},n={},o=i[t];for(let t in i)n[t]=(i[t]-o)/this.size;return n}simple(){const t=Xd,e=this.measureBottom(t.baseline);return{ascent:Math.abs(this.measureTop(t.ascent)-e)/this.size,descent:(this.measureBottom(t.descent)-e)/this.size}}}const Kd=new rt,Qd=(t,e=400)=>Kd.safeGet(t+"$"+e,(()=>{var i;const n=1e3;if(U.canvas.metrics.actualAscent&&U.canvas.metrics.actualDescent){const o=null!==(i=Ra(1,1).getContext("2d"))&&void 0!==i?i:new CanvasRenderingContext2D;o.font=`${e} 1000px ${t}`,o.textBaseline="alphabetic";const r=o.measureText("Sphinx");return{ascent:r.actualBoundingBoxAscent/n,descent:r.actualBoundingBoxDescent/n}}return new Zd(t,n,e).simple()}));var Jd=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const tc=pt.getLogger("Renders",lt.WARN);class ec{constructor(t,e,i,n=!1){this.char=t,this.bound=e,this.id=i,this.outside=n}}class ic{constructor(t=96,e){this._dpi=t<1?fa:t,this._ratio=null!=e?e:((t,e=!0)=>Da(!0===e?M.devicePixelRatio:1,t<=0?fa:t))(this._dpi),this.debug=Object.assign({},xa.get.debug)}get ratio(){return this._ratio}get dpi(){return this._dpi}}class nc{constructor(){this.missingPageSize=new xs(...va)}isRemoteFont(){return!s(this.glyphURL)}}class oc extends T{constructor(t,e){var i;super(),this.config=null!=e?e:new nc,this.document=t,this.ofd=this.document.parentUntil(Ql),this.defaultCS=null===(i=this.document.CommonData)||void 0===i?void 0:i.DefaultCS,this.fonts=new Yd,this._images=new Jl.LRUMap($a.IMAGE_CACHE)}doClose(){this._images.clear(),this.fonts.close()}load(){var t;return Jd(this,void 0,void 0,(function*(){tc.info("Load global resource..."),this.docResource=yield null===(t=this.document.CommonData)||void 0===t?void 0:t.loadAllResource();const e=this.document.parentUntil(Zl);if(e.Signatures)try{const t=yield e.relateSignatures().get();t&&(this.signature=yield t.relateAllSignature())}catch(t){tc.error(t)}return this.document.Annotations&&(this.annotations=yield this.document.relateAnnotations().get()),tc.info("Load global resource finish"),!0}))}prepare(){return Jd(this,void 0,void 0,(function*(){this._ready||(this._ready=new Promise((t=>{t(this.load())}))),yield this._ready}))}findImage(t,e,i){return Jd(this,void 0,void 0,(function*(){let n=this._images.get(t);if(n&&(n.format!=bd.ofd||n.dpi==i))return n.image;const o=yield e(),r=yield ac.decode(o,i);return r?(this._images.set(t,r),r.image):null}))}}const rc={over:"source-over",light:"destination-over",dark:"darken",clip:"source-in"};class sc{constructor(t,e=10,i=0,n="butt",o="miter",r){this.width=t,this.miterLimit=e,this.dash=r,this.dashOffset=i,this.cap=n,this.join=o}}class ac{constructor(t,e,i,n,o){this.width=e,this.height=i,this.format=n,this.option=o,t instanceof ArrayBuffer||t instanceof Uint8Array?this.data=t:this.image=t}toImage(){var t;return Jd(this,void 0,void 0,(function*(){if(this.image)return this.image;if(this.data){const e=yield ac.decode(this.data,null===(t=this.option)||void 0===t?void 0:t.dpi);if(e)return e.image}return null}))}static decode(t,e){return Jd(this,void 0,void 0,(function*(){return Dd(t,e)}))}}class lc{constructor(t){this._scale=1,this._canvas=t,this._option=new ic,this._bound=Ls.EMPTY}init(t,e=new ic,i=0,n){var o,r;let s=0,a=0;if(t instanceof ic){if(this._option=t,this._scale=t.ratio,!this._canvas)throw new Q(wa.CanvasNotReady.code)}else{this._option=e,this._scale=e.ratio;const o=t,r=o.size(),l=Sa(i,[r.width,r.height]),u=l[0]*this._scale,d=Math.ceil(u),c=l[1]*this._scale,h=Math.ceil(c);if(!1===(null==n?void 0:n.resize)){if(!this._canvas)throw new Q(wa.CanvasNotReady.code)}else this._canvas?(this._canvas.width=d,this._canvas.height=h):this._canvas=Ra(d,h);s=-o.x*this._scale,a=-o.y*this._scale}const l=null!==(o=this._canvas.getContext("2d"))&&void 0!==o?o:ja;l.imageSmoothingEnabled=!0,l.save();const u=null==n?void 0:n.offset;u&&l.translate(u[0]*this._scale,u[1]*this._scale);const c=this._canvas.width,h=this._canvas.height;!1!==(null==n?void 0:n.clear)&&(l.clearRect(0,0,c,h),d(e.debug.background)||(l.save(),l.fillStyle=null!==(r=e.debug.background)&&void 0!==r?r:"",l.fillRect(0,0,c,h),l.restore())),0!=i&&(l.translate(c/2,h/2),l.rotate(i*ya),i%180==0?l.translate(-c/2,-h/2):l.translate(-h/2,-c/2)),l.translate(s,a),this._g2d=l}finish(){this.g.restore()}get origin(){if(!this._canvas)throw new Q(wa.CanvasNotReady.code);return this._canvas}get g(){if(!this._g2d)throw new Q(wa.CanvasNotReady.code);return this._g2d}crop(t){this._crop=t;const{x:e,y:i,width:n,height:o}=t.scale(this._scale),r=this.g;r.beginPath(),r.rect(e,i,n,o),r.clip()}begin(t,e){if(t.width<=0||t.height<=0)return tc.debug(`Invalid boundy ${t.toArray()}`),!1;if(this._crop&&!this._crop.isIntersect(t))return!1;this._bound=t.scale(this._scale);const i=this.g;return i.save(),e&&(i.globalCompositeOperation=rc[e]),i.beginPath(),i.rect(this._bound.x,this._bound.y,this._bound.width,this._bound.height),i.clip(),i.translate(this._bound.x,this._bound.y),!0}end(){this.g.restore()}background(t){if(t&&this._canvas){const e=this.g,i=new Ls(0,0,this._canvas.width,this._canvas.height);e.save(),t.transfer(e,!0,this._option,i),e.fillRect(0,0,i.width,i.height),e.restore()}}transform(t){if(t){const e=new bs(t);e.isDefault()||this.g.transform(e.a,e.b,e.c,e.d,e.e*this._scale,e.f*this._scale)}}fill(t,e){t.transfer(this.g,!0,this._option,this._bound,e?new bs(e):bs.DEFAULT)}stroke(t,e){t.transfer(this.g,!1,this._option,this._bound,e?new bs(e):bs.DEFAULT)}alpha(t){s(t)||t<0||(this.g.globalAlpha=t<1?t:t/255)}drawLink(t,e){var i;const n=null===(i=this._canvas)||void 0===i?void 0:i.parentElement,o=document.createElement("a");return o.classList.add("annot-link"),o.style.left=`${e.x}px`,o.style.top=`${e.y}px`,o.style.width=`${e.width}px`,o.style.height=`${e.height}px`,o.setAttribute("target","_blank"),o.setAttribute("href",t),n.appendChild(o),o}drawText(t,e,i,n){var o,r;if(!1===n.fill&&!1===n.stroke)return;const s=this.g;s.save();let a=(new bs).translate(e*this._scale,i*this._scale),l=Object.assign({},n);n.size<0&&(a=a.rotate(Math.PI),l.size=Math.abs(n.size));const u=null!==(o=n.charDirection)&&void 0!==o?o:0;0!=u&&(a=a.rotate(u*ya));const d=null!==(r=n.hScale)&&void 0!==r?r:1;1!=d&&(a=a.scale(d,1)),l.matrix=a,l.bound=this._bound,t.paint(s,l,this._scale),s.restore()}lineStyle(t){const e=this.g;let i=t.width*this._scale;if(i<1){const t=new bs(e.getTransform()).getScaleX();t*i<1&&(i=1.0001/t)}return e.lineWidth=i,e.miterLimit=t.miterLimit,e.lineDashOffset=t.dashOffset*this._scale,e.lineCap=t.cap,e.lineJoin=t.join,t.dash&&e.setLineDash(t.dash.map((t=>t*this._scale))),1}drawShape(t,e,i){if(0==e&&0==i)return;const n=this.g;n.save(),t.paint(n,(new bs).scale(this._scale)),e&&n.fill(t.rule),i&&n.stroke(),n.restore()}drawImage(t,e,i,n){return Jd(this,void 0,void 0,(function*(){const o=yield t.toImage();if(!o||o.width<=0||o.height<=0)return void tc.debug("Image invalid");const r=this.g;r.save(),n&&(r.globalCompositeOperation=rc[n]),r.translate(e*this._scale,i*this._scale),r.imageSmoothingEnabled=!0,r.scale(this._scale,this._scale),r.drawImage(o,0,0,o.width,o.height,0,0,t.width,t.height),r.restore()}))}drawCanvas(t,e){const i=t._canvas;if(i){const t=this.g;t.save(),e&&(t.globalCompositeOperation=rc[e]),t.imageSmoothingEnabled=!0,t.drawImage(i,0,0),t.restore()}}custom(t){if(r(t)){const e=this.g;e.save(),t(this.g),e.restore()}}dump(){var t;tc.debug(null===(t=this._canvas)||void 0===t?void 0:t.toDataURL())}}var uc;!function(t){t[t.content=0]="content",t[t.annotation=1]="annotation",t[t.signature=2]="signature",t[t.template=3]="template"}(uc||(uc={}));const dc=(t,e)=>!Array.isArray(e)||e.includes(t);class cc extends T{constructor(t,e){super(),this.model=e,this.global=t,this.config=t.config}prepare(){return Jd(this,void 0,void 0,(function*(){return s(this._prepared)&&(this._prepared=new Promise((t=>{t(this.doPrepare())}))),yield this._prepared}))}reprepare(){return Jd(this,void 0,void 0,(function*(){return this._prepared=void 0,yield this.prepare()}))}}var hc=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const pc=pt.getLogger("Renders"),gc=t=>void 0!==t;class fc{constructor(t){this.index=null!=t?t:-1}isClipping(){return gc(this.clipping)}isDisplay(t){return!this.clipping&&!!this.box&&this.box.isIntersect(t)}}const yc=(t,e,i)=>hc(void 0,void 0,void 0,(function*(){const n=new e(i,t);return(yield n.prepare())||pc.warn("You are not prepared!"),n}));class mc extends cc{constructor(t,e){super(t.global,e),this.current=t.current,this.context=t,this._rcs=new Map}doClose(){for(let[t,e]of this._rcs)e.close();this._rcs.clear()}renderOf(t,e){return hc(this,void 0,void 0,(function*(){let i=this._rcs.get(t);return s(i)&&(i=yield yc(t,e,this.context),this._rcs.set(t,i)),i}))}}const vc=(t,e)=>{switch(t){case"Highlight":case"Watermark":case"PreSeal":return!0;case"Stamp":switch(e){case"stamp":case"Stamp":case"chapter":case"affix":case"seal":case"datestamp":case"PDFWidgetSign":return!0}}return!1};class $c extends mc{constructor(t,e,i){super({global:t,current:new fc(i)},e),this._boundary=Ls.EMPTY,this._rotate=0,this.index=i}get pageContext(){return this.current}doPrepare(){return hc(this,void 0,void 0,(function*(){yield this.global.prepare();const t=this.model;pc.info(`Prepare page[${t.ID}] ...`),this.current.resources=new rn([yield this.model.loadAllResource(),this.global.docResource]);let e=pa(t);if(e.hasNothing()){pc.info("Not found valid PhysicalBox, use missing size");const t=this.config.missingPageSize;e=new Ls(0,0,t.width,t.height)}return this._boundary=e,this._rotate=ha(t).Rotate,this.current.box=e,this._items=yield nu.orderItems(this.model,this.global.document),this.config.isRemoteFont()&&this.config.glyphURL&&(yield this.prepareRemoteFonts(this._items)),pc.info(`Prepare page[${t.ID}] finish`),!0}))}prepareRemoteFonts(t){var e,i,n;return hc(this,void 0,void 0,(function*(){const o=new rt,r=this.current.resources,s=t=>{var e;const i=t.Font,n=null==r?void 0:r.font(i);if(i&&n&&!n.isEmbed()){const n=o.safeGet(i,(()=>new rt)).safeGet(null!==(e=t.Weight)&&void 0!==e?e:ma,(()=>({unicode:new Set,glyph:new Set})));Ia(t.TextCode,(t=>{const e=new Rd(t.Value);for(const t of e.toCodes())n.unicode.add(t)})),Ia(t.CGTransform,(t=>{Ia(t.Glyphs,(t=>n.glyph.add(t)))}))}},a={types:["TextObject"],resource:()=>r};for(const i of t){const t=i.item;t instanceof un?yield nu.walk(t.GraphUnits,a,(t=>hc(this,void 0,void 0,(function*(){s(t)})))):yield Ta(null===(e=t.Content)||void 0===e?void 0:e.Layer,(t=>hc(this,void 0,void 0,(function*(){yield nu.walk(t.GraphUnits,a,(t=>hc(this,void 0,void 0,(function*(){s(t)}))))}))))}const l=[];for(const[t,e]of o){const o=null==r?void 0:r.font(t);l.push({id:t,name:null!==(i=null==o?void 0:o.FontName)&&void 0!==i?i:"?",family:null!==(n=null==o?void 0:o.FamilyName)&&void 0!==n?n:"?",weights:Array.from(e.entries()).reduce(((t,e)=>(t[e[0].toString()]={unicode:Array.from(e[1].unicode),glyph:Array.from(e[1].glyph)},t)),{})})}this.current.fonts=Yd.loadRemote(l,this.config.glyphURL)}))}render(t){var e,i,n;return hc(this,void 0,void 0,(function*(){if(!(yield this.prepare()))return pc.warn("You are not prepared!"),!1;const o=this.model,r=t.canvas,s=Date.now();pc.info(`Render page[${o.ID}]`);try{let s=this._boundary;t.region&&(s=s.intersect(t.region));const a=t.offset,l=Array.isArray(a);r.init(s,t.option,null!==(e=t.rotate)&&void 0!==e?e:this._rotate,{offset:a,resize:!l}),r.crop(s);const u=dc(uc.content,t.scope),d=dc(uc.template,t.scope);if(yield Ta(this._items,(e=>hc(this,void 0,void 0,(function*(){var i;if("common"==e.type){if(!u)return;this.current.doing=uc.content}else if("template"==e.type){if(!d)return;this.current.doing=uc.template}const n=e.item;if(n instanceof un){const e=yield this.renderOf(n,Lc);if(!(yield e.render(t)))return pc.warn(`Render Layer[${n.ID}] failed`),!1}else{const e=nu.Order.sort(null===(i=n.Content)||void 0===i?void 0:i.Layer,(t=>nu.Order.of(t.Type)));for(const i of e){const e=yield this.renderOf(i,Lc);if(!(yield e.render(t)))return pc.warn(`Render Layer[${i.ID}] failed`),!1}}})))),this.global.annotations&&dc(uc.annotation,t.scope)){pc.debug("Render annotations..."),this.current.doing=uc.annotation;const e="Print"===t.mode;for(const a of yield this.global.annotations.find(o.ID))if(a.isDisplay()&&!e||e&&a.Print){const e=a.Appearance;if(e&&e.PageBlock){const o=new Ls(null!==(i=e.Boundary)&&void 0!==i?i:[0,0,s.width,s.height]);if(r.begin(o,vc(null!==(n=a.Type)&&void 0!==n?n:"",a.Subtype)?"dark":void 0))try{yield Nc(e.PageBlock,this.context,t,this)}finally{r.end()}}}}const c=t.option;if(this.global.signature&&dc(uc.signature,t.scope)){pc.debug("Render stamps..."),this.current.doing=uc.signature;for(const t of yield this.global.signature.find(o.ID)){const e=t.picture;if(t.boundary&&e){const i=new Ls(t.boundary),n=yield this.global.findImage(e,(()=>Promise.resolve(e.data)),c.dpi);if(n){const t=new ac(n,i.width,i.height,"stamp",c);yield r.drawImage(t,i.left,i.top,"dark")}}}}return!0===c.debug.grid&&r.custom((t=>{const e=c.ratio,i=2*e,n=new Wd("TimesNewRoman","",ma),{x:o,y:a,width:l,height:u}=s,d=r.origin.width,h=r.origin.height;t.resetTransform(),t.fillStyle=t.strokeStyle=new Vc.RGBA(255,0,0,50).toCSS(),t.lineWidth=1,t.font=n.toCSS(i,!1);for(let n=Math.round(o)-o;n<l;n+=5){const r=n*e;t.beginPath(),t.moveTo(r,0),t.lineTo(r,h),t.stroke(),t.fillText(""+(o+n),r+1,i)}for(let n=Math.round(a)-a;n<u;n+=5){const o=n*e;t.beginPath(),t.moveTo(0,o),t.lineTo(d,o),t.stroke(),t.fillText(""+(a+n),1,o+i)}})),!0}catch(t){return pc.error(t),!1}finally{r.finish(),pc.info(`Render page elapsed ${Date.now()-s}ms`)}}))}}const bc=(t,e)=>s(t)?e:t,wc=(t,e)=>{var i,n,o,r,a,l,u,d;if(!t)return;const c=t.FillChoice;if(!c){const i=t.Alpha,c=e.current.resources;let h=0,p=255,g=t.Value;const f=(...t)=>{if(t&&t.length>0)for(let e of t)if(e<h||e>p)return!1;return!0},y=null!==(o=null!==(n=null==c?void 0:c.colorSpace(t.ColorSpace))&&void 0!==n?n:null==c?void 0:c.colorSpace(e.colorSpace))&&void 0!==o?o:null==c?void 0:c.colorSpace(e.global.defaultCS);if(y){const e=null!==(r=y.BitsPerComponent)&&void 0!==r?r:8;if(p=Math.pow(2,_i.has(e)?e:8)-1,(null===(a=y.Palette)||void 0===a?void 0:a.CV)&&y.Palette.CV.isNotEmpty()&&(g=y.Palette.CV.get(null!==(l=t.Index)&&void 0!==l?l:0)),s(g))return;switch(null!==(d=null===(u=y.Type)||void 0===u?void 0:u.toUpperCase())&&void 0!==d?d:"RGB"){case"GRAY":if(g.length<1)return;const t=Bt(g[0]);if(!f(t))return;return new Vc.RGBA(t,t,t,i);case"CMYK":if(g.length<4)return;const e=Bt(g[0]),n=Bt(g[1]),o=Bt(g[2]),r=Bt(g[3]);if(!f(e,n,o,r))return;const s=e/p,a=n/p,l=o/p,u=r/p,d=1-Math.min(1,s*(1-u)+u),c=1-Math.min(1,a*(1-u)+u),h=1-Math.min(1,l*(1-u)+u);return new Vc.RGBA(Math.round(d*p),Math.round(c*p),Math.round(h*p),i);case"RGB":if(g.length<3)return;const y=Bt(g[0]),m=Bt(g[1]),v=Bt(g[2]);if(!f(y,m,v))return;return new Vc.RGBA(y,m,v,i)}}if(s(g))return;const m=Bt(g[0]),v=Bt(g[1]),$=Bt(g[2]);if(!f(m,v,$))return;return new Vc.RGBA(m,v,$,i)}return e.colorSpace=null!==(i=t.ColorSpace)&&void 0!==i?i:e.colorSpace,c.Pattern?new Vc.Pattern(e,c.Pattern):c.AxialShd?new Vc.AxialGradient(e,c.AxialShd):c.RadialShd?new Vc.RadialGradient(e,c.RadialShd):c.GouraudShd?new Vc.GouraudGradient(e,c.GouraudShd):c.LaGouraudShd?new Vc.LaGouraudGradient(e,c.LaGouraudShd):void 0},xc=(t,e,i)=>{let n=t.drawParam(e);for(;n&&!0!==i(n);)n=t.drawParam(n.Relative)},Cc=(t,e,i)=>{if(t&&i.current.resources){let n;return xc(i.current.resources,t,(t=>(n=wc(e?t.FillColor:t.StrokeColor,i),gc(n)))),n}};class Dc extends mc{doPrepare(){return hc(this,void 0,void 0,(function*(){return yield this.preprocess()}))}isHidden(t){return!1===t.Visible||0===t.Alpha}render(t){var e;return hc(this,void 0,void 0,(function*(){const i=this.model,n=null!==(e=i.ID)&&void 0!==e?e:"~",o=t.canvas,r=i.type();if("Print"!=t.mode&&this.isHidden(i))return pc.info(`${r}[${n}] is not visible`),!0;pc.debug(`Render ${r}[${n}]...`);let s=new Ls(i.Boundary);s.hasNothing()&&this.current.clipping&&(s=this.current.clipping.Boundary.moveTo(0,0));let a=!1;if(o.begin(s))try{o.alpha(i.Alpha);const e=yield this.tryClip(i,t);"NoClip"==e?(o.transform(i.CTM),a=yield this.renderComponent(t)):a="Okay"==e}finally{o.end(),!0===t.option.debug.id&&o.custom((e=>{const i=s.x,o=s.y,r=t.option.ratio,a=new Wd("TimesNewRoman","",ma);e.globalCompositeOperation="source-over",e.fillStyle=new Vc.RGBA(128,0,255,100).toCSS(),e.font=a.toCSS(4*r,!1),e.fillText(n+"",i*r,(o+4)*r)})),!0===t.option.debug.boundary&&o.custom((e=>{const i=t.option.ratio;e.globalCompositeOperation="source-over",e.strokeStyle=new Vc.RGBA(0,0,255,125).toCSS(),e.lineWidth=1,e.strokeRect(s.x*i,s.y*i,s.width*i,s.height*i)}))}return pc.debug(`Render ${r}[${n}] end`),a}))}drawClip(t,e,i){return hc(this,void 0,void 0,(function*(){if(0==i.length)return 0;const n=t.canvas;let o=0;for(const r of i)if(null==r?void 0:r.AreaChoice){const i=r.AreaChoice;if(i){const s=new bs(r.CTM);if(n.transform(s),e.DrawParam=r.DrawParam,i.Path){const e=yield this.renderOf(i.Path,jc);(yield e.render(t))?o++:pc.debug("Area Path render failed")}else if(i.Text){const e=yield this.renderOf(i.Text,Ic);(yield e.render(t))?o++:pc.debug("Area Text render failed")}n.transform(s.inverse())}}return o}))}tryClip(t,e){var i,n,o,r,a;return hc(this,void 0,void 0,(function*(){const l=null===(i=t.Clips)||void 0===i?void 0:i.Clip;if(s(l)||l.isEmpty())return"NoClip";const u=new Array;for(let t of l)if(null==t?void 0:t.Area){const e=new Array;for(let i of t.Area){const t=null==i?void 0:i.AreaChoice;i&&t&&(new Ls(null!==(o=null===(n=t.Path)||void 0===n?void 0:n.Boundary)&&void 0!==o?o:null===(r=t.Text)||void 0===r?void 0:r.Boundary).hasNothing()||e.push(i))}e.length>0&&u.push(e)}if(0==u.length)return"NoClip";const d=new bs(t.CTM),c=new Ls(t.Boundary),h=new Ls(0,0,c.width,c.height),p={Boundary:c};this.current.clipping=p;const g=new lc,f=!1!==(null===(a=t.Clips)||void 0===a?void 0:a.TransFlag);g.init(h,e.option),f&&g.transform(d);let y=!1;if(1==u.length)y=(yield this.drawClip({canvas:g,option:e.option},p,u[0]))>0;else{let t=!0;for(const i of u){const n=new lc;n.init(h,e.option),f&&n.transform(d),y=(yield this.drawClip({canvas:n,option:e.option},p,i))>0||y,f&&g.transform(d.inverse()),t?(g.drawCanvas(n),t=!1):g.drawCanvas(n,"clip"),f&&g.transform(d)}}if(this.current.clipping=void 0,y){const t=new lc;if(t.init(h,e.option),t.begin(h)&&(t.transform(d),yield this.renderComponent({canvas:t,option:e.option})))return f&&g.transform(d.inverse()),g.drawCanvas(t,"clip"),e.canvas.drawCanvas(g),"Okay"}return"Failed"}))}}class Oc extends Dc{color(t,e){var i,n,o;return this.current.isClipping()?Vc.RGBA.BLACK:null!==(n=null!==(i=wc(e?t.FillColor:t.StrokeColor,this.context))&&void 0!==i?i:Cc(t.DrawParam,e,this.context))&&void 0!==n?n:Cc(null===(o=t.parentUntil(un))||void 0===o?void 0:o.DrawParam,e,this.context)}findStyle(t,e){const i=this.current.resources;if(t&&e&&i){let n;return xc(i,t,(t=>(n=t[e],gc(n)))),n}}findValue(t,e){for(const i of e){const e=this.findStyle(i,t);if(gc(e))return e}}style(t){var e,i,n,o,r,s,a,l,u,d,c,h,p;const g=[t.DrawParam,null===(e=this.current.clipping)||void 0===e?void 0:e.DrawParam,null===(i=t.parentUntil(un))||void 0===i?void 0:i.DrawParam];return new sc(null!==(o=null!==(n=t.LineWidth)&&void 0!==n?n:this.findValue("LineWidth",g))&&void 0!==o?o:.353,null!==(s=null!==(r=t.MiterLimit)&&void 0!==r?r:this.findValue("MiterLimit",g))&&void 0!==s?s:4.234,null!==(l=null!==(a=t.DashOffset)&&void 0!==a?a:this.findValue("DashOffset",g))&&void 0!==l?l:0,null!==(d=Tc.get(null!==(u=t.Cap)&&void 0!==u?u:this.findValue("Cap",g)))&&void 0!==d?d:"butt",null!==(h=Rc.get(null!==(c=t.Join)&&void 0!==c?c:this.findValue("Join",g)))&&void 0!==h?h:"miter",null!==(p=t.DashPattern)&&void 0!==p?p:this.findValue("DashPattern",g))}preprocess(){var t,e;return hc(this,void 0,void 0,(function*(){const i=this.model,n=this.defColor();if(bc(i.Fill,n.fill.is)){const e=null!==(t=this.color(i,!0))&&void 0!==t?t:n.fill.color;e&&(yield e.prepare())&&(this.fill=e)}if(bc(i.Stroke,n.stroke.is)){const t=null!==(e=this.color(i,!1))&&void 0!==e?e:n.stroke.color;t&&(yield t.prepare())&&(this.stroke=t,this.line=this.style(i))}return!0}))}renderComponent(t){return hc(this,void 0,void 0,(function*(){const e=t.canvas;let i=!1,n=!1;return this.fill&&this.fill.isView()&&(e.fill(this.fill,this.model.CTM),i=!0),this.stroke&&this.stroke.isView()&&this.line&&e.lineStyle(this.line)&&(e.stroke(this.stroke,this.model.CTM),n=!0),i||n?yield this.renderBody(t,i,n):(pc.debug(`${this.model.type()} not fill and not stroke`),!0)}))}}class Pc{constructor(){this.x=0,this.y=0}isBlank(){return s(this.glyph)?!!s(this.unicode)||(0==this.unicode.length||/\s+/.test(this.unicode)):0==this.glyph}}class Sc{flat(){var t,e;if(this._ts)return this._ts;const i=new Array,n=new Rd(null===(t=this.code)||void 0===t?void 0:t.Value).toChars();if(this.form&&this.form.size>0)for(let t=0;t<n.length;){const o=this.form.get(t);if(o&&o.Glyphs){const r=o.Glyphs,s=null!==(e=o.GlyphCount)&&void 0!==e?e:1;for(let e=0;e<s;e++){const o=new Pc;o.glyph=r[e],o.unicode=n[t+e],i.push(o)}t+=s}else{const e=new Pc;e.unicode=n[t],i.push(e),t++}}else for(let t of n){const e=new Pc;e.unicode=t,i.push(e)}return this._ts=i}}class Ic extends Oc{constructor(){super(...arguments),this._groups=[]}defColor(){return{fill:{is:!0,color:Vc.RGBA.BLACK},stroke:{is:!1}}}unwind(t){const e=new Array;if(t&&t.length>0)for(let i=0;i<t.length;){const n=t[i];if("g"==n){const n=Ft(t[i+1]),o=Ft(t[i+2]);if("number"!=typeof n||"number"!=typeof o)return pc.error("Repeat value is invalid",t),[];for(let t=0;t<n;t++)e.push(o);i+=3}else{const t=Number.parseFloat(n);Number.isNaN(t)||e.push(t),i++}}return e}groupToContent(t){let e={unicode:new Array,glyph:new Array};return Ia(t,(t=>{var i,n;e.unicode.push(...new Rd(null===(i=t.code)||void 0===i?void 0:i.Value).toCodes()),Ia(null===(n=t.form)||void 0===n?void 0:n.values(),(t=>{var i;e.glyph.push(...null!==(i=t.Glyphs)&&void 0!==i?i:[])}))})),e}font(t,e,i){var n,o,r,a;return hc(this,void 0,void 0,(function*(){const l=t.Font,u=this.global.fonts;if(s(l))return pc.warn("Not found attribute[Font], use defalut"),u.defalut(Bd(i));const d=null===(n=this.current.resources)||void 0===n?void 0:n.font(l),c=Bd(null!=i?i:(null==d?void 0:d.isBold())?600:ma),h=u.find(l,c);if(h)return h.isEmbed()||h.isLocal()||(yield h.replenish(this.groupToContent(e))),h;if(d){if(d.isEmbed()){if(d.object)return d.object;if(yield u.prepare({id:l,name:null!==(o=d.FontName)&&void 0!==o?o:zd,data:d.loadFile()})){const t=u.find(l);if(t)return d.object=t,t}}else{if(d.object){const t=d.object.get(c);if(t)return t}const t=new Map,i=this.config.isRemoteFont();if(i&&t.set(c,this.groupToContent(e)),yield u.prepare({id:l,name:null!==(r=d.FontName)&&void 0!==r?r:zd,family:null!==(a=d.FamilyName)&&void 0!==a?a:Ud,weights:t,fixedWidth:d.FixedWidth},i?this.config.glyphURL:void 0)){const t=u.find(l,c);if(t){let e=d.object;return e||(e=new Map,d.object=e),e.set(c,t),t}}}pc.warn(`Not prepared Font[${l}], use defalut`)}else pc.warn(`Not found Font[${l}], use defalut`);return u.defalut(c)}))}directionToMatrix(t){switch(t%=360){case 0:return new bs(1,0,0,1,0,0);case 90:return new bs(0,1,-1,0,0,0);case 180:return new bs(-1,0,0,-1,0,0);case 270:return new bs(0,-1,1,0,0,0)}return bs.DEFAULT}preprocess(){const t=Object.create(null,{preprocess:{get:()=>super.preprocess}});var e,i,n,o,r,a,l,u,d,c,h,p,g,f;return hc(this,void 0,void 0,(function*(){if(yield t.preprocess.call(this)){if(!this.fill&&!this.stroke)return!0;const t=this.model;if((null!==(e=t.Size)&&void 0!==e?e:0)<=0)return pc.warn(" Font size <= 0 ?"),!0;const y=new Array,m=new Array;Ia(t.TextCode,(t=>y.push(t))),Ia(t.CGTransform,(t=>m.push(t)));const v=new Array,$=new Map;if(m.length>0){const t=(t,e)=>t.sequence()-e.sequence();let e=[...m,...y].sort(t);if(e[e.length-1]instanceof Oi){const o=m.sort(t).sort(((t,e)=>{var i,n;return(null!==(i=t.CodePosition)&&void 0!==i?i:0)-(null!==(n=e.CodePosition)&&void 0!==n?n:0)})),r=new Array;let s=0,a=0;for(let e of y.sort(t)){const t=new Rd(e.Value).length;if(0!=t){for(;s<o.length;s++){const e=o[s],l=null!==(i=e.CodePosition)&&void 0!==i?i:0;if(!((null!==(n=e.CodeCount)&&void 0!==n?n:1)<1)){if(l>=a+t)break;r.push(e),$.set(e,l-a)}}a+=t,r.push(e)}}e=r}let u=new Sc;for(let t of e)if(t instanceof Oi){const e=null!==(o=t.CodePosition)&&void 0!==o?o:0;e>=0&&(null!==(r=t.CodeCount)&&void 0!==r?r:0)>0&&(null!==(a=t.GlyphCount)&&void 0!==a?a:0)>0&&(s(u.form)&&(u.form=new Map),u.form.set(null!==(l=$.get(t))&&void 0!==l?l:e,t))}else u.code=t,v.push(u),u=new Sc}else{let t=!0;for(let e of y){const i=new Sc;i.code=e,v.push(i),t&&0!=(null!==(u=e.Value)&&void 0!==u?u:"").trim().length&&(t=!1)}if(t)return!0}let b=0,w=0;for(const t of v){const e=t.code;if(!e)continue;b=null!==(d=e.X)&&void 0!==d?d:b,w=null!==(c=e.Y)&&void 0!==c?c:w;const i=t.flat();if(0==i.length)continue;const n=this.unwind(e.DeltaX),o=this.unwind(e.DeltaY);t.dx=n,t.dy=o;let r=b,s=w;for(let t=0;t<i.length;t++){const e=i[t];e.x=r,e.y=s,r+=null!==(p=null!==(h=n[t])&&void 0!==h?h:vn(n))&&void 0!==p?p:0,s+=null!==(f=null!==(g=o[t])&&void 0!==g?g:vn(o))&&void 0!==f?f:0}}this._groups=v,this.current.fonts&&(this.global.fonts.merge(yield this.current.fonts),this.current.fonts=void 0);try{this._font=yield this.font(t,v,t.Weight)}catch(t){pc.warn(t)}return this._def=this.global.fonts.defalut(Bd(t.Weight)),!0}return!1}))}renderBody(t,e,i){var n,o,r,a,l,u,d,c,h;return hc(this,void 0,void 0,(function*(){const p=this.model,g=t.canvas,f=null!==(n=p.Size)&&void 0!==n?n:0,y=this._groups;if(0==y.length)return pc.debug(" Skip draw nothing..."),!0;const m=this._def;if(!m)return pc.debug(" Font invalid?"),!0;const v=null!==(o=this._font)&&void 0!==o?o:m,$=null===(r=this.current.resources)||void 0===r?void 0:r.font(p.Font);pc.debug(` Use ${v.type()} font[${p.Font}, ${v.name}]`);const b=new Ls(p.Boundary),w=(new bs).translate(b.x,b.y).multiply(new bs(p.CTM)),x=v.isLocal(),C={fill:e,stroke:i,size:f,font:v,weight:Bd(null!==(a=p.Weight)&&void 0!==a?a:(null==$?void 0:$.isBold())?600:ma),italic:null!==(l=p.Italic)&&void 0!==l?l:null==$?void 0:$.isItalic(),charDirection:p.CharDirection,hScale:p.HScale};for(const t of y){const e=t.flat();if(0!=e.length)for(let t=0;t<e.length;t++){const i=e[t],n=i.x,o=i.y;if(x||s(i.glyph)){if(i.unicode&&!i.isBlank()){const t=i.unicode;let e=v.glyph(t);s(e)&&(pc.info(` Get char ${t} glyph failed`),e=m.glyph(t)),e?g.drawText(e,n,o,C):pc.warn(" Not find any glyph ???")}}else{const t=i.glyph;let e=v.glyph(t);s(e)&&(pc.info(` Get glyph ${t} failed, use default`),e=m.glyph(t)),e?g.drawText(e,n,o,C):pc.warn(" Not find any glyph ???")}if(this.current.listen&&i.unicode&&(this.current.doing==uc.content||this.current.doing==uc.template)){let e;if(v.isEmbed()?e=v.bbox(null!==(d=null!==(u=i.glyph)&&void 0!==u?u:i.unicode)&&void 0!==d?d:0,f).move(n,o):v.isLocal()&&(e=v.bbox(i.unicode,f).move(n,o)),e&&!e.hasNothing()){const n=w.multiply((new bs).scale(null!==(c=p.HScale)&&void 0!==c?c:1,1).multiply(this.directionToMatrix(null!==(h=p.CharDirection)&&void 0!==h?h:0)));e=e.asPath().transform(n).bound(),this.current.listen(new ec(i.unicode,e,p.ID+"_"+t,!e.isIntersect(b)))}}}else pc.warn(" Has no char or glyph for drawing")}return!0}))}}const Tc=new Map([["Butt","butt"],["Round","round"],["Square","square"]]),Rc=new Map([["Miter","miter"],["Round","round"],["Bevel","bevel"]]);class jc extends Oc{defColor(){return{stroke:{is:!0,color:Vc.RGBA.BLACK},fill:{is:!1}}}preprocess(){const t=Object.create(null,{preprocess:{get:()=>super.preprocess}});return hc(this,void 0,void 0,(function*(){if(yield t.preprocess.call(this)){const t=this.model,e=t.AbbreviatedData;return e&&(this._path=_s.parse("Even-Odd"==t.Rule?"evenodd":"nonzero",e)),!0}return!1}))}renderBody(t,e,i){var n,o,r;return hc(this,void 0,void 0,(function*(){const s=t.canvas,a=this.model,l=null===(o=null===(n=a.Actions)||void 0===n?void 0:n.Action)||void 0===o?void 0:o.toArray().map((t=>{var e,i;const n=null===(e=t.Choice)||void 0===e?void 0:e.URI;return null!==(i=null==n?void 0:n.URI)&&void 0!==i?i:""})).filter((t=>!!t)).pop();if(this._path&&(this.line&&s.lineStyle(this.line),s.drawShape(this._path,e,i)),l){const e=a.parentUntil(Hr),i=new Ls(null===(r=null==e?void 0:e.Boundary)||void 0===r?void 0:r.map((e=>e*t.option.ratio))),n=s.drawLink(l,i);n&&n.classList.add(`annot-link-${a.ID}`)}return!0}))}}class Ac extends Dc{preprocess(){return hc(this,void 0,void 0,(function*(){return!0}))}renderComponent(t){return this.renderMedia(this.model,t)}renderMedia(t,e){var i,n,o,r,s,a;return hc(this,void 0,void 0,(function*(){const l=new Ls(t.Boundary),u=t.ResourceID,d=e.canvas,c=null===(i=this.current.resources)||void 0===i?void 0:i.media(u);if(c)if("Image"==c.Type)try{let i=yield this.global.findImage(c,(()=>hc(this,void 0,void 0,(function*(){return yield c.loadFile()}))),e.option.dpi);if(i){if("ImageObject"==t.type()){const o=null===(n=this.current.resources)||void 0===n?void 0:n.media(t.ImageMask);if(o){const t=yield this.global.findImage(o,(()=>hc(this,void 0,void 0,(function*(){return yield o.loadFile()}))),e.option.dpi);t&&(i=((t,e)=>{const i=t.width,n=t.height;let o,r;return o=t instanceof HTMLImageElement?Ra(i,n,(e=>{var i;const n=null!==(i=e.getContext("2d"))&&void 0!==i?i:ja;n.imageSmoothingEnabled=!0,n.drawImage(t,0,0)})):t,r=e.width==i&&e.height==n&&e instanceof HTMLCanvasElement?e:Ra(i,n,(t=>{var o;const r=null!==(o=t.getContext("2d"))&&void 0!==o?o:ja;r.imageSmoothingEnabled=!0,r.drawImage(e,0,0,e.width,e.height,0,0,i,n)})),Ra(i,n,(t=>{var e,s,a;const l=null!==(e=t.getContext("2d"))&&void 0!==e?e:ja;l.imageSmoothingEnabled=!0;const u=l.createImageData(i,n),d=(null!==(s=o.getContext("2d"))&&void 0!==s?s:ja).getImageData(0,0,i,n),c=(null!==(a=r.getContext("2d"))&&void 0!==a?a:ja).getImageData(0,0,i,n),h=u.data,p=d.data,g=c.data;for(let t=0;t<p.length;t++)h[t]=p[t],(t+1)%4==0&&g[t-3]+g[t-2]+g[t-1]>382&&(h[t]=0);l.putImageData(u,0,0)}))})(i,t))}}yield d.drawImage(new ac(i,1,1,c.Format,e.option),0,0)}else pc.debug(`MultiMedia[${u}] MediaFile is empty`)}catch(i){if(pc.warn("Render media failed",i),!0===e.option.debug.placeholder){const e=new bs(t.CTM);d.transform(e.inverse()),d.lineStyle(new sc(1,0,0,"butt","miter")),d.stroke(new Vc.RGBA(255,0,0));const i=new Gs;i.moveTo(0,0),i.lineTo(l.width,l.height),i.moveTo(l.width,0),i.lineTo(0,l.height),d.drawShape(i,!1,!0),d.transform(e)}}else"Video"==c.Type?pc.warn("Not support video"):pc.debug(`Not support media type ${c.Type}?`);else pc.debug(`Not found resource MultiMedia[${u}]`);if(t.Border){const e=t.Border,i=null!==(o=e.LineWidth)&&void 0!==o?o:.353;if(i>0){const t=new Ns([0,0,l.width,l.height],null!==(r=e.HorizonalCornerRadius)&&void 0!==r?r:0,null!==(s=e.VerticalCornerRadius)&&void 0!==s?s:0);d.lineStyle(new sc(i,0,null!==(a=e.DashOffset)&&void 0!==a?a:0,"butt","miter",e.DashPattern)),d.stroke(wc(e.BorderColor,this.context)||Vc.RGBA.BLACK),d.drawShape(t,!1,!0)}}return!0}))}}class Fc extends Ac{}class Mc extends Ac{}class Bc extends Dc{preprocess(){return hc(this,void 0,void 0,(function*(){return!0}))}renderComponent(t){var e,i,n,o;return hc(this,void 0,void 0,(function*(){const r=this.model.ResourceID;let a=this.current.composites;if(s(a)&&(this.current.composites=a=new tu),a.has(r))return pc.warn(`Circular reference CompositeGraphicUnit[${r}]`),!0;const l=null===(e=this.current.resources)||void 0===e?void 0:e.composite(r),u=null===(i=null==l?void 0:l.Content)||void 0===i?void 0:i.GraphUnits;if(l&&u&&u.isNotEmpty()&&(null!==(n=l.Width)&&void 0!==n?n:0)>0&&(null!==(o=l.Height)&&void 0!==o?o:0)>0){a.push(r);try{yield Nc(u,this.context,t,this)}finally{a.pop()}}return!0}))}}class kc extends mc{doPrepare(){return hc(this,void 0,void 0,(function*(){return!0}))}render(t){return hc(this,void 0,void 0,(function*(){const e=this.model;return(yield Nc(e.GraphUnits,this.context,t,this))||pc.info(`Render PageBlock[${e.ID}] failed`),!0}))}}class Lc extends mc{doPrepare(){return hc(this,void 0,void 0,(function*(){return!0}))}render(t){return hc(this,void 0,void 0,(function*(){const e=this.model;return(yield Nc(e.GraphUnits,this.context,t,this))||pc.info(`Render Layer[${e.ID}] failed`),!0}))}}const Nc=(t,e,i,n)=>hc(void 0,void 0,void 0,(function*(){if(s(t)||t.isEmpty())return!0;const o=n?n.renderOf.bind(n):yc;for(const n of t)if(n)try{let t,r;n.TextObject?(r=n.TextObject.ID,t=yield o(n.TextObject,Ic,e)):n.PathObject?(r=n.PathObject.ID,t=yield o(n.PathObject,jc,e)):n.ImageObject?(r=n.ImageObject.ID,t=yield o(n.ImageObject,Fc,e)):n.VideoObject?(r=n.VideoObject.ID,t=yield o(n.VideoObject,Mc,e)):n.CompositeObject?(r=n.CompositeObject.ID,t=yield o(n.CompositeObject,Bc,e)):n.PageBlock&&(r=n.PageBlock.ID,t=yield o(n.PageBlock,kc,e)),t&&((yield t.render(i))||pc.debug(`Render GraphUnit[${r}] failed`))}catch(t){pc.warn(t)}return!0})),Ec=(t,e,i)=>hc(void 0,void 0,void 0,(function*(){var n,o,r;const s=yield(a=t,sa(void 0,void 0,void 0,(function*(){return ca(a,0)})));var a;if(s)try{const t=yield null===(r=null===(o=null===(n=s.Pages)||void 0===n?void 0:n.Page)||void 0===o?void 0:o.first())||void 0===r?void 0:r.relatePage().get();if(t){const n=new $c(new oc(s),t,0);try{return yield n.render({canvas:new lc(e),option:new ic(i)})}finally{n.close()}}}finally{ua(s)}return!1}));var _c,Vc;_c=(t,e)=>hc(void 0,void 0,void 0,(function*(){const i=Ra(1,1);return(yield Ec(t,i,e))?i:null})),Cd["ofd"]=_c,function(t){class e extends uu{constructor(t,e,i,n=255){super(t,e,i,n)}prepare(){return hc(this,void 0,void 0,(function*(){return!0}))}isView(){return this.A>0}transfer(t,e,i,n,o){e?t.fillStyle=this.toCSS():t.strokeStyle=this.toCSS()}}e.BLACK=new e(0,0,0),e.WHITE=new e(255,255,255),e.TRANSPARENT=new e(0,0,0,0),t.RGBA=e;class i{constructor(t,e){this.model=e,this.context=t}}t.ComplexColor=i;t.Pattern=class extends i{constructor(){super(...arguments),this.dpi=100}prepare(){var t,e,i;return hc(this,void 0,void 0,(function*(){const n=null!==(t=this.model.Width)&&void 0!==t?t:0,o=null!==(e=this.model.Height)&&void 0!==e?e:0,r=null===(i=this.model.CellContent)||void 0===i?void 0:i.GraphUnits;if(n<=0||o<=0||s(r)||r.isEmpty())return pc.warn("Required arguments invalid"),!1;const a=new lc,l=new ic(this.dpi),u=new Ls(0,0,n,o);return a.init(u,l),yield Nc(r,this.context,{canvas:a,option:l}),this.unit=a.origin,!0}))}isView(){return!s(this.unit)}drawUnit(t,e,i,n,o,r,s=!1,a=!1){if(i+o<0&&n+r<0)return;t.save(),t.translate(Math.round(i),Math.round(n));const l=Math.round(o),u=Math.round(r);let d=1,c=1;s&&(t.translate(l,0),d*=-1),a&&(t.translate(0,u),c*=-1),t.scale(d,c),t.drawImage(e,0,0,e.width,e.height,0,0,l,u),t.restore()}fillUnit(t,e,i,n,o,r,s,a,l,u=0,d=0){const c=n+r,h=o+s;switch(e){case"Normal":for(let e=0;e<a;e++)for(let r=0;r<l;r++)this.drawUnit(t,i,u+r*c,d+e*h,n,o);break;case"Column":for(let e=0;e<a;e++)for(let r=0;r<l;r++)this.drawUnit(t,i,u+r*c,d+e*h,n,o,r%2!=0);break;case"Row":for(let e=0;e<a;e++)for(let r=0;r<l;r++)this.drawUnit(t,i,u+r*c,d+e*h,n,o,!1,e%2!=0);break;case"RowAndColumn":for(let e=0;e<a;e++)for(let r=0;r<l;r++)this.drawUnit(t,i,u+r*c,d+e*h,n,o,r%2!=0,e%2!=0)}}fillGroup(t,e,i,n,o,r){var s;const a=Math.round(2*(i+o)),l=Math.round(2*(n+r)),u=Ra(a,l),d=null!==(s=u.getContext("2d"))&&void 0!==s?s:ja;return this.fillUnit(d,e,t,i,n,o,r,2,2),u}transfer(t,e,i,n){var o,a,l,u,d,c,h,p;if(s(this.unit)||s(n))return;const g=this.unit,f=i.ratio,y=new bs(this.model.CTM),m=null!==(o=this.model.ReflectMethod)&&void 0!==o?o:"Normal",v=null!==(a=this.model.RelativeTo)&&void 0!==a?a:"Object",$=null!==(l=this.model.Width)&&void 0!==l?l:0,b=null!==(u=this.model.Height)&&void 0!==u?u:0,w=$*f,x=b*f,C=Math.max((null!==(d=this.model.XStep)&&void 0!==d?d:0)-$,0)*f,D=Math.max((null!==(c=this.model.YStep)&&void 0!==c?c:0)-b,0)*f;let O;if(y.isDefault()&&"Object"==v)0==C&&0==D&&"Normal"==m?(O=Ra(Math.round(w),Math.round(x)),this.drawUnit(null!==(h=O.getContext("2d"))&&void 0!==h?h:ja,g,0,0,O.width,O.height)):O=this.fillGroup(g,m,w,x,C,D);else{const t=Math.round(n.width),e=Math.round(n.height);O=Ra(t,e);const i=null!==(p=O.getContext("2d"))&&void 0!==p?p:ja;let o=0,s=0;if(r(CanvasPattern.prototype.setTransform)){const r=this.fillGroup(g,m,w,x,C,D),a=i.createPattern(r,"repeat");a?("Page"==v&&([o,s]=[-n.x,-n.y]),a.setTransform(new bs(y.a,y.b,y.c,y.d,y.e*f+o,y.f*f+s)),i.fillStyle=a,i.fillRect(0,0,t,e)):pc.warn("Canvas createPattern failed?")}else{pc.warn("Ignore Pattern CTM because browser not support CanvasPattern.setTransform");let r=0,a=0;"Page"==v?(r=Math.ceil(n.bottom/(x+D)),a=Math.ceil(n.right/(w+C)),[o,s]=[-n.x,-n.y]):(r=Math.ceil(e/(x+D)),a=Math.ceil(t/(w+C))),this.fillUnit(i,m,g,w,x,C,D,r,a,o,s)}}if(O){const i=t.createPattern(O,"repeat");i?e?t.fillStyle=i:t.strokeStyle=i:pc.warn("Canvas createPattern failed?")}else pc.warn("Not found unit?")}};class n extends i{constructor(t,e){super(t,e),this.shade=this.newShade()}prepare(){return hc(this,void 0,void 0,(function*(){return(yield this.shade.prepare())&&(yield this.doPrapare())}))}transfer(t,e,i,n,o){var r,a;if(s(n)||n.hasNothing())return void pc.warn("Required valid bound");const l=Math.ceil(n.width),u=Math.ceil(n.height),d=this.calculate(l,u,i.ratio);if(d){const i=Ra(l,u),s=null!==(r=i.getContext("2d"))&&void 0!==r?r:ja,c=s.createImageData(l,u);c.data.set(d),s.putImageData(c,0,0);let h=i;if(o&&!o.isOnlyTranslate()){const t=o.inverse(),e=n.asPath().transform(t).bound(),r=Ra(Math.ceil(e.width),Math.ceil(e.height)),s=null!==(a=r.getContext("2d"))&&void 0!==a?a:ja;s.transform(t.a,t.b,t.c,t.d,0,0),s.drawImage(i,0,0),h=r}const p=t.createPattern(h,"no-repeat");p?e?t.fillStyle=p:t.strokeStyle=p:pc.warn("Canvas createPattern failed?")}else pc.warn("Calculate return null?");this.shade.close()}}class o extends n{doPrapare(){var t,i;return hc(this,void 0,void 0,(function*(){const n=this.model.Segment,o=null!==(t=null==n?void 0:n.size())&&void 0!==t?t:0;if(!n||o<2)return pc.warn("Shd segment count must >= 2"),!1;this.seg=new Array(o);for(let t=0;t<o;t++){const r=n.get(t);let s=e.TRANSPARENT;if(null==r?void 0:r.Color){const t=wc(r.Color,this.context);if(!(t instanceof e))return pc.warn("Shd segment must be color"),!1;s=t}this.seg[t]={position:null!==(i=null==r?void 0:r.Position)&&void 0!==i?i:t/(o-1),color:s}}return!0}))}isView(){return s(this.model.StartPoint)||s(this.model.EndPoint)?(pc.warn("Required arguments invalid"),!1):!!this.seg&&this.seg.length>0}}t.AxialGradient=class extends o{newShade(){return new ru.Axial}calculate(t,e,i){var n,o,r,s,a,l,u,d,c,h;const p=null!==(n=this.model.StartPoint)&&void 0!==n?n:[],g=null!==(o=this.model.EndPoint)&&void 0!==o?o:[];return this.shade.calculate(t,e,null!==(r=this.model.MapType)&&void 0!==r?r:"Direct",(null!==(s=this.model.MapUnit)&&void 0!==s?s:0)*i,null!==(a=this.model.Extend)&&void 0!==a?a:0,{x:(null!==(l=p[0])&&void 0!==l?l:0)*i,y:(null!==(u=p[1])&&void 0!==u?u:0)*i},{x:(null!==(d=g[0])&&void 0!==d?d:0)*i,y:(null!==(c=g[1])&&void 0!==c?c:0)*i},null!==(h=this.seg)&&void 0!==h?h:[])}};t.RadialGradient=class extends o{newShade(){return new ru.Radial}calculate(t,e,i){var n,o,r,s,a,l,u,d,c,h,p,g,f,y;const m=null!==(n=this.model.StartPoint)&&void 0!==n?n:[],v=null!==(o=this.model.EndPoint)&&void 0!==o?o:[];return this.shade.calculate(t,e,null!==(r=this.model.MapType)&&void 0!==r?r:"Direct",(null!==(s=this.model.MapUnit)&&void 0!==s?s:0)*i,null!==(a=this.model.Extend)&&void 0!==a?a:0,null!==(l=this.model.Eccentricity)&&void 0!==l?l:0,null!==(u=this.model.Angle)&&void 0!==u?u:0,(null!==(d=this.model.StartRadius)&&void 0!==d?d:0)*i,(null!==(c=this.model.EndRadius)&&void 0!==c?c:0)*i,{x:(null!==(h=m[0])&&void 0!==h?h:0)*i,y:(null!==(p=m[1])&&void 0!==p?p:0)*i},{x:(null!==(g=v[0])&&void 0!==g?g:0)*i,y:(null!==(f=v[1])&&void 0!==f?f:0)*i},null!==(y=this.seg)&&void 0!==y?y:[])}};class a extends n{doPrapare(){var t,i,n,o;return hc(this,void 0,void 0,(function*(){const r=this.model.Point,s=null!==(t=null==r?void 0:r.size())&&void 0!==t?t:0;if(!r||s<3)return pc.warn("Shd point count must >= 3"),!1;this.point=new Array(s);for(let t=0;t<s;t++){const s=r.get(t);let a=e.TRANSPARENT;if(null==s?void 0:s.Color){const t=wc(s.Color,this.context);if(!(t instanceof e))return pc.warn("Shd segment must be color"),!1;a=t}this.point[t]={x:null!==(i=null==s?void 0:s.X)&&void 0!==i?i:0,y:null!==(n=null==s?void 0:s.Y)&&void 0!==n?n:0,edge:null!==(o=null==s?void 0:s.EdgeFlag)&&void 0!==o?o:0,color:a}}const a=wc(this.model.BackColor,this.context);return a instanceof e&&(this.bg=a),!0}))}isView(){return!!this.point&&this.point.length>0}}t.GouraudGradient=class extends a{newShade(){return new ru.Gouraud}calculate(t,e,i){var n,o;return this.shade.calculate(t,e,null!==(n=this.model.Extend)&&void 0!==n?n:0,(null!==(o=this.point)&&void 0!==o?o:[]).map((t=>(t.x*=i,t.y*=i,t))),this.bg)}};t.LaGouraudGradient=class extends a{newShade(){return new ru.LaGouraud}calculate(t,e,i){var n,o,r;return this.shade.calculate(t,e,null!==(n=this.model.VerticesPerRow)&&void 0!==n?n:1,null!==(o=this.model.Extend)&&void 0!==o?o:0,(null!==(r=this.point)&&void 0!==r?r:[]).map((t=>(t.x*=i,t.y*=i,t))),this.bg)}}}(Vc||(Vc={}));var qc=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class Gc extends T{constructor(t,e){super(),this.document=t,this._cache=new Jl.LRUMap($a.RENDER_CACHE),this._cache.shift=function(){const t=Jl.LRUMap.prototype.shift.call(this);return t&&I.free(t[1]),t},this._context=new oc(t,e)}doClose(){this.document.close();for(let[t,e]of this._cache)e.close();this._cache.clear()}pageCount(){return this.document.pageCount()}context(){return this._context}pageAt(t){return this.document.pageAt(t)}renderOf(t,e){var i;return qc(this,void 0,void 0,(function*(){let n=this._cache.get(t);if(!n){const o=null!=e?e:yield null===(i=this.pageAt(t))||void 0===i?void 0:i.relatePage().get();if(o){const e=new $c(this._context,o,t);yield e.prepare(),this._cache.set(t,e),n=e}}return n}))}renderPage(t,e){var i,n;return qc(this,void 0,void 0,(function*(){const o=this.pageCount();if(o<=0)return;const r=yield this.renderOf(Math.min(Math.max(0,t),o-1));if(r){const t=new ic(null!==(i=null==e?void 0:e.dpi)&&void 0!==i?i:0,null==e?void 0:e.unitRatio);Object.assign(t.debug,null==e?void 0:e.debug);const o=null==e?void 0:e.charInfo;Array.isArray(o)&&(r.pageContext.listen=t=>o.push(t));const s=new lc(null==e?void 0:e.canvas),a={canvas:s,option:t,region:null==e?void 0:e.region,rotate:null==e?void 0:e.rotate,mode:null==e?void 0:e.mode,scope:null==e?void 0:e.scope},l=yield r.render(a);if(Array.isArray(o)&&delete r.pageContext.listen,l)return o&&!0===(null===(n=null==e?void 0:e.debug)||void 0===n?void 0:n.charBound)&&s.custom((e=>{const i=t.ratio;e.strokeStyle="red",e.lineWidth=1;for(let t of o){let n=t.bound;e.strokeRect(n.x*i,n.y*i,n.width*i,n.height*i)}})),a}}))}mergeRender(t,e){var i,n,o,r,s,a,l;return qc(this,void 0,void 0,(function*(){const u=null!==(i=null==e?void 0:e.paper)&&void 0!==i?i:va,d=u[0],c=u[1],h=null!==(n=null==e?void 0:e.dpi)&&void 0!==n?n:fa,p=null!==(o=null==e?void 0:e.gap)&&void 0!==o?o:2,g=null!==(r=null==e?void 0:e.canvas)&&void 0!==r?r:Ra(1,1);g.width=Math.ceil(Da(d,h)),g.height=Math.ceil(Da(c,h));const f=new Array;let y=p;for(let i=Math.max(0,t);i<this.pageCount();i++){let t=yield null===(s=this.pageAt(i))||void 0===s?void 0:s.relatePage().get();if(t){let n=pa(t),o=Sa(ha(t).Rotate,[n.width,n.height]);if(y+o[1]>c){0==f.length&&f.push({index:i,page:t,offset:[0,0]});break}let r=0;switch(null!==(a=null==e?void 0:e.horizontal)&&void 0!==a?a:"center"){case"left":r=0;break;case"center":r=Math.max(0,(d-o[0])/2);break;case"right":r=Math.max(0,d-o[0])}f.push({index:i,page:t,offset:[r,y]}),y+=o[1],y+=p}}const m=new Array,v=new lc(g),$=null!==(l=null==e?void 0:e.line)&&void 0!==l?l:new sc(Oa(1.01,h));for(let t=0;t<f.length;t++){const i=f[t],n=yield this.renderOf(i.index,i.page);if(n&&(yield n.render({canvas:v,option:new ic(h),offset:i.offset,mode:null==e?void 0:e.mode,scope:null==e?void 0:e.scope}))&&(m.push(i.index),$&&t>0&&t<f.length)){v.lineStyle($),v.stroke(Vc.RGBA.BLACK);const t=i.offset[1]-(p-$.width)/2;v.drawShape(new ks(0,t,g.width,t),!1,!0)}}return m}))}}var zc,Uc,Wc,Hc=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};!function(t){class e extends gl{constructor(t,e){super(t,e)}count(){return this.origin.count()}get(t){const e=this.origin.at(t),i=this.vectorToArray(e);return{left:i[0],top:i[1],width:i[2],height:i[3]}}text(){var t,e;return null!==(e=null===(t=this.module)||void 0===t?void 0:t.vectorToString(this.origin.text()))&&void 0!==e?e:""}}t.Selected=e;class i extends gl{constructor(t,e){super(t,e)}select(t,i){const n=this.invoke(t,...i);return n?new e(this.module,n):null}selectByRect(t){return this.select("selectByRect",[t.left,t.top,t.width,t.height])}selectByLine(t,e){return this.select("selectByLine",[t.x,t.y,e.x,e.y])}hit(t){return this.origin.hit(t.x,t.y)}ptr(){return this.origin.ptr()}}t.Page=i;class n extends gl{constructor(t,e){super(t,e)}page(){var t;return null!==(t=this.origin.page())&&void 0!==t?t:-1}text(){var t,e;return null!==(e=null===(t=this.module)||void 0===t?void 0:t.vectorToString(this.origin.text()))&&void 0!==e?e:""}area(){const t=this.origin.area(),e=this.vectorToArray(t),i=new Array;for(let t=0;t<e.length;t+=4)i.push({left:e[t+0],top:e[t+1],width:e[t+2],height:e[t+3]});return i}}t.Highlight=n;class o extends gl{constructor(t,e){super(t,e)}count(){var t;return null!==(t=this.origin.count())&&void 0!==t?t:0}at(t){const e=this.origin.at(t);return e?new n(this.module,e):null}}t.SearchResult=o;class r extends gl{constructor(t,e){super(t,e)}next(){const t=this.origin.next();return t?new n(this.module,t):null}prev(){const t=this.origin.prev();return t?new n(this.module,t):null}end(){this.origin.end()}}let s;function a(t){let e=0;return Array.isArray(t)&&t.forEach((t=>e|=t)),e}t.Finder=r,function(t){t[t.caseSensitive=2]="caseSensitive",t[t.wholeWord=4]="wholeWord",t[t.SBCSensitive=8]="SBCSensitive",t[t.context=16]="context",t[t.ignoreSpace=32]="ignoreSpace",t[t.skipFooterHeader=64]="skipFooterHeader"}(s=t.SearchConfig||(t.SearchConfig={}));class l extends gl{constructor(t,e){super(t,e)}s2v(t){var e;return null===(e=this.module)||void 0===e?void 0:e.stringToVector(t)}search(t,e,i,...n){const r=this.s2v(t),s=a(n),l=this.origin.search(r,e,i,s);return new o(this.module,l)}find(t,e,i,...n){var o;null===(o=this.last)||void 0===o||o.end();const s=this.s2v(t),l=a(n),u=this.origin.find(s,e,i,l);return this.last=new r(this.module,u),this.last}}t.Searcher=l,t.makePage=function(t,e,n){return Hc(this,void 0,void 0,(function*(){return hl().then((o=>{const r=2+5*n.length,s=o.alloc(r*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(o.HEAPF32.buffer,s,r);a[0]=t,a[1]=e;for(let t=0;t<n.length;t++){const e=n[t],i=2+5*t;a[i+0]=e.unicode,a[i+1]=e.bound.left,a[i+2]=e.bound.top,a[i+3]=e.bound.width,a[i+4]=e.bound.height}const l=o.makeTextPage(s,a.length);return l?new i(o,l):null}))}))},t.makeSearcher=function(t){return Hc(this,void 0,void 0,(function*(){return hl().then((e=>{const i=t.map((t=>t?"number"==typeof t?t:t.ptr():0)),n=e.makeTextSearcher(e.na2v(i,"Uint32"));return n?new l(e,n):null}))}))}}(zc||(zc={})),function(t){t[t.none=0]="none",t[t.ctrl=1]="ctrl",t[t.alt=2]="alt",t[t.shift=4]="shift",t[t.meta=8]="meta"}(Uc||(Uc={})),function(t){t.val=e=>{let i=t.none;return e.ctrlKey&&(i|=t.ctrl),e.altKey&&(i|=t.alt),e.shiftKey&&(i|=t.shift),e.metaKey&&(i|=t.meta),i},t.has=(t,e)=>(t&e)===e}(Uc||(Uc={}));class Yc{constructor(t=0){this.elements=new Array,this.maxCount=Math.max(0,t)}size(){return this.elements.length}push(t){this.elements.push(t),this.maxCount>0&&this.size()>this.maxCount&&this.elements.shift()}poll(){return this.elements.shift()}peek(t=0){return this.elements[Math.max(0,t)]}back(t=0){return this.elements[this.size()-Math.max(0,t)-1]}clear(){this.elements.length=0}[Symbol.iterator](){return this.elements[Symbol.iterator]()}}!function(t){const e=EventTarget.prototype,i=b(e,"_addEventListener",e.addEventListener),n=b(e,"_removeEventListener",e.removeEventListener),o=b(e,"_dispatchEvent",e.dispatchEvent),r=t=>{let e={handleEvent:t=>{}};return null!==t&&("function"==typeof t?e.handleEvent=t:"handleEvent"in t&&(e=t)),e},s=t=>{const e={capture:!1,once:!1,passive:!1};return"boolean"==typeof t?e.capture=t:"object"==typeof t&&Object.assign(e,t),e},a=(t,e)=>{var i;const n=(null!==(i=t.get(e))&&void 0!==i?i:0)-1;n>0?t.set(e,n):t.delete(e)},l=t=>b(t,"_eventListeners",new Map);Object.assign(e,{addEventListener:function(t,e,n){var o,u;const d=r(e),c=s(n),h=null!==(o=c.once)&&void 0!==o&&o,p=l(this);h?i.call(this,t,(e=>{a(p,t),d.handleEvent.call(this,e)}),c):i.call(this,t,d,c),p.set(t,(null!==(u=p.get(t))&&void 0!==u?u:0)+1)},removeEventListener:function(t,e,i){const o=r(e),u=s(i);n.call(this,t,o,u);const d=l(this);a(d,t)},listEventListeners:function(){return[...l(this).keys()]},dispatchEvent(t){return"*"!==t.type&&l(this).has("*")&&o.call(this,new CustomEvent("*",{detail:t,bubbles:!0})),o.call(this,t)},on:function(t,e,i=!1){return this.addEventListener(t,e,i),this},once:function(t,e,i=!1){return this.addEventListener(t,e,{once:!0,capture:i}),this},off:function(t,e,i=!1){return this.removeEventListener(t,e,i),this},fire:function(t,e=null){return"string"==typeof t?this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0})):this.dispatchEvent(t),this}})}(Wc||(Wc={}));var Xc;!function(t){t[t.none=0]="none",t[t.left=1]="left",t[t.right=2]="right",t[t.middle=4]="middle"}(Xc||(Xc={}));class Zc{constructor(){this.deq=new Yc(5),this.meq=new Yc(10)}press(t){this.deq.push(t),this.meq.clear(),this.move(t)}isMoved(){return this.meq.size()>1}move(t){const e=this.meq.back();return e?(Math.abs(e.clientX-t.clientX)>1||Math.abs(e.clientY-t.clientY)>1)&&(this.meq.push(t),!0):(this.meq.push(t),!0)}release(t){let e=0;for(let i=0,n=this.deq.size();i<n;i++){const n=this.deq.back(i);if(!n)break;t.timeStamp-n.timeStamp<Zc.CLICK_PERIOD*(i+1)&&e++}return e}}Zc.CLICK_PERIOD=150;const Kc=Object.freeze({capture:!0,once:!1,passive:!1});var Qc;!function(t){t.on=(t,e,i)=>{t.addEventListener(e,(t=>{let e;t instanceof CustomEvent&&(e=t.detail),i.call(t,e)}),Kc)},t.off=(t,e,i)=>{t.removeEventListener(e,i,Kc)},t.fire=(t,e,i)=>{t.dispatchEvent(new CustomEvent(e,{detail:i}))}}(Qc||(Qc={}));class Jc{constructor(t,e){this.type=t,this.value=e}}const th=t=>`advice.${t}`;var eh,ih,nh;!function(t){t.fullName=t=>th(t.type);class e extends Jc{constructor(t,i="info"){super(e.TYPE,t),this.style=i}static from(t){return new e(t.message,"error")}}e.TYPE="message",t.Message=e;class i extends Jc{constructor(t){super(i.TYPE,t)}}i.TYPE="confirm",t.Confirm=i;class n extends Jc{constructor(t){super(n.TYPE,t)}}n.TYPE="prompt",t.Prompt=n}(eh||(eh={}));class oh{constructor(t,e){this.isOkay=!1,this.isOkay=null!=t&&t,this.value=e}}oh.OK=new oh(!0);!function(t){t[t.rect=0]="rect",t[t.line=1]="line"}(ih||(ih={})),function(t){t.point=(t,e)=>{const i=e.getBoundingClientRect();let[n,o]=[t.clientX,t.clientY];return[n-i.x,o-i.y]},t.isNone=t=>0==t.buttons,t.isLeft=t=>1==t.buttons,t.isRight=t=>2==t.buttons,t.isMiddle=t=>4==t.buttons,t.posToViewport=t=>{const e=t.getBoundingClientRect();return new Ls(e.x,e.y,e.width,e.height)},t.convertToElement=(t,e)=>{const i=e.getBoundingClientRect();let[n,o,r,s]=[t[0],t[1],t[2],t[3]];return[n-i.x,o-i.y,r,s]}}(nh||(nh={}));class rh{constructor(t){var e;this.bound=Ls.EMPTY,this.canvas=t,this.g2d=null!==(e=t.getContext("2d"))&&void 0!==e?e:ja,this.g2d.strokeStyle=ah.BORDER,this.g2d.lineWidth=1,this.g2d.fillStyle=ah.FILL}clear(){this.g2d.clearRect(0,0,this.canvas.width,this.canvas.height)}remove(){const t=this.canvas.parentElement;t&&t.removeChild(this.canvas)}calc(){const t=this.canvas.parentElement;if(!t)return;const e=t.getBoundingClientRect(),i=this.canvas.getBoundingClientRect(),[n,o]=[i.x-e.x,i.y-e.y];this.bound=new Ls(n,o,this.canvas.width,this.canvas.height)}}const sh="ts_event_bind";class ah{constructor(t){this.selected="",this.ratio=1,this.rotate=0,this.rectWithClip=Ls.EMPTY,this.firstMove=0,this.textPage=t,this.extras=new Array,this.mode=ih.rect,this.listener=new Map,this.copied=()=>{}}fill(t){this.container=t,this.bindEvent(),this.clear();const e=Array.from(this.container.getElementsByTagName("canvas"));for(let t of e){if(!0!==U.data.get(t,ba.MAIN))continue;const e=Ra(t.width,t.height),i=e.style,n=t.style;e.id=t.id+"_tse",i.position="absolute",i.left=d(n.left)?"0":n.left,i.top=d(n.top)?"0":n.top,this.extras.push(new rh(e))}for(let t of this.extras)this.container.appendChild(t.canvas),t.calc();return this}clear(){for(let t of this.extras)t.remove();this.extras.length=0}reset(){for(let t of this.extras)t.clear()}textSelectCompute(){const t=this.container,e=U.data.get(t,ba.RATIO)||1,i=U.data.get(t,ba.ROTATE),n=U.data.get(t,ba.BOUND);let o=Math.ceil(n[2]*e),r=Math.ceil(n[3]*e);if(i%180!=0){const t=o;o=r,r=t}const s=new Ls(n[0]*e,n[1]*e,o,r);this.ratio=e,this.rotate=i,this.rectWithClip=s}bindEvent(){const t=this.container;if(!0===U.data.get(t,sh))return;U.data.set(t,sh,!0);const e=document.querySelector("."+ba.BODY),i=()=>{let i=U.data.get(t,ba.RECT),n=nh.convertToElement(i,t);this.firstMove||(this.mode=U.data.get(e,ba.MODE),this.firstMove=1);const o=this.rotate,r=o<0?360+o%360:o,s=n[0],a=n[1],l=n[2],u=n[3],d=this.rectWithClip.x,c=this.rectWithClip.y,h=this.rectWithClip.width,p=this.rectWithClip.height;let g,f,y,m;switch(r%360){case 0:g=s,f=a,[y,m]=[l,u];break;case 90:g=a,f=h-s-l,[y,m]=[u,l];break;case 180:g=h-s-l,f=p-a-u,[y,m]=[l,u];break;case 270:g=p-a-u,f=s,[y,m]=[u,l]}const v=new Ls(g+d,f+c,y,m);this.select(v)},n=i=>{U.data.get(e,ba.PRESSED)&&t.classList.add("pos-to-viewport","pre-of-reset")};t.addEventListener("mousemove",n),this.listener.set("mousemove",n),t.addEventListener("doClean",(()=>{this.reset()})),t.addEventListener("doReset",(()=>{this.reset(),t.classList.remove("pre-of-reset")})),t.addEventListener("doFirst",(()=>{this.firstMove=0})),t.addEventListener("doMode",(()=>{let i=U.data.get(t,ba.X0Y0),n=nh.convertToElement(i,t),o=this.isOverText(n[0],n[1])?ih.line:ih.rect;U.data.set(e,ba.MODE,o)})),t.addEventListener("doSelect",(()=>{this.textSelectCompute(),i()}));const o=t=>{};t.addEventListener("mouseleave",o),this.listener.set("mouseleave",o)}isOverText(t,e){return this.textPage.hit({x:t/this.ratio,y:e/this.ratio})}select(t){if(this.selected="",0==this.extras.length)return;if(t.hasNothing()){for(let t of this.extras)t.clear();return}const e=this.ratio,i=t.scale(1/e);let n;if(this.mode==ih.rect?n=this.textPage.selectByRect(i):this.mode==ih.line&&(n=this.textPage.selectByLine(i.point(),{x:i.right,y:i.bottom})),!n)return;this.selected=n.text();const o=new Array,r=n.count();for(let t=0;t<r;t++){const i=n.get(t),r=this.rotate,s=r<0?360+r%360:r,a=i.left*e,l=i.top*e,u=i.width*e,d=i.height*e,c=this.rectWithClip.x,h=this.rectWithClip.y,p=this.rectWithClip.width,g=this.rectWithClip.height;switch(s%360){case 0:o.push(new Ls(a-c,l-h,u,d));break;case 90:let t=p-l-d,e=a;o.push(new Ls(t+h,e-c,d,u));break;case 180:let i=p-a-u,n=g-l-d;o.push(new Ls(i+c,n+h,u,d));break;case 270:let r=l,s=g-a-u;o.push(new Ls(r-h,s+c,d,u))}}for(let t of this.extras){t.clear();const e=t.g2d;for(let i of o)i.isIntersect(t.bound)&&e.fillRect(i.left-t.bound.x,i.top-t.bound.y,i.width,i.height)}}lastSelected(){return this.selected}customCopied(t){this.copied=t}close(){for(let[t,e]of this.listener)this.container.removeEventListener(t,e);U.data.set(this.container,sh,void 0),this.listener.clear(),this.textPage.close(),this.clear()}}ah.BORDER="black",ah.FILL="rgba(0, 150, 230, 0.5)";var lh=i(35562),uh=i.n(lh);class dh{constructor(){this._data=new Array}rows(){return this._data.length}columns(){return Math.max(...this._data.map((t=>Array.isArray(t)?t.length:0)))}isEmpty(){return 0==this.rows()}isSingle(){return 1==this.rows()&&1==this.columns()}set(t,e,i){if(t<0||e<0)return;let n=this._data[t];Array.isArray(n)||(n=new Array,this._data[t]=n);const o=n[e];return n[e]=i,o}delete(t,e){if(t<0||e<0)return;let i=this._data[t];if(Array.isArray(i)){const t=i[e];return t&&delete i[e],t}}get(t,e){if(t<0||e<0)return;const i=this._data[t];return i?i[e]:void 0}each(t){for(let e=0;e<this._data.length;e++){const i=this._data[e];if(Array.isArray(i))for(let n=0;n<i.length;n++){const o=i[n];if(void 0!==o&&!1===t(o,e,n))break}}}clear(){this._data.length=0}dump(){console.log(this._data)}}i(13521);var ch=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const hh=pt.getLogger("Main");var ph;!function(t){t.DocumentInvalid=Q.register(new Y(H.DOM+1,"Document invalid",!0)),t.DocumentPeriodInvalid=Q.register(new Y(H.DOM+2,"Document period between %start%,%end%",!0))}(ph||(ph={}));const gh=document,fh=gh.body;class yh extends T{constructor(t,e,i="Common"){var n,o,r;super(),this._rulerOpened=!1,this._gridOpened=!1,this._coordOpened=!1,this.index=t,this.document=e;let s=0;if(this.document){const t=new nc;this._render=new Gc(this.document,t),s=null!==(r=null===(o=null===(n=this.document.Pages)||void 0===n?void 0:n.Page)||void 0===o?void 0:o.size())&&void 0!==r?r:0;const e=this.document.parentUntil(Ql);this._fileName=e.fileName}this._pages=new Array(s)}get isOkay(){return!!this.document}get pageCount(){return this._pages.length}get name(){var t,e,i,n,o;return null!==(o=null!==(t=this._fileName)&&void 0!==t?t:null===(n=null===(i=null===(e=this.document)||void 0===e?void 0:e.parentUntil(Zl))||void 0===i?void 0:i.DocInfo)||void 0===n?void 0:n.Title)&&void 0!==o?o:""}get rulerOpened(){return this._rulerOpened}set rulerOpened(t){this._rulerOpened=t}get gridOpened(){return this._gridOpened}set gridOpened(t){this._gridOpened=t}get coordOpened(){return this._coordOpened}set coordOpened(t){this._coordOpened=t}connect(t){this._root=t}setError(t){this._error=t}checkPeriod(){var t,e;const i=null===(e=null===(t=this.document)||void 0===t?void 0:t.Permissions)||void 0===e?void 0:e.ValidPeriod;if(i){const t=_t.INSTANCE,e=(new Date).getTime(),n=t.parse(i.StartDate),o=t.parse(i.EndDate),r=n&&e<n.getTime(),s=o&&o.getTime()<e;if(r||s)throw new Q(ph.DocumentPeriodInvalid.code).set("start",i.StartDate).set("end",i.EndDate)}}check(){try{if(this._error)throw this._error;if(!this.isOkay)throw new Q(ph.DocumentInvalid.code);{const t=window.navigator.appVersion.toLowerCase();if(!t.includes("win")&&!t.includes("mac"))return!1}this.checkPeriod()}catch(t){if(t instanceof Q){if(t.isInterrupt())return!1}else hh.warn(t)}return!0}info(){var t,e,i,n,o,r;const s={},a=null===(e=null===(t=this.document)||void 0===t?void 0:t.parentUntil(Zl))||void 0===e?void 0:e.DocInfo;if(a){const t=["DocID","Title","Author","Subject","Abstract","CreationDate","ModDate","DocUsage","Creator","CreatorVersion"];for(const e of t)s[e]=a[e];s.Keywords=null===(n=null===(i=a.Keywords)||void 0===i?void 0:i.Keyword)||void 0===n?void 0:n.toArray();const e=null===(r=null===(o=a.CustomDatas)||void 0===o?void 0:o.CustomData)||void 0===r?void 0:r.toArray();if(e){const t={};for(const i of e)i&&i.Name&&(t[i.Name]=i.Value);s.CustomDatas=t}}return s}font(){var t,e;return ch(this,void 0,void 0,(function*(){const i=yield null===(e=null===(t=this.document)||void 0===t?void 0:t.CommonData)||void 0===e?void 0:e.loadAllResource();if(i){const t=new Array;for(const e of i.list("Fonts"))Ia(null==e?void 0:e.Font,(e=>{var i;t.push({name:null!==(i=e.FontName)&&void 0!==i?i:e.FamilyName,embed:!!e.FontFile})}));return t}return[]}))}pageAt(t){var e,i,n;return ch(this,void 0,void 0,(function*(){let o=this._pages[t];if(o)return o;const r=null===(n=null===(i=null===(e=this.document)||void 0===e?void 0:e.Pages)||void 0===i?void 0:i.Page)||void 0===n?void 0:n.get(t);if(r)try{const e=yield r.relatePage().get();e&&(o=new wh(this,t,e,this._render))}catch(e){e instanceof Q||hh.warn(e),o=new bh(this,t)}return this._pages[t]=o,o}))}doClose(){var t;ua(this.document),null===(t=this._render)||void 0===t||t.close();for(const t of this._pages)null==t||t.close();this._pages.length=0}getRender(){return this._render}printPage(t,e){var i;return ch(this,void 0,void 0,(function*(){const n=gh.createElement("div");n.id="print-box",n.style.position="absolute",n.style.zIndex="-1",n.style.width="200px",n.style.height="200px",n.style.overflow="auto";const o=new Array;if(t&&0!=t.length)o.push(...t);else for(let t=0;t<this.pageCount;t++)o.push(t);const r=new Array;if(!0===(null==e?void 0:e.merge))for(let t=0;t<o.length;t++){const n=gh.createElement("canvas");n.id="print-cs"+t,n.className="print-cs";const s=yield this.pageAt(o[t]),a=yield s.render(n,{dpi:96,paper:null!==(i=null==e?void 0:e.paper)&&void 0!==i?i:va});if(!(Array.isArray(a)&&a.length>0)){console.log("Merge render failed");break}r.push(n.toDataURL()),t=a[a.length-1]}else for(let t=0;t<o.length;t++){const e=gh.createElement("canvas");e.id="print-cs"+t,e.className="print-cs";const i=yield this.pageAt(o[t]),[s,a]=i.size(),l=s>a?90:0;if(i){!1!==(yield i.render(e,{dpi:96,rotate:l}))&&r.push(e.toDataURL())}n.appendChild(e)}fh.appendChild(n),uh()({printable:r,type:"image"}),n.remove()}))}initSelectFrame(t){t.classList.add(ba.BODY);const e=document.createElement("div");let i,n;e.setAttribute("id","textSelectFrame"),e.style.cssText="position:fixed;z-index:999;top:0px;left:0px;width:0px;height:0px;border:solid 1px black;display:none;",t.appendChild(e),U.data.set(t,ba.PRESSED,!1);const o=document.querySelector("#textSelectFrame"),r=document.createEvent("Events");r.initEvent("doClean",!0,!0);const s=document.createEvent("Events");s.initEvent("doReset",!0,!0);const a=document.createEvent("Events");a.initEvent("doFirst",!0,!0);const l=document.createEvent("Events");l.initEvent("doMode",!0,!0);const u=document.createEvent("Events");u.initEvent("doSelect",!0,!0),t.addEventListener("mousedown",(e=>{const r=e||window.event,a=r.target||r.srcElement;if("canvas"==a.nodeName.toLowerCase()){document.querySelectorAll(".pre-of-reset").forEach((function(t){try{t.dispatchEvent(s)}catch(t){console.error(t)}})),nh.isLeft(r)&&U.data.set(t,ba.PRESSED,!0),[i,n]=[r.clientX,r.clientY],o.style.display="block";const e=a.parentElement;e.classList.add(ba.START),U.data.set(e,ba.X0Y0,[i,n]);try{e.dispatchEvent(l)}catch(t){console.error(t)}}})),t.addEventListener("mousemove",(e=>{const s=e||window.event,a=U.data.get(t,ba.PRESSED);let l=!1;const d=document.querySelectorAll(".pos-to-viewport");if(l=[].some.call(d,(function(t){const e=nh.posToViewport(t),i=new Ls(s.clientX,s.clientY,1,1);return e.isIntersect(i)})),a&&l){const[t,e]=[s.clientX,s.clientY],a=Math.min(n,e),l=Math.min(i,t),c=Math.abs(t-i),h=Math.abs(e-n);o.style.top=a+"px",o.style.left=l+"px",o.style.width=c+"px",o.style.height=h+"px",d.forEach((function(t){try{t.dispatchEvent(r)}catch(t){console.error(t)}const e=nh.posToViewport(t),i=new Ls(l,a,c,h),n=e.intersect(i);if(!n.hasNothing()){U.data.set(t,ba.RECT,n.toArray());try{t.dispatchEvent(u)}catch(t){console.error(t)}}}))}})),document.addEventListener("mouseup",(()=>{const e=document.querySelector("."+ba.START);e&&e.classList.remove(ba.START),U.data.set(t,ba.PRESSED,!1);document.querySelectorAll(".pos-to-viewport").forEach((function(t){try{t.dispatchEvent(a)}catch(t){console.error(t)}t.classList.remove("pos-to-viewport")})),o.style.top="0px",o.style.left="0px",o.style.width="0px",o.style.height="0px",o.style.display="none"}))}save(t){var e;return ch(this,void 0,void 0,(function*(){const i=null===(e=this.document)||void 0===e?void 0:e.parentUntil(Ql);if(i){i.Version="1.2";const e=yield i.save();U.util.save(yield e.flush("blob"),null!=t?t:"hello.ofd")}}))}}const mh=()=>Promise.resolve(),vh={before:new Set,after:new Set};class $h extends T{constructor(t,e){super(),this.parent=t,this.index=e}initContainer(t,e){var i;const n=U.util.clear(t),o=new ic(null==e?void 0:e.dpi),r=Pa(null!==(i=null==e?void 0:e.rotate)&&void 0!==i?i:this.rotate());n.style.position="relative";let s=this.box();return r%180!=0&&(s=new Ls(s.x,s.y,s.height,s.width)),U.data.sets(n,[["index",this.index],[ba.DPI,o.dpi],[ba.RATIO,o.ratio],[ba.ROTATE,r],[ba.BOUND,s.toArray()]]),n}}class bh extends $h{constructor(t,e){super(t,e)}doClose(){}rotate(){return 0}size(){return va}box(){return new Ls(0,0,...this.size())}paint(t,e){var i,n,o,r,s,a;return ch(this,void 0,void 0,(function*(){const l=this.initContainer(t,e);for(const t of vh.before)yield t(this,l);yield(null!==(n=null===(i=null==e?void 0:e.event)||void 0===i?void 0:i.before)&&void 0!==n?n:mh)(this,l);const u=new ic(null==e?void 0:e.dpi).ratio,d=Pa(null!==(o=null==e?void 0:e.rotate)&&void 0!==o?o:this.rotate()),c=(new bs).rotateDeg(d).applyToPoint(...this.size()),h=Ra(c[0]*u,c[1]*u);h.id=ba.PAGE_PREFIX+`${this.index}_0_0`,U.util.absolute(h,0,0),U.data.set(h,ba.MAIN,!0),l.appendChild(h),yield this.render(h,{dpi:null!==(r=null==e?void 0:e.dpi)&&void 0!==r?r:fa});for(const t of vh.after)yield t(this,l);yield(null!==(a=null===(s=null==e?void 0:e.event)||void 0===s?void 0:s.after)&&void 0!==a?a:mh)(this,l)}))}render(t,e){var i;return ch(this,void 0,void 0,(function*(){const n=Da(1,null==e?void 0:e.dpi),o=this.size();t.width=Math.round(o[0]*n),t.height=Math.round(o[1]*n);const r=null!==(i=t.getContext("2d"))&&void 0!==i?i:ja;return r.clearRect(0,0,t.width,t.height),r.strokeStyle="gray",r.setLineDash([10,2]),r.strokeRect(1,1,t.width-2,t.height-2),!0}))}}class wh extends $h{constructor(t,e,i,n){super(t,e),this.page=i,this._render=n}doClose(){var t;null===(t=this._selector)||void 0===t||t.close()}rotate(){return ha(this.page).Rotate}size(){return this.box().size().toArray()}box(){return this._bound||(this._bound=pa(this.page)),this._bound}paint(t,e){var i,n,o,r,s;return ch(this,void 0,void 0,(function*(){const a=this.initContainer(t,e);for(const t of vh.before)yield t(this,a);yield(null!==(n=null===(i=null==e?void 0:e.event)||void 0===i?void 0:i.before)&&void 0!==n?n:mh)(this,a);const l=new ic(null==e?void 0:e.dpi),u=Pa(null!==(o=null==e?void 0:e.rotate)&&void 0!==o?o:this.rotate());try{const t=yield this.calc(l.dpi),i=!0===(null==e?void 0:e.selectText)&&!this._selector,n=new Map,o=t.rows(),d=t.columns(),c=Array(),h=(e,i,n,o)=>{const r=t.get(e,i);if(r){const t=Sa(u,[r.width,r.height]);return c.push({origin:r,real:new Ls(n,o,t[0],t[1]),row:e,column:i}),t}return[0,0]};if(0==u){let t=0;for(let e=0;e<o;e++){let i=0,n=0;for(let o=0;o<d;o++){const r=h(e,o,i,t);i+=r[0],n=Math.max(n,r[1])}t+=n}}else if(90==u){let t=0;for(let e=0;e<d;e++){let i=0,n=0;for(let r=o-1;r>=0;r--){const o=h(r,e,i,t);i+=o[0],n=Math.max(n,o[1])}t+=n}}else if(180==u){let t=0;for(let e=o-1;e>=0;e--){let i=0,n=0;for(let o=d-1;o>=0;o--){const r=h(e,o,i,t);i+=r[0],n=Math.max(n,r[1])}t+=n}}else if(270==u){let t=0;for(let e=d-1;e>=0;e--){let i=0,n=0;for(let r=0;r<o;r++){const o=h(r,e,i,t);i+=o[0],n=Math.max(n,o[1])}t+=n}}for(const t of c){const{x:e,y:o,width:r,height:s}=t.real,d=Ra(r,s);d.id=ba.PAGE_PREFIX+`${this.index}_${t.row}_${t.column}`,U.util.absolute(d,e,o),U.data.set(d,ba.MAIN,!0),a.appendChild(d);const c=new Array;if(yield this.render(d,{dpi:l.dpi,region:t.origin,charInfo:i?c:void 0,rotate:u}),c.length>0)for(const t of c)n.set(t.id,t)}if(n.size>0){const t=this.size(),e=new Array;for(const[t,i]of n)i.outside||e.push({unicode:new Rd(i.char).codeAt(0),bound:i.bound});m((()=>ch(this,void 0,void 0,(function*(){const i=yield zc.makePage(t[0],t[1],e);i&&(this._selector=new ah(i),this._selector.fill(a))}))))}else this._selector&&this._selector.fill(a);for(const t of vh.after)yield t(this,a);yield(null!==(s=null===(r=null==e?void 0:e.event)||void 0===r?void 0:r.after)&&void 0!==s?s:mh)(this,a)}catch(t){t instanceof Q||hh.warn(t)}}))}render(t,e){return ch(this,void 0,void 0,(function*(){if(s(this._render))return console.info("DocumentRender is invalid"),!1;const i={dpi:0,canvas:t};"number"==typeof(null==e?void 0:e.dpi)&&e.dpi>0&&(i.dpi=e.dpi),console.log(`Start render page ${this.index}...`);try{if(e&&"paper"in e){const t=Object.assign({},e,i);return yield this._render.mergeRender(this.index,t)}{const t=Object.assign({},e,i);(null==e?void 0:e.region)&&(t.region=e.region.scale(Oa(1,i.dpi)));return yield this._render.renderPage(this.index,t)}}catch(t){return t instanceof Q||hh.warn(t),!1}finally{console.log(`Finish render page ${this.index}`)}}))}calc(t){return ch(this,void 0,void 0,(function*(){let e,i;e=i=Math.min(6e3,...yield U.canvas.maxArea());const n=this.box().scale(Da(1,t)),{left:o,top:r,width:s,height:a}=n,l=new dh;if(s>e||a>i){const t=e,n=i,u=Math.ceil(a/n),d=Math.ceil(s/t);let c=0;for(let e=0;e<u;e++){let i=0;for(let u=0;u<d;u++)l.set(e,u,new Ls(i+o,c+r,Math.min(t,s-i),Math.min(n,a-c))),i+=t+1;c+=n+1}}else l.set(0,0,n);return l}))}}let xh;const Ch={open:(t,e=0,i)=>ch(void 0,void 0,void 0,(function*(){let n,o;xh&&I.free(xh);try{n=yield ca(t,e)}catch(t){o=t}return xh=new yh(e,n,i),xh.setError(o),xh})),Tool:function(t){const e={};for(const i in t)Object.defineProperty(e,i,{configurable:!1,writable:!1,value:t[i]});return e}({mm2px:Da,px2mm:Oa,toDPI:(t,e)=>e*Ca/t,ratote:Sa,errors:Q.dump,app:Object.freeze({name:C(),version:D()}),isRegistered:!1})};(t=>{if(t.SWOFD?Object.assign(t.SWOFD,Ch):t.SWOFD=Object.assign({},Ch),Array.isArray(t.SWOFD.reasons))for(const i of t.SWOFD.reasons)"code"in(e=i)&&"message"in e&&K.set(e.code,new Y(e.code,e.message,e.interrupt));var e})(window)},13521:function(t,e,i){"use strict";var n=i(74783)(t.id,{publicPath:"../",locals:!1});t.hot.dispose(n),t.hot.accept(void 0,n)},7105:function(){}},function(t){t.O(0,[374],(function(){return e=87223,t(t.s=e);var e}));t.O()}]);